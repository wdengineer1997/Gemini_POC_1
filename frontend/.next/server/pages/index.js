/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.js\");\n/* harmony import */ var _pages_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/index.js */ \"./pages/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_index_js__WEBPACK_IMPORTED_MODULE_5__]);\n_pages_index_js__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/index\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _pages_index_js__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZpbmRleC5qcyZhYnNvbHV0ZUFwcFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2FwcCZhYnNvbHV0ZURvY3VtZW50UGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZG9jdW1lbnQmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ2hDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDVjtBQUMxQztBQUM2QztBQUM3QztBQUNBLGlFQUFlLHdFQUFLLENBQUMsNENBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsNENBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsNENBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsNENBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLDRDQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLDRDQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsNENBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsNENBQVE7QUFDekQ7QUFDTyx3QkFBd0IseUdBQWdCO0FBQy9DO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW1pbmktdm9pY2UtZnJvbnRlbmQvPzE0M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCBBcHAgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fYXBwXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9pbmRleC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuZXhwb3J0IGNvbnN0IHJlcG9ydFdlYlZpdGFscyA9IGhvaXN0KHVzZXJsYW5kLCBcInJlcG9ydFdlYlZpdGFsc1wiKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgIHBhZ2U6IFwiL2luZGV4XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBBcHAsXG4gICAgICAgIERvY3VtZW50XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./components/AudioPlayer.js":
/*!***********************************!*\
  !*** ./components/AudioPlayer.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AudioPlayer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _VoiceChat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VoiceChat */ \"./components/VoiceChat.js\");\n\n\n\nfunction AudioPlayer({ audioData, mimeType = \"audio/wav\" }) {\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!audioData) return;\n        // Create audio source\n        const audioBlob = new Blob([\n            Uint8Array.from(atob(audioData), (c)=>c.charCodeAt(0))\n        ], {\n            type: mimeType\n        });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        if (audioRef.current) {\n            audioRef.current.src = audioUrl;\n            // Try to autoplay the audio\n            const playPromise = audioRef.current.play();\n            // Handle autoplay restrictions\n            if (playPromise !== undefined) {\n                playPromise.then(()=>{\n                    console.log(\"Audio autoplay started successfully\");\n                    // Make the TalkingHead speak when audio plays\n                    if (false) {}\n                }).catch((error)=>{\n                    console.warn(\"Audio autoplay prevented:\", error);\n                // Autoplay was prevented - user will need to press play manually\n                });\n            }\n            // Make the TalkingHead speak when audio plays manually\n            audioRef.current.onplay = ()=>{\n                if (false) {}\n            };\n            // Clean up when component unmounts\n            return ()=>{\n                URL.revokeObjectURL(audioUrl);\n            };\n        }\n    }, [\n        audioData,\n        mimeType\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n        ref: audioRef,\n        controls: true,\n        className: \"message-audio-player\",\n        preload: \"auto\"\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/AudioPlayer.js\",\n        lineNumber: 54,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0F1ZGlvUGxheWVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEM7QUFDQTtBQUUzQixTQUFTRyxZQUFZLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxXQUFXLEVBQUU7SUFDdkUsTUFBTUMsV0FBV0wsNkNBQU1BLENBQUM7SUFFeEJELGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDSSxXQUFXO1FBRWhCLHNCQUFzQjtRQUN0QixNQUFNRyxZQUFZLElBQUlDLEtBQ3BCO1lBQUNDLFdBQVdDLElBQUksQ0FBQ0MsS0FBS1AsWUFBWVEsQ0FBQUEsSUFBS0EsRUFBRUMsVUFBVSxDQUFDO1NBQUksRUFDeEQ7WUFBRUMsTUFBTVQ7UUFBUztRQUVuQixNQUFNVSxXQUFXQyxJQUFJQyxlQUFlLENBQUNWO1FBRXJDLElBQUlELFNBQVNZLE9BQU8sRUFBRTtZQUNwQlosU0FBU1ksT0FBTyxDQUFDQyxHQUFHLEdBQUdKO1lBRXZCLDRCQUE0QjtZQUM1QixNQUFNSyxjQUFjZCxTQUFTWSxPQUFPLENBQUNHLElBQUk7WUFFekMsK0JBQStCO1lBQy9CLElBQUlELGdCQUFnQkUsV0FBVztnQkFDN0JGLFlBQ0dHLElBQUksQ0FBQztvQkFDSkMsUUFBUUMsR0FBRyxDQUFDO29CQUNaLDhDQUE4QztvQkFDOUMsSUFBSSxLQUFrRSxFQUFZLEVBRWpGO2dCQUNILEdBQ0NHLEtBQUssQ0FBQ0MsQ0FBQUE7b0JBQ0xMLFFBQVFNLElBQUksQ0FBQyw2QkFBNkJEO2dCQUMxQyxpRUFBaUU7Z0JBQ25FO1lBQ0o7WUFFQSx1REFBdUQ7WUFDdkR2QixTQUFTWSxPQUFPLENBQUNhLE1BQU0sR0FBRztnQkFDeEIsSUFBSSxLQUFrRSxFQUFZLEVBRWpGO1lBQ0g7WUFFQSxtQ0FBbUM7WUFDbkMsT0FBTztnQkFDTGYsSUFBSWdCLGVBQWUsQ0FBQ2pCO1lBQ3RCO1FBQ0Y7SUFDRixHQUFHO1FBQUNYO1FBQVdDO0tBQVM7SUFFeEIscUJBQ0UsOERBQUM0QjtRQUNDQyxLQUFLNUI7UUFDTDZCLFFBQVE7UUFDUkMsV0FBVTtRQUNWQyxTQUFROzs7Ozs7QUFHZCIsInNvdXJjZXMiOlsid2VicGFjazovL2dlbWluaS12b2ljZS1mcm9udGVuZC8uL2NvbXBvbmVudHMvQXVkaW9QbGF5ZXIuanM/MThhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGF1ZGlvRXZlbnRzIH0gZnJvbSAnLi9Wb2ljZUNoYXQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdWRpb1BsYXllcih7IGF1ZGlvRGF0YSwgbWltZVR5cGUgPSAnYXVkaW8vd2F2JyB9KSB7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhdWRpb0RhdGEpIHJldHVybjtcbiAgICBcbiAgICAvLyBDcmVhdGUgYXVkaW8gc291cmNlXG4gICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoXG4gICAgICBbVWludDhBcnJheS5mcm9tKGF0b2IoYXVkaW9EYXRhKSwgYyA9PiBjLmNoYXJDb2RlQXQoMCkpXSwgXG4gICAgICB7IHR5cGU6IG1pbWVUeXBlIH1cbiAgICApO1xuICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xuICAgIFxuICAgIGlmIChhdWRpb1JlZi5jdXJyZW50KSB7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LnNyYyA9IGF1ZGlvVXJsO1xuICAgICAgXG4gICAgICAvLyBUcnkgdG8gYXV0b3BsYXkgdGhlIGF1ZGlvXG4gICAgICBjb25zdCBwbGF5UHJvbWlzZSA9IGF1ZGlvUmVmLmN1cnJlbnQucGxheSgpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgYXV0b3BsYXkgcmVzdHJpY3Rpb25zXG4gICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwbGF5UHJvbWlzZVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXVkaW8gYXV0b3BsYXkgc3RhcnRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAvLyBNYWtlIHRoZSBUYWxraW5nSGVhZCBzcGVhayB3aGVuIGF1ZGlvIHBsYXlzXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB3aW5kb3cuc3BlYWtXaXRoQXVkaW8oYXVkaW9EYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBdWRpbyBhdXRvcGxheSBwcmV2ZW50ZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEF1dG9wbGF5IHdhcyBwcmV2ZW50ZWQgLSB1c2VyIHdpbGwgbmVlZCB0byBwcmVzcyBwbGF5IG1hbnVhbGx5XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE1ha2UgdGhlIFRhbGtpbmdIZWFkIHNwZWFrIHdoZW4gYXVkaW8gcGxheXMgbWFudWFsbHlcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQub25wbGF5ID0gKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHdpbmRvdy5zcGVha1dpdGhBdWRpbyhhdWRpb0RhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2F1ZGlvRGF0YSwgbWltZVR5cGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxhdWRpbyBcbiAgICAgIHJlZj17YXVkaW9SZWZ9IFxuICAgICAgY29udHJvbHMgXG4gICAgICBjbGFzc05hbWU9XCJtZXNzYWdlLWF1ZGlvLXBsYXllclwiXG4gICAgICBwcmVsb2FkPVwiYXV0b1wiXG4gICAgLz5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsImF1ZGlvRXZlbnRzIiwiQXVkaW9QbGF5ZXIiLCJhdWRpb0RhdGEiLCJtaW1lVHlwZSIsImF1ZGlvUmVmIiwiYXVkaW9CbG9iIiwiQmxvYiIsIlVpbnQ4QXJyYXkiLCJmcm9tIiwiYXRvYiIsImMiLCJjaGFyQ29kZUF0IiwidHlwZSIsImF1ZGlvVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiY3VycmVudCIsInNyYyIsInBsYXlQcm9taXNlIiwicGxheSIsInVuZGVmaW5lZCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwid2luZG93Iiwic3BlYWtXaXRoQXVkaW8iLCJjYXRjaCIsImVycm9yIiwid2FybiIsIm9ucGxheSIsInJldm9rZU9iamVjdFVSTCIsImF1ZGlvIiwicmVmIiwiY29udHJvbHMiLCJjbGFzc05hbWUiLCJwcmVsb2FkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/AudioPlayer.js\n");

/***/ }),

/***/ "./components/TalkingHead.js":
/*!***********************************!*\
  !*** ./components/TalkingHead.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TalkingHead)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction TalkingHead() {\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mixerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isAnimatingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const jawBoneRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioAnalyserRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioSourceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationFrameRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const blinkIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const randomMovementIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mouthControls = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        jawOpen: null,\n        mouthClose: null,\n        visemes: {},\n        lastUpdateTime: 0,\n        targetValue: 0,\n        currentValue: 0\n    });\n    const facialExpressionsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        eyeBlink: {\n            left: 0,\n            right: 0,\n            nextBlink: 0\n        },\n        eyeMovement: {\n            x: 0,\n            y: 0,\n            nextMove: 0\n        },\n        browMovement: {\n            value: 0,\n            nextMove: 0\n        },\n        mouthExpression: {\n            value: 0,\n            type: \"neutral\",\n            nextChange: 0\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!containerRef.current) return;\n        let scene, camera, renderer, mixer, clock;\n        const init = async ()=>{\n            try {\n                const THREE = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! three */ \"three\"));\n                const { GLTFLoader } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/three\").then(__webpack_require__.bind(__webpack_require__, /*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\"));\n                scene = new THREE.Scene();\n                scene.background = new THREE.Color(0xf5f5f5);\n                camera = new THREE.PerspectiveCamera(45, containerRef.current.clientWidth / containerRef.current.clientHeight, 0.1, 1000);\n                camera.position.set(0, 1.6, 1.8);\n                camera.lookAt(0, 1.4, 0);\n                renderer = new THREE.WebGLRenderer({\n                    antialias: true\n                });\n                renderer.setSize(containerRef.current.clientWidth, containerRef.current.clientHeight);\n                renderer.setPixelRatio(window.devicePixelRatio);\n                containerRef.current.appendChild(renderer.domElement);\n                const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n                scene.add(ambientLight);\n                const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n                directionalLight.position.set(0, 1, 1);\n                scene.add(directionalLight);\n                try {\n                    if (window.AudioContext || window.webkitAudioContext) {\n                        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n                        audioAnalyserRef.current = audioContextRef.current.createAnalyser();\n                        audioAnalyserRef.current.fftSize = 256;\n                    }\n                } catch (err) {\n                    console.warn(\"Audio Context could not be created:\", err);\n                }\n                const loader = new GLTFLoader();\n                console.log(\"Loading 3D model from path:\", \"/talkinghead/avatars/brunette.glb\");\n                loader.load(\"/talkinghead/avatars/brunette.glb\", (gltf)=>{\n                    console.log(\"Model loaded successfully!\");\n                    const model = gltf.scene;\n                    scene.add(model);\n                    modelRef.current = model;\n                    console.log(\"Bone structure:\");\n                    model.traverse((object)=>{\n                        if (object.isBone || object.isSkinnedMesh || object.isMesh) {\n                            console.log(`Found object: ${object.name}, type: ${object.type}`);\n                            if (object.morphTargetDictionary) {\n                                console.log(\"Found morph targets:\", Object.keys(object.morphTargetDictionary));\n                                const morphDict = object.morphTargetDictionary;\n                                if (morphDict) {\n                                    const jawOpenNames = [\n                                        \"jawOpen\",\n                                        \"mouthOpen\",\n                                        \"JawOpen\",\n                                        \"MouthOpen\",\n                                        \"jaw_open\"\n                                    ];\n                                    const mouthCloseNames = [\n                                        \"mouthClose\",\n                                        \"MouthClose\",\n                                        \"mouth_close\"\n                                    ];\n                                    for(const key in morphDict){\n                                        if (key.startsWith(\"viseme_\")) {\n                                            console.log(`Found viseme morph: ${key}`);\n                                            mouthControls.current.visemes[key] = {\n                                                mesh: object,\n                                                index: morphDict[key],\n                                                weight: 0\n                                            };\n                                        }\n                                    }\n                                    for (const name of jawOpenNames){\n                                        if (morphDict[name] !== undefined) {\n                                            console.log(`Found jaw open morph: ${name}`);\n                                            mouthControls.current.jawOpen = {\n                                                mesh: object,\n                                                index: morphDict[name]\n                                            };\n                                            break;\n                                        }\n                                    }\n                                    for (const name of mouthCloseNames){\n                                        if (morphDict[name] !== undefined) {\n                                            console.log(`Found mouth close morph: ${name}`);\n                                            mouthControls.current.mouthClose = {\n                                                mesh: object,\n                                                index: morphDict[name]\n                                            };\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        const name = (object.name || \"\").toLowerCase();\n                        if (name.includes(\"jaw\") || name.includes(\"mouth\") || name.includes(\"chin\") || name.includes(\"teeth\") || name.includes(\"tongue\")) {\n                            console.log(\"Found potential jaw/mouth bone:\", object.name);\n                            jawBoneRef.current = object;\n                        }\n                    });\n                    const box = new THREE.Box3().setFromObject(model);\n                    const center = box.getCenter(new THREE.Vector3());\n                    model.position.x = -center.x;\n                    model.position.y = -center.y + 0.1;\n                    model.position.z = -center.z;\n                    model.scale.set(1.6, 1.6, 1.6);\n                    if (gltf.animations && gltf.animations.length > 0) {\n                        mixer = new THREE.AnimationMixer(model);\n                        mixerRef.current = mixer;\n                        const clip = gltf.animations[0];\n                        const action = mixer.clipAction(clip);\n                        action.play();\n                    }\n                    clock = new THREE.Clock();\n                    animate();\n                    const setupAudioListener = ()=>{\n                        const audioElements = document.querySelectorAll(\"audio\");\n                        if (audioElements.length > 0) {\n                            console.log(\"Found audio elements:\", audioElements.length);\n                            audioElements.forEach((audio)=>{\n                                audio.removeEventListener(\"play\", onAudioPlay1);\n                                audio.removeEventListener(\"pause\", onAudioPause1);\n                                audio.removeEventListener(\"ended\", onAudioEnded1);\n                                audio.addEventListener(\"play\", onAudioPlay1);\n                                audio.addEventListener(\"pause\", onAudioPause1);\n                                audio.addEventListener(\"ended\", onAudioEnded1);\n                                console.log(\"Added event listeners to audio element\");\n                            });\n                        } else {\n                            setTimeout(setupAudioListener, 1000);\n                        }\n                    };\n                    setupAudioListener();\n                    window.speakWithAudio = (audioData)=>{\n                        console.log(\"Speaking with audio data, length:\", audioData?.length || 0);\n                        stopAllAnimations();\n                        if (!audioData || audioData.length === 0) {\n                            resetMouthState();\n                            return;\n                        }\n                        isAnimatingRef.current = true;\n                        startPatternBasedAnimation(audioData);\n                        const estimatedDuration = audioData.length / 44100 * 1000;\n                        console.log(\"Estimated audio duration:\", estimatedDuration, \"ms\");\n                        if (animationTimeoutRef.current) {\n                            clearTimeout(animationTimeoutRef.current);\n                        }\n                        animationTimeoutRef.current = setTimeout(()=>{\n                            console.log(\"Animation timeout reached, stopping animation\");\n                            stopAllAnimations();\n                        }, estimatedDuration + 500);\n                    };\n                    window.processVisemeData = (data)=>{\n                        console.log(\"Processing viseme data:\", data);\n                        stopAllAnimations();\n                        if (!data || !data.visemes || data.visemes.length === 0) {\n                            resetMouthState();\n                            return;\n                        }\n                        startVisemeBasedAnimation(data.visemes, data.duration || 3000);\n                    };\n                    startRandomEyeBlink();\n                }, (progress)=>{\n                    const percent = progress.loaded / progress.total * 100;\n                    console.log(`Loading model: ${percent.toFixed(2)}%`);\n                }, (error)=>{\n                    console.error(\"Error loading model:\", error);\n                });\n                function animate() {\n                    requestAnimationFrame(animate);\n                    if (mixer) {\n                        mixer.update(clock.getDelta());\n                    }\n                    renderer.render(scene, camera);\n                }\n                const handleResize1 = ()=>{\n                    if (!containerRef.current) return;\n                    camera.aspect = containerRef.current.clientWidth / containerRef.current.clientHeight;\n                    camera.updateProjectionMatrix();\n                    renderer.setSize(containerRef.current.clientWidth, containerRef.current.clientHeight);\n                };\n                window.addEventListener(\"resize\", handleResize1);\n                function onAudioPlay1(e) {\n                    console.log(\"Audio playback started\");\n                    if (!isAnimatingRef.current) {\n                        isAnimatingRef.current = true;\n                        startLipSyncAnimation();\n                    }\n                }\n                function onAudioPause1(e) {\n                    console.log(\"Audio playback paused\");\n                    stopAllAnimations();\n                }\n                function onAudioEnded1(e) {\n                    console.log(\"Audio playback ended\");\n                    stopAllAnimations();\n                }\n                function stopAllAnimations() {\n                    isAnimatingRef.current = false;\n                    if (animationFrameRef.current) {\n                        cancelAnimationFrame(animationFrameRef.current);\n                        animationFrameRef.current = null;\n                    }\n                    if (animationTimeoutRef.current) {\n                        clearTimeout(animationTimeoutRef.current);\n                        animationTimeoutRef.current = null;\n                    }\n                    resetMouthState();\n                }\n                function resetMouthState() {\n                    for(const key in mouthControls.current.visemes){\n                        const viseme = mouthControls.current.visemes[key];\n                        if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                            viseme.mesh.morphTargetInfluences[viseme.index] = 0;\n                        }\n                    }\n                    if (mouthControls.current.jawOpen) {\n                        const mesh = mouthControls.current.jawOpen.mesh;\n                        const index = mouthControls.current.jawOpen.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            mesh.morphTargetInfluences[index] = 0;\n                        }\n                    }\n                    if (mouthControls.current.mouthClose) {\n                        const mesh = mouthControls.current.mouthClose.mesh;\n                        const index = mouthControls.current.mouthClose.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            mesh.morphTargetInfluences[index] = 0;\n                        }\n                    }\n                    if (jawBoneRef.current && jawBoneRef.current.originalRotation) {\n                        jawBoneRef.current.rotation.x = jawBoneRef.current.originalRotation.x;\n                        jawBoneRef.current.rotation.y = jawBoneRef.current.originalRotation.y;\n                        jawBoneRef.current.rotation.z = jawBoneRef.current.originalRotation.z;\n                    }\n                }\n                function startPatternBasedAnimation(audioData) {\n                    const patternConfig = {\n                        startTime: Date.now(),\n                        wordDuration: 300,\n                        pauseDuration: 100,\n                        syllableCount: Math.ceil(audioData.length / 8000),\n                        currentSyllable: 0\n                    };\n                    console.log(\"Starting pattern-based animation with estimated syllables:\", patternConfig.syllableCount);\n                    animatePatternBasedLipSync(patternConfig);\n                }\n                function animatePatternBasedLipSync(pattern) {\n                    if (!isAnimatingRef.current) {\n                        resetMouthState();\n                        return;\n                    }\n                    const now = Date.now();\n                    const elapsed = now - pattern.startTime;\n                    const syllableDuration = pattern.wordDuration / 2;\n                    const cycleDuration = syllableDuration + pattern.pauseDuration;\n                    const cyclePosition = elapsed % cycleDuration / syllableDuration;\n                    let openValue;\n                    if (cyclePosition < 1) {\n                        openValue = Math.sin(cyclePosition * Math.PI) * 0.5;\n                    } else {\n                        openValue = 0;\n                    }\n                    const variation = Math.random() * 0.1;\n                    openValue = Math.max(0, Math.min(1, openValue + variation));\n                    applyVisemesBasedOnOpenness(openValue);\n                    animationFrameRef.current = requestAnimationFrame(()=>{\n                        animatePatternBasedLipSync(pattern);\n                    });\n                }\n                function startLipSyncAnimation() {\n                    if (!audioContextRef.current || !audioAnalyserRef.current) {\n                        console.log(\"No AudioContext available, using pattern-based animation\");\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                        return;\n                    }\n                    try {\n                        const audioElements = document.querySelectorAll(\"audio\");\n                        if (audioElements.length > 0) {\n                            if (audioSourceRef.current) {\n                                try {\n                                    audioSourceRef.current.disconnect();\n                                } catch (e) {\n                                    console.warn(\"Error disconnecting previous audio source:\", e);\n                                }\n                            }\n                            audioSourceRef.current = audioContextRef.current.createMediaElementSource(audioElements[0]);\n                            audioSourceRef.current.connect(audioAnalyserRef.current);\n                            audioAnalyserRef.current.connect(audioContextRef.current.destination);\n                            audioAnalyserRef.current.fftSize = 256;\n                            audioAnalyserRef.current.smoothingTimeConstant = 0.8;\n                            animateAudioBasedLipSync();\n                        } else {\n                            console.warn(\"No audio elements found for lip sync\");\n                            startPatternBasedAnimation(new Uint8Array(10000));\n                        }\n                    } catch (error) {\n                        console.error(\"Error setting up audio analysis:\", error);\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                    }\n                }\n                function animateAudioBasedLipSync() {\n                    if (!isAnimatingRef.current || !audioAnalyserRef.current) {\n                        resetMouthState();\n                        return;\n                    }\n                    try {\n                        const bufferLength = audioAnalyserRef.current.frequencyBinCount;\n                        const dataArray = new Uint8Array(bufferLength);\n                        audioAnalyserRef.current.getByteFrequencyData(dataArray);\n                        const sampleRate = audioContextRef.current.sampleRate || 44100;\n                        const binSize = sampleRate / (audioAnalyserRef.current.fftSize * 2);\n                        const lowBin = Math.floor(500 / binSize);\n                        const highBin = Math.floor(2000 / binSize);\n                        let sum = 0;\n                        let count = 0;\n                        for(let i = lowBin; i <= highBin && i < bufferLength; i++){\n                            sum += dataArray[i];\n                            count++;\n                        }\n                        const amplitude = count > 0 ? sum / count / 255 : 0;\n                        applyVisemesBasedOnOpenness(amplitude);\n                        animationFrameRef.current = requestAnimationFrame(animateAudioBasedLipSync);\n                    } catch (error) {\n                        console.error(\"Error in audio analysis:\", error);\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                    }\n                }\n                function applyVisemesBasedOnOpenness(openValue) {\n                    for(const key in mouthControls.current.visemes){\n                        mouthControls.current.visemes[key].weight = 0;\n                    }\n                    if (openValue < 0.1) {\n                        setVisemeWeight(\"viseme_sil\", 0.8);\n                        setVisemeWeight(\"viseme_PP\", 0.2);\n                    } else if (openValue < 0.3) {\n                        setVisemeWeight(\"viseme_PP\", 0.4);\n                        setVisemeWeight(\"viseme_FF\", 0.4);\n                        setVisemeWeight(\"viseme_TH\", 0.2);\n                    } else if (openValue < 0.5) {\n                        setVisemeWeight(\"viseme_DD\", 0.2);\n                        setVisemeWeight(\"viseme_kk\", 0.2);\n                        setVisemeWeight(\"viseme_CH\", 0.3);\n                        setVisemeWeight(\"viseme_E\", 0.4);\n                    } else if (openValue < 0.7) {\n                        setVisemeWeight(\"viseme_aa\", 0.5);\n                        setVisemeWeight(\"viseme_E\", 0.2);\n                    } else {\n                        setVisemeWeight(\"viseme_aa\", 0.6);\n                        setVisemeWeight(\"viseme_O\", 0.2);\n                    }\n                    for(const key in mouthControls.current.visemes){\n                        const viseme = mouthControls.current.visemes[key];\n                        if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                            const currentWeight = viseme.mesh.morphTargetInfluences[viseme.index] || 0;\n                            const targetWeight = viseme.weight || 0;\n                            const newWeight = currentWeight + (targetWeight - currentWeight) * 0.3;\n                            viseme.mesh.morphTargetInfluences[viseme.index] = newWeight;\n                        }\n                    }\n                    if (mouthControls.current.jawOpen) {\n                        const mesh = mouthControls.current.jawOpen.mesh;\n                        const index = mouthControls.current.jawOpen.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            const current = mesh.morphTargetInfluences[index] || 0;\n                            const target = openValue * 0.6;\n                            mesh.morphTargetInfluences[index] = current + (target - current) * 0.3;\n                        }\n                    }\n                    if (jawBoneRef.current) {\n                        const jawBone = jawBoneRef.current;\n                        const originalRotation = jawBone.originalRotation || {\n                            x: jawBone.rotation.x,\n                            y: jawBone.rotation.y,\n                            z: jawBone.rotation.z\n                        };\n                        if (!jawBone.originalRotation) {\n                            jawBone.originalRotation = originalRotation;\n                        }\n                        const current = {\n                            x: jawBone.rotation.x,\n                            y: jawBone.rotation.y,\n                            z: jawBone.rotation.z\n                        };\n                        const target = {\n                            x: originalRotation.x + openValue * 0.1,\n                            y: originalRotation.y,\n                            z: originalRotation.z\n                        };\n                        jawBone.rotation.x = current.x + (target.x - current.x) * 0.3;\n                        jawBone.rotation.y = current.y + (target.y - current.y) * 0.3;\n                        jawBone.rotation.z = current.z + (target.z - current.z) * 0.3;\n                    }\n                }\n                function setVisemeWeight(visemeName, weight) {\n                    if (mouthControls.current.visemes[visemeName]) {\n                        mouthControls.current.visemes[visemeName].weight = weight;\n                    }\n                }\n                function startRandomEyeBlink() {\n                    if (blinkIntervalRef.current) {\n                        clearInterval(blinkIntervalRef.current);\n                    }\n                    blinkIntervalRef.current = setInterval(()=>{\n                        if (!isAnimatingRef.current || Math.random() > 0.3) {\n                            modelRef.current.traverse((object)=>{\n                                if (object.morphTargetDictionary) {\n                                    if (object.morphTargetDictionary[\"eyeBlinkLeft\"] !== undefined) {\n                                        const index = object.morphTargetDictionary[\"eyeBlinkLeft\"];\n                                        object.morphTargetInfluences[index] = 1;\n                                        setTimeout(()=>{\n                                            object.morphTargetInfluences[index] = 0;\n                                        }, 150 + Math.random() * 100);\n                                    }\n                                    if (object.morphTargetDictionary[\"eyeBlinkRight\"] !== undefined) {\n                                        const index = object.morphTargetDictionary[\"eyeBlinkRight\"];\n                                        object.morphTargetInfluences[index] = 1;\n                                        setTimeout(()=>{\n                                            object.morphTargetInfluences[index] = 0;\n                                        }, 150 + Math.random() * 100);\n                                    }\n                                }\n                            });\n                        }\n                    }, 3000 + Math.random() * 4000);\n                }\n                function startVisemeBasedAnimation(visemes, duration) {\n                    console.log(`Starting viseme animation with ${visemes.length} visemes over ${duration}ms`);\n                    isAnimatingRef.current = true;\n                    const startTime = Date.now();\n                    function animateVisemes() {\n                        if (!isAnimatingRef.current) {\n                            resetMouthState();\n                            return;\n                        }\n                        const now = Date.now();\n                        const elapsed = now - startTime;\n                        const progress = Math.min(1, elapsed / duration);\n                        const visemeIndex = Math.min(Math.floor(progress * visemes.length), visemes.length - 1);\n                        const currentViseme = visemes[visemeIndex];\n                        for(const key in mouthControls.current.visemes){\n                            mouthControls.current.visemes[key].weight = 0;\n                        }\n                        if (currentViseme) {\n                            const visemeKey = `viseme_${currentViseme}`;\n                            if (mouthControls.current.visemes[visemeKey]) {\n                                mouthControls.current.visemes[visemeKey].weight = 0.7;\n                                if ([\n                                    \"aa\",\n                                    \"O\"\n                                ].includes(currentViseme)) {\n                                    if (mouthControls.current.jawOpen) {\n                                        const mesh = mouthControls.current.jawOpen.mesh;\n                                        const index = mouthControls.current.jawOpen.index;\n                                        if (mesh && mesh.morphTargetInfluences) {\n                                            mesh.morphTargetInfluences[index] = 0.5;\n                                        }\n                                    }\n                                } else if ([\n                                    \"E\",\n                                    \"I\"\n                                ].includes(currentViseme)) {\n                                    if (mouthControls.current.jawOpen) {\n                                        const mesh = mouthControls.current.jawOpen.mesh;\n                                        const index = mouthControls.current.jawOpen.index;\n                                        if (mesh && mesh.morphTargetInfluences) {\n                                            mesh.morphTargetInfluences[index] = 0.3;\n                                        }\n                                    }\n                                }\n                                if (Math.random() > 0.9) {}\n                            }\n                        }\n                        for(const key in mouthControls.current.visemes){\n                            const viseme = mouthControls.current.visemes[key];\n                            if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                                const currentWeight = viseme.mesh.morphTargetInfluences[viseme.index] || 0;\n                                const targetWeight = viseme.weight || 0;\n                                const newWeight = currentWeight + (targetWeight - currentWeight) * 0.3;\n                                viseme.mesh.morphTargetInfluences[viseme.index] = newWeight;\n                            }\n                        }\n                        if (progress < 1) {\n                            animationFrameRef.current = requestAnimationFrame(animateVisemes);\n                        } else {\n                            console.log(\"Viseme animation complete\");\n                            resetMouthState();\n                            isAnimatingRef.current = false;\n                        }\n                    }\n                    animateVisemes();\n                    if (animationTimeoutRef.current) {\n                        clearTimeout(animationTimeoutRef.current);\n                    }\n                    animationTimeoutRef.current = setTimeout(()=>{\n                        console.log(\"Viseme animation safety timeout reached\");\n                        resetMouthState();\n                        isAnimatingRef.current = false;\n                    }, duration + 500);\n                }\n            } catch (error) {\n                console.error(\"Error initializing TalkingHead:\", error);\n            }\n        };\n        init();\n        return ()=>{\n            if (renderer) {\n                renderer.dispose();\n                if (containerRef.current && containerRef.current.contains(renderer.domElement)) {\n                    containerRef.current.removeChild(renderer.domElement);\n                }\n            }\n            if (audioSourceRef.current) {\n                try {\n                    audioSourceRef.current.disconnect();\n                } catch (e) {\n                    console.warn(\"Error disconnecting audio source:\", e);\n                }\n            }\n            if (animationFrameRef.current) {\n                cancelAnimationFrame(animationFrameRef.current);\n            }\n            if (animationTimeoutRef.current) {\n                clearTimeout(animationTimeoutRef.current);\n            }\n            const audioElements = document.querySelectorAll(\"audio\");\n            audioElements.forEach((audio)=>{\n                audio.removeEventListener(\"play\", onAudioPlay);\n                audio.removeEventListener(\"pause\", onAudioPause);\n                audio.removeEventListener(\"ended\", onAudioEnded);\n            });\n            window.removeEventListener(\"resize\", handleResize);\n            window.speakWithAudio = null;\n            if (blinkIntervalRef.current) {\n                clearInterval(blinkIntervalRef.current);\n            }\n            if (randomMovementIntervalRef.current) {\n                clearInterval(randomMovementIntervalRef.current);\n            }\n            window.processVisemeData = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        style: {\n            width: \"80%\",\n            height: \"400px\",\n            margin: \"30px auto\",\n            borderRadius: \"12px\",\n            overflow: \"hidden\",\n            backgroundColor: \"#f5f5f5\"\n        }\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/TalkingHead.js\",\n        lineNumber: 709,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixHQUFHLEVBQUU7SUFFTCxxQkFDRSw4REFBQ3FGO1FBQ0NDLEtBQUsxTjtRQUNMMk4sT0FBTztZQUNMQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtZQUNSQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsaUJBQWlCO1FBQ25COzs7Ozs7QUFJTiIsInNvdXJjZXMiOlsid2VicGFjazovL2dlbWluaS12b2ljZS1mcm9udGVuZC8uL2NvbXBvbmVudHMvVGFsa2luZ0hlYWQuanM/NzEyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUYWxraW5nSGVhZCgpIHtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBtb2RlbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbWl4ZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGlzQW5pbWF0aW5nUmVmID0gdXNlUmVmKGZhbHNlKTtcbiAgY29uc3QgamF3Qm9uZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYXVkaW9Db250ZXh0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBhdWRpb0FuYWx5c2VyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBhdWRpb1NvdXJjZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYW5pbWF0aW9uRnJhbWVSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGFuaW1hdGlvblRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGJsaW5rSW50ZXJ2YWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHJhbmRvbU1vdmVtZW50SW50ZXJ2YWxSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IG1vdXRoQ29udHJvbHMgPSB1c2VSZWYoe1xuICAgIGphd09wZW46IG51bGwsXG4gICAgbW91dGhDbG9zZTogbnVsbCxcbiAgICB2aXNlbWVzOiB7fSwgXG4gICAgbGFzdFVwZGF0ZVRpbWU6IDAsXG4gICAgdGFyZ2V0VmFsdWU6IDAsXG4gICAgY3VycmVudFZhbHVlOiAwLFxuICB9KTtcbiAgY29uc3QgZmFjaWFsRXhwcmVzc2lvbnNSZWYgPSB1c2VSZWYoe1xuICAgIGV5ZUJsaW5rOiB7IGxlZnQ6IDAsIHJpZ2h0OiAwLCBuZXh0Qmxpbms6IDAgfSxcbiAgICBleWVNb3ZlbWVudDogeyB4OiAwLCB5OiAwLCBuZXh0TW92ZTogMCB9LFxuICAgIGJyb3dNb3ZlbWVudDogeyB2YWx1ZTogMCwgbmV4dE1vdmU6IDAgfSxcbiAgICBtb3V0aEV4cHJlc3Npb246IHsgdmFsdWU6IDAsIHR5cGU6ICduZXV0cmFsJywgbmV4dENoYW5nZTogMCB9LFxuICB9KTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBsZXQgc2NlbmUsIGNhbWVyYSwgcmVuZGVyZXIsIG1peGVyLCBjbG9jaztcbiAgICBcbiAgICBjb25zdCBpbml0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IFRIUkVFID0gYXdhaXQgaW1wb3J0KCd0aHJlZScpO1xuICAgICAgICBjb25zdCB7IEdMVEZMb2FkZXIgfSA9IGF3YWl0IGltcG9ydCgndGhyZWUvZXhhbXBsZXMvanNtL2xvYWRlcnMvR0xURkxvYWRlcicpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gICAgICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHhmNWY1ZjUpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50V2lkdGggLyBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRIZWlnaHQsIDAuMSwgMTAwMCk7XG4gICAgICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMS42LCAxLjgpO1xuICAgICAgICBjYW1lcmEubG9va0F0KDAsIDEuNCwgMCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSB9KTtcbiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRXaWR0aCwgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDEpO1xuICAgICAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMSk7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uc2V0KDAsIDEsIDEpO1xuICAgICAgICBzY2VuZS5hZGQoZGlyZWN0aW9uYWxMaWdodCk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSB7XG4gICAgICAgICAgICBhdWRpb0NvbnRleHRSZWYuY3VycmVudCA9IG5ldyAod2luZG93LkF1ZGlvQ29udGV4dCB8fCB3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0KSgpO1xuICAgICAgICAgICAgYXVkaW9BbmFseXNlclJlZi5jdXJyZW50ID0gYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgICAgICAgIGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudC5mZnRTaXplID0gMjU2OyBcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQXVkaW8gQ29udGV4dCBjb3VsZCBub3QgYmUgY3JlYXRlZDonLCBlcnIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvYWRpbmcgM0QgbW9kZWwgZnJvbSBwYXRoOicsICcvdGFsa2luZ2hlYWQvYXZhdGFycy9icnVuZXR0ZS5nbGInKTtcbiAgICAgICAgXG4gICAgICAgIGxvYWRlci5sb2FkKFxuICAgICAgICAgICcvdGFsa2luZ2hlYWQvYXZhdGFycy9icnVuZXR0ZS5nbGInLFxuICAgICAgICAgIChnbHRmKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gZ2x0Zi5zY2VuZTtcbiAgICAgICAgICAgIHNjZW5lLmFkZChtb2RlbCk7XG4gICAgICAgICAgICBtb2RlbFJlZi5jdXJyZW50ID0gbW9kZWw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0JvbmUgc3RydWN0dXJlOicpO1xuICAgICAgICAgICAgbW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgICBpZiAob2JqZWN0LmlzQm9uZSB8fCBvYmplY3QuaXNTa2lubmVkTWVzaCB8fCBvYmplY3QuaXNNZXNoKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIG9iamVjdDogJHtvYmplY3QubmFtZX0sIHR5cGU6ICR7b2JqZWN0LnR5cGV9YCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBtb3JwaCB0YXJnZXRzOicsIE9iamVjdC5rZXlzKG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnkpKTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zdCBtb3JwaERpY3QgPSBvYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5O1xuICAgICAgICAgICAgICAgICAgaWYgKG1vcnBoRGljdCkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgamF3T3Blbk5hbWVzID0gWydqYXdPcGVuJywgJ21vdXRoT3BlbicsICdKYXdPcGVuJywgJ01vdXRoT3BlbicsICdqYXdfb3BlbiddO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb3V0aENsb3NlTmFtZXMgPSBbJ21vdXRoQ2xvc2UnLCAnTW91dGhDbG9zZScsICdtb3V0aF9jbG9zZSddO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vcnBoRGljdCkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgndmlzZW1lXycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgdmlzZW1lIG1vcnBoOiAke2tleX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2g6IG9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG1vcnBoRGljdFtrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgamF3T3Blbk5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG1vcnBoRGljdFtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgamF3IG9wZW4gbW9ycGg6ICR7bmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNoOiBvYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBtb3JwaERpY3RbbmFtZV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBtb3V0aENsb3NlTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobW9ycGhEaWN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBtb3V0aCBjbG9zZSBtb3JwaDogJHtuYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW91dGhDb250cm9scy5jdXJyZW50Lm1vdXRoQ2xvc2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2g6IG9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG1vcnBoRGljdFtuYW1lXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IChvYmplY3QubmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIG5hbWUuaW5jbHVkZXMoJ2phdycpIHx8IFxuICAgICAgICAgICAgICAgIG5hbWUuaW5jbHVkZXMoJ21vdXRoJykgfHwgXG4gICAgICAgICAgICAgICAgbmFtZS5pbmNsdWRlcygnY2hpbicpIHx8XG4gICAgICAgICAgICAgICAgbmFtZS5pbmNsdWRlcygndGVldGgnKSB8fFxuICAgICAgICAgICAgICAgIG5hbWUuaW5jbHVkZXMoJ3Rvbmd1ZScpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBwb3RlbnRpYWwgamF3L21vdXRoIGJvbmU6Jywgb2JqZWN0Lm5hbWUpO1xuICAgICAgICAgICAgICAgIGphd0JvbmVSZWYuY3VycmVudCA9IG9iamVjdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGJveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBib3guZ2V0Q2VudGVyKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuICAgICAgICAgICAgbW9kZWwucG9zaXRpb24ueCA9IC1jZW50ZXIueDtcbiAgICAgICAgICAgIG1vZGVsLnBvc2l0aW9uLnkgPSAtY2VudGVyLnkgKyAwLjE7IFxuICAgICAgICAgICAgbW9kZWwucG9zaXRpb24ueiA9IC1jZW50ZXIuejtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9kZWwuc2NhbGUuc2V0KDEuNiwgMS42LCAxLjYpOyBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGdsdGYuYW5pbWF0aW9ucyAmJiBnbHRmLmFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBtaXhlciA9IG5ldyBUSFJFRS5BbmltYXRpb25NaXhlcihtb2RlbCk7XG4gICAgICAgICAgICAgIG1peGVyUmVmLmN1cnJlbnQgPSBtaXhlcjsgXG4gICAgICAgICAgICAgIGNvbnN0IGNsaXAgPSBnbHRmLmFuaW1hdGlvbnNbMF07XG4gICAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IG1peGVyLmNsaXBBY3Rpb24oY2xpcCk7XG4gICAgICAgICAgICAgIGFjdGlvbi5wbGF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7XG4gICAgICAgICAgICBhbmltYXRlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNldHVwQXVkaW9MaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgYXVkaW9FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgIGlmIChhdWRpb0VsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgYXVkaW8gZWxlbWVudHM6JywgYXVkaW9FbGVtZW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudHMuZm9yRWFjaChhdWRpbyA9PiB7XG4gICAgICAgICAgICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdwbGF5Jywgb25BdWRpb1BsYXkpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBvbkF1ZGlvUGF1c2UpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvbkF1ZGlvRW5kZWQpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdwbGF5Jywgb25BdWRpb1BsYXkpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBvbkF1ZGlvUGF1c2UpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvbkF1ZGlvRW5kZWQpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkZWQgZXZlbnQgbGlzdGVuZXJzIHRvIGF1ZGlvIGVsZW1lbnQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNldHVwQXVkaW9MaXN0ZW5lciwgMTAwMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNldHVwQXVkaW9MaXN0ZW5lcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cuc3BlYWtXaXRoQXVkaW8gPSAoYXVkaW9EYXRhKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTcGVha2luZyB3aXRoIGF1ZGlvIGRhdGEsIGxlbmd0aDonLCBhdWRpb0RhdGE/Lmxlbmd0aCB8fCAwKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHN0b3BBbGxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoIWF1ZGlvRGF0YSB8fCBhdWRpb0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpc0FuaW1hdGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uKGF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWREdXJhdGlvbiA9IChhdWRpb0RhdGEubGVuZ3RoIC8gNDQxMDApICogMTAwMDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VzdGltYXRlZCBhdWRpbyBkdXJhdGlvbjonLCBlc3RpbWF0ZWREdXJhdGlvbiwgJ21zJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbmltYXRpb24gdGltZW91dCByZWFjaGVkLCBzdG9wcGluZyBhbmltYXRpb24nKTtcbiAgICAgICAgICAgICAgICBzdG9wQWxsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICB9LCBlc3RpbWF0ZWREdXJhdGlvbiArIDUwMCk7IFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LnByb2Nlc3NWaXNlbWVEYXRhID0gKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgdmlzZW1lIGRhdGE6JywgZGF0YSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBzdG9wQWxsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8ICFkYXRhLnZpc2VtZXMgfHwgZGF0YS52aXNlbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJlc2V0TW91dGhTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgc3RhcnRWaXNlbWVCYXNlZEFuaW1hdGlvbihkYXRhLnZpc2VtZXMsIGRhdGEuZHVyYXRpb24gfHwgMzAwMCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzdGFydFJhbmRvbUV5ZUJsaW5rKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSAocHJvZ3Jlc3MubG9hZGVkIC8gcHJvZ3Jlc3MudG90YWwpICogMTAwO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYExvYWRpbmcgbW9kZWw6ICR7cGVyY2VudC50b0ZpeGVkKDIpfSVgKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtb2RlbDonLCBlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG1peGVyKSB7XG4gICAgICAgICAgICBtaXhlci51cGRhdGUoY2xvY2suZ2V0RGVsdGEoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgICBcbiAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50V2lkdGggLyBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgICByZW5kZXJlci5zZXRTaXplKGNvbnRhaW5lclJlZi5jdXJyZW50LmNsaWVudFdpZHRoLCBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvUGxheShlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0F1ZGlvIHBsYXliYWNrIHN0YXJ0ZWQnKTtcbiAgICAgICAgICBpZiAoIWlzQW5pbWF0aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRMaXBTeW5jQW5pbWF0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvUGF1c2UoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBwbGF5YmFjayBwYXVzZWQnKTtcbiAgICAgICAgICBzdG9wQWxsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvRW5kZWQoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBwbGF5YmFjayBlbmRlZCcpO1xuICAgICAgICAgIHN0b3BBbGxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BBbGxBbmltYXRpb25zKCkge1xuICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBhbmltYXRpb25UaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXNldE1vdXRoU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRNb3V0aFN0YXRlKCkge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzKSB7XG4gICAgICAgICAgICBjb25zdCB2aXNlbWUgPSBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1trZXldO1xuICAgICAgICAgICAgaWYgKHZpc2VtZS5tZXNoICYmIHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdmlzZW1lLmluZGV4XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQuamF3T3Blbikge1xuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLm1lc2g7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLmluZGV4O1xuICAgICAgICAgICAgaWYgKG1lc2ggJiYgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC5tb3V0aENsb3NlKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gbW91dGhDb250cm9scy5jdXJyZW50Lm1vdXRoQ2xvc2UubWVzaDtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW91dGhDb250cm9scy5jdXJyZW50Lm1vdXRoQ2xvc2UuaW5kZXg7XG4gICAgICAgICAgICBpZiAobWVzaCAmJiBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoamF3Qm9uZVJlZi5jdXJyZW50ICYmIGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uKSB7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueCA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLng7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueSA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLnk7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueiA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLno7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzdGFydFBhdHRlcm5CYXNlZEFuaW1hdGlvbihhdWRpb0RhdGEpIHtcbiAgICAgICAgICBjb25zdCBwYXR0ZXJuQ29uZmlnID0ge1xuICAgICAgICAgICAgc3RhcnRUaW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgd29yZER1cmF0aW9uOiAzMDAsIFxuICAgICAgICAgICAgcGF1c2VEdXJhdGlvbjogMTAwLCBcbiAgICAgICAgICAgIHN5bGxhYmxlQ291bnQ6IE1hdGguY2VpbChhdWRpb0RhdGEubGVuZ3RoIC8gODAwMCksIFxuICAgICAgICAgICAgY3VycmVudFN5bGxhYmxlOiAwXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgcGF0dGVybi1iYXNlZCBhbmltYXRpb24gd2l0aCBlc3RpbWF0ZWQgc3lsbGFibGVzOicsIHBhdHRlcm5Db25maWcuc3lsbGFibGVDb3VudCk7XG4gICAgICAgICAgXG4gICAgICAgICAgYW5pbWF0ZVBhdHRlcm5CYXNlZExpcFN5bmMocGF0dGVybkNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGFuaW1hdGVQYXR0ZXJuQmFzZWRMaXBTeW5jKHBhdHRlcm4pIHtcbiAgICAgICAgICBpZiAoIWlzQW5pbWF0aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJlc2V0TW91dGhTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBwYXR0ZXJuLnN0YXJ0VGltZTtcbiAgICAgICAgICBjb25zdCBzeWxsYWJsZUR1cmF0aW9uID0gcGF0dGVybi53b3JkRHVyYXRpb24gLyAyO1xuICAgICAgICAgIGNvbnN0IGN5Y2xlRHVyYXRpb24gPSBzeWxsYWJsZUR1cmF0aW9uICsgcGF0dGVybi5wYXVzZUR1cmF0aW9uO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGN5Y2xlUG9zaXRpb24gPSAoZWxhcHNlZCAlIGN5Y2xlRHVyYXRpb24pIC8gc3lsbGFibGVEdXJhdGlvbjtcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgb3BlblZhbHVlO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjeWNsZVBvc2l0aW9uIDwgMSkge1xuICAgICAgICAgICAgb3BlblZhbHVlID0gTWF0aC5zaW4oY3ljbGVQb3NpdGlvbiAqIE1hdGguUEkpICogMC41OyBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BlblZhbHVlID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgdmFyaWF0aW9uID0gTWF0aC5yYW5kb20oKSAqIDAuMTtcbiAgICAgICAgICBvcGVuVmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBvcGVuVmFsdWUgKyB2YXJpYXRpb24pKTtcbiAgICAgICAgICBcbiAgICAgICAgICBhcHBseVZpc2VtZXNCYXNlZE9uT3Blbm5lc3Mob3BlblZhbHVlKTtcbiAgICAgICAgICBcbiAgICAgICAgICBhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGFuaW1hdGVQYXR0ZXJuQmFzZWRMaXBTeW5jKHBhdHRlcm4pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzdGFydExpcFN5bmNBbmltYXRpb24oKSB7XG4gICAgICAgICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCB8fCAhYXVkaW9BbmFseXNlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gQXVkaW9Db250ZXh0IGF2YWlsYWJsZSwgdXNpbmcgcGF0dGVybi1iYXNlZCBhbmltYXRpb24nKTtcbiAgICAgICAgICAgIHN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uKG5ldyBVaW50OEFycmF5KDEwMDAwKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYXVkaW8nKTtcbiAgICAgICAgICAgIGlmIChhdWRpb0VsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgaWYgKGF1ZGlvU291cmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgYXVkaW9Tb3VyY2VSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBkaXNjb25uZWN0aW5nIHByZXZpb3VzIGF1ZGlvIHNvdXJjZTonLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGF1ZGlvU291cmNlUmVmLmN1cnJlbnQgPSBhdWRpb0NvbnRleHRSZWYuY3VycmVudC5jcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2UoYXVkaW9FbGVtZW50c1swXSk7XG4gICAgICAgICAgICAgIGF1ZGlvU291cmNlUmVmLmN1cnJlbnQuY29ubmVjdChhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuY29ubmVjdChhdWRpb0NvbnRleHRSZWYuY3VycmVudC5kZXN0aW5hdGlvbik7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZSA9IDI1NjtcbiAgICAgICAgICAgICAgYXVkaW9BbmFseXNlclJlZi5jdXJyZW50LnNtb290aGluZ1RpbWVDb25zdGFudCA9IDAuODtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdObyBhdWRpbyBlbGVtZW50cyBmb3VuZCBmb3IgbGlwIHN5bmMnKTtcbiAgICAgICAgICAgICAgc3RhcnRQYXR0ZXJuQmFzZWRBbmltYXRpb24obmV3IFVpbnQ4QXJyYXkoMTAwMDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBhdWRpbyBhbmFseXNpczonLCBlcnJvcik7XG4gICAgICAgICAgICBzdGFydFBhdHRlcm5CYXNlZEFuaW1hdGlvbihuZXcgVWludDhBcnJheSgxMDAwMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZUF1ZGlvQmFzZWRMaXBTeW5jKCkge1xuICAgICAgICAgIGlmICghaXNBbmltYXRpbmdSZWYuY3VycmVudCB8fCAhYXVkaW9BbmFseXNlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICByZXNldE1vdXRoU3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudC5mcmVxdWVuY3lCaW5Db3VudDtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlckxlbmd0aCk7XG4gICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LnNhbXBsZVJhdGUgfHwgNDQxMDA7XG4gICAgICAgICAgICBjb25zdCBiaW5TaXplID0gc2FtcGxlUmF0ZSAvIChhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZSAqIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBsb3dCaW4gPSBNYXRoLmZsb29yKDUwMCAvIGJpblNpemUpO1xuICAgICAgICAgICAgY29uc3QgaGlnaEJpbiA9IE1hdGguZmxvb3IoMjAwMCAvIGJpblNpemUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsb3dCaW47IGkgPD0gaGlnaEJpbiAmJiBpIDwgYnVmZmVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgc3VtICs9IGRhdGFBcnJheVtpXTtcbiAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYW1wbGl0dWRlID0gY291bnQgPiAwID8gKHN1bSAvIGNvdW50KSAvIDI1NSA6IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFwcGx5VmlzZW1lc0Jhc2VkT25PcGVubmVzcyhhbXBsaXR1ZGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGF1ZGlvIGFuYWx5c2lzOicsIGVycm9yKTtcbiAgICAgICAgICAgIHN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uKG5ldyBVaW50OEFycmF5KDEwMDAwKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBhcHBseVZpc2VtZXNCYXNlZE9uT3Blbm5lc3Mob3BlblZhbHVlKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXMpIHtcbiAgICAgICAgICAgIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW2tleV0ud2VpZ2h0ID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG9wZW5WYWx1ZSA8IDAuMSkge1xuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfc2lsJywgMC44KTsgXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9QUCcsIDAuMik7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcGVuVmFsdWUgPCAwLjMpIHtcbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX1BQJywgMC40KTsgXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9GRicsIDAuNCk7IFxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfVEgnLCAwLjIpOyBcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wZW5WYWx1ZSA8IDAuNSkge1xuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfREQnLCAwLjIpOyBcbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX2trJywgMC4yKTsgXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9DSCcsIDAuMyk7IFxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfRScsIDAuNCk7IFxuICAgICAgICAgIH0gZWxzZSBpZiAob3BlblZhbHVlIDwgMC43KSB7XG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9hYScsIDAuNSk7IFxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfRScsIDAuMik7IFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9hYScsIDAuNik7IFxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfTycsIDAuMik7IFxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lcykge1xuICAgICAgICAgICAgY29uc3QgdmlzZW1lID0gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNba2V5XTtcbiAgICAgICAgICAgIGlmICh2aXNlbWUubWVzaCAmJiB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFdlaWdodCA9IHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t2aXNlbWUuaW5kZXhdIHx8IDA7XG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdlaWdodCA9IHZpc2VtZS53ZWlnaHQgfHwgMDtcbiAgICAgICAgICAgICAgY29uc3QgbmV3V2VpZ2h0ID0gY3VycmVudFdlaWdodCArICh0YXJnZXRXZWlnaHQgLSBjdXJyZW50V2VpZ2h0KSAqIDAuMztcbiAgICAgICAgICAgICAgdmlzZW1lLm1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3Zpc2VtZS5pbmRleF0gPSBuZXdXZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQuamF3T3Blbikge1xuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLm1lc2g7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLmluZGV4O1xuICAgICAgICAgICAgaWYgKG1lc2ggJiYgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IG1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2luZGV4XSB8fCAwO1xuICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBvcGVuVmFsdWUgKiAwLjY7IFxuICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSBjdXJyZW50ICsgKHRhcmdldCAtIGN1cnJlbnQpICogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoamF3Qm9uZVJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBqYXdCb25lID0gamF3Qm9uZVJlZi5jdXJyZW50O1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxSb3RhdGlvbiA9IGphd0JvbmUub3JpZ2luYWxSb3RhdGlvbiB8fCB7IFxuICAgICAgICAgICAgICB4OiBqYXdCb25lLnJvdGF0aW9uLngsIFxuICAgICAgICAgICAgICB5OiBqYXdCb25lLnJvdGF0aW9uLnksIFxuICAgICAgICAgICAgICB6OiBqYXdCb25lLnJvdGF0aW9uLnogXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWphd0JvbmUub3JpZ2luYWxSb3RhdGlvbikge1xuICAgICAgICAgICAgICBqYXdCb25lLm9yaWdpbmFsUm90YXRpb24gPSBvcmlnaW5hbFJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0ge1xuICAgICAgICAgICAgICB4OiBqYXdCb25lLnJvdGF0aW9uLngsXG4gICAgICAgICAgICAgIHk6IGphd0JvbmUucm90YXRpb24ueSxcbiAgICAgICAgICAgICAgejogamF3Qm9uZS5yb3RhdGlvbi56XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB7XG4gICAgICAgICAgICAgIHg6IG9yaWdpbmFsUm90YXRpb24ueCArIG9wZW5WYWx1ZSAqIDAuMSwgXG4gICAgICAgICAgICAgIHk6IG9yaWdpbmFsUm90YXRpb24ueSxcbiAgICAgICAgICAgICAgejogb3JpZ2luYWxSb3RhdGlvbi56XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBqYXdCb25lLnJvdGF0aW9uLnggPSBjdXJyZW50LnggKyAodGFyZ2V0LnggLSBjdXJyZW50LngpICogMC4zO1xuICAgICAgICAgICAgamF3Qm9uZS5yb3RhdGlvbi55ID0gY3VycmVudC55ICsgKHRhcmdldC55IC0gY3VycmVudC55KSAqIDAuMztcbiAgICAgICAgICAgIGphd0JvbmUucm90YXRpb24ueiA9IGN1cnJlbnQueiArICh0YXJnZXQueiAtIGN1cnJlbnQueikgKiAwLjM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzZXRWaXNlbWVXZWlnaHQodmlzZW1lTmFtZSwgd2VpZ2h0KSB7XG4gICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW3Zpc2VtZU5hbWVdKSB7XG4gICAgICAgICAgICBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1t2aXNlbWVOYW1lXS53ZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzdGFydFJhbmRvbUV5ZUJsaW5rKCkge1xuICAgICAgICAgIGlmIChibGlua0ludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoYmxpbmtJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgYmxpbmtJbnRlcnZhbFJlZi5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpc0FuaW1hdGluZ1JlZi5jdXJyZW50IHx8IE1hdGgucmFuZG9tKCkgPiAwLjMpIHtcbiAgICAgICAgICAgICAgbW9kZWxSZWYuY3VycmVudC50cmF2ZXJzZSgob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5WydleWVCbGlua0xlZnQnXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gb2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVsnZXllQmxpbmtMZWZ0J107XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTUwICsgTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIGlmIChvYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5WydleWVCbGlua1JpZ2h0J10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnlbJ2V5ZUJsaW5rUmlnaHQnXTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgb2JqZWN0Lm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSAwO1xuICAgICAgICAgICAgICAgICAgICB9LCAxNTAgKyBNYXRoLnJhbmRvbSgpICogMTAwKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDMwMDAgKyBNYXRoLnJhbmRvbSgpICogNDAwMCk7IFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzdGFydFZpc2VtZUJhc2VkQW5pbWF0aW9uKHZpc2VtZXMsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIHZpc2VtZSBhbmltYXRpb24gd2l0aCAke3Zpc2VtZXMubGVuZ3RofSB2aXNlbWVzIG92ZXIgJHtkdXJhdGlvbn1tc2ApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZVZpc2VtZXMoKSB7XG4gICAgICAgICAgICBpZiAoIWlzQW5pbWF0aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBzdGFydFRpbWU7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKDEsIGVsYXBzZWQgLyBkdXJhdGlvbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHZpc2VtZUluZGV4ID0gTWF0aC5taW4oTWF0aC5mbG9vcihwcm9ncmVzcyAqIHZpc2VtZXMubGVuZ3RoKSwgdmlzZW1lcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWaXNlbWUgPSB2aXNlbWVzW3Zpc2VtZUluZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXMpIHtcbiAgICAgICAgICAgICAgbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNba2V5XS53ZWlnaHQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY3VycmVudFZpc2VtZSkge1xuICAgICAgICAgICAgICBjb25zdCB2aXNlbWVLZXkgPSBgdmlzZW1lXyR7Y3VycmVudFZpc2VtZX1gO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW3Zpc2VtZUtleV0pIHtcbiAgICAgICAgICAgICAgICBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1t2aXNlbWVLZXldLndlaWdodCA9IDAuNzsgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKFsnYWEnLCAnTyddLmluY2x1ZGVzKGN1cnJlbnRWaXNlbWUpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLm1lc2g7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4uaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNoICYmIG1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMC41OyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWydFJywgJ0knXS5pbmNsdWRlcyhjdXJyZW50VmlzZW1lKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBtb3V0aENvbnRyb2xzLmN1cnJlbnQuamF3T3Blbi5tZXNoO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzaCAmJiBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgIG1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2luZGV4XSA9IDAuMzsgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjkpIHtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHZpc2VtZSA9IG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW2tleV07XG4gICAgICAgICAgICAgIGlmICh2aXNlbWUubWVzaCAmJiB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50V2VpZ2h0ID0gdmlzZW1lLm1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3Zpc2VtZS5pbmRleF0gfHwgMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRXZWlnaHQgPSB2aXNlbWUud2VpZ2h0IHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3V2VpZ2h0ID0gY3VycmVudFdlaWdodCArICh0YXJnZXRXZWlnaHQgLSBjdXJyZW50V2VpZ2h0KSAqIDAuMztcbiAgICAgICAgICAgICAgICB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdmlzZW1lLmluZGV4XSA9IG5ld1dlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPCAxKSB7XG4gICAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lUmVmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZVZpc2VtZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Zpc2VtZSBhbmltYXRpb24gY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgXG4gICAgICAgICAgYW5pbWF0ZVZpc2VtZXMoKTtcbiAgICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmlzZW1lIGFuaW1hdGlvbiBzYWZldHkgdGltZW91dCByZWFjaGVkJyk7XG4gICAgICAgICAgICByZXNldE1vdXRoU3RhdGUoKTtcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICB9LCBkdXJhdGlvbiArIDUwMCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBUYWxraW5nSGVhZDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBpbml0KCk7XG4gICAgXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5kaXNwb3NlKCk7XG4gICAgICAgIGlmIChjb250YWluZXJSZWYuY3VycmVudCAmJiBjb250YWluZXJSZWYuY3VycmVudC5jb250YWlucyhyZW5kZXJlci5kb21FbGVtZW50KSkge1xuICAgICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50LnJlbW92ZUNoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIFxuICAgICAgaWYgKGF1ZGlvU291cmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhdWRpb1NvdXJjZVJlZi5jdXJyZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGlzY29ubmVjdGluZyBhdWRpbyBzb3VyY2U6JywgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGFuaW1hdGlvbkZyYW1lUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChhbmltYXRpb25UaW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIFxuICAgICAgY29uc3QgYXVkaW9FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2F1ZGlvJyk7XG4gICAgICBhdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdwbGF5Jywgb25BdWRpb1BsYXkpO1xuICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXVzZScsIG9uQXVkaW9QYXVzZSk7XG4gICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2VuZGVkJywgb25BdWRpb0VuZGVkKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTtcbiAgICAgIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9IG51bGw7XG4gICAgICBcbiAgICAgIFxuICAgICAgaWYgKGJsaW5rSW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKGJsaW5rSW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyYW5kb21Nb3ZlbWVudEludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChyYW5kb21Nb3ZlbWVudEludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICB3aW5kb3cucHJvY2Vzc1Zpc2VtZURhdGEgPSBudWxsO1xuICAgIH07XG4gIH0sIFtdKTtcbiAgXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfSBcbiAgICAgIHN0eWxlPXt7IFxuICAgICAgICB3aWR0aDogJzgwJScsXG4gICAgICAgIGhlaWdodDogJzQwMHB4JyxcbiAgICAgICAgbWFyZ2luOiAnMzBweCBhdXRvJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTJweCcsXG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2Y1ZjVmNSdcbiAgICAgIH19XG4gICAgLz5cbiAgKTtcbiAgICAgICAgXG59ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJUYWxraW5nSGVhZCIsImNvbnRhaW5lclJlZiIsIm1vZGVsUmVmIiwibWl4ZXJSZWYiLCJpc0FuaW1hdGluZ1JlZiIsImphd0JvbmVSZWYiLCJhdWRpb0NvbnRleHRSZWYiLCJhdWRpb0FuYWx5c2VyUmVmIiwiYXVkaW9Tb3VyY2VSZWYiLCJhbmltYXRpb25GcmFtZVJlZiIsImFuaW1hdGlvblRpbWVvdXRSZWYiLCJibGlua0ludGVydmFsUmVmIiwicmFuZG9tTW92ZW1lbnRJbnRlcnZhbFJlZiIsIm1vdXRoQ29udHJvbHMiLCJqYXdPcGVuIiwibW91dGhDbG9zZSIsInZpc2VtZXMiLCJsYXN0VXBkYXRlVGltZSIsInRhcmdldFZhbHVlIiwiY3VycmVudFZhbHVlIiwiZmFjaWFsRXhwcmVzc2lvbnNSZWYiLCJleWVCbGluayIsImxlZnQiLCJyaWdodCIsIm5leHRCbGluayIsImV5ZU1vdmVtZW50IiwieCIsInkiLCJuZXh0TW92ZSIsImJyb3dNb3ZlbWVudCIsInZhbHVlIiwibW91dGhFeHByZXNzaW9uIiwidHlwZSIsIm5leHRDaGFuZ2UiLCJjdXJyZW50Iiwic2NlbmUiLCJjYW1lcmEiLCJyZW5kZXJlciIsIm1peGVyIiwiY2xvY2siLCJpbml0IiwiVEhSRUUiLCJHTFRGTG9hZGVyIiwiU2NlbmUiLCJiYWNrZ3JvdW5kIiwiQ29sb3IiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicG9zaXRpb24iLCJzZXQiLCJsb29rQXQiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwiYWRkIiwiZGlyZWN0aW9uYWxMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJjcmVhdGVBbmFseXNlciIsImZmdFNpemUiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsImxvYWRlciIsImxvZyIsImxvYWQiLCJnbHRmIiwibW9kZWwiLCJ0cmF2ZXJzZSIsIm9iamVjdCIsImlzQm9uZSIsImlzU2tpbm5lZE1lc2giLCJpc01lc2giLCJuYW1lIiwibW9ycGhUYXJnZXREaWN0aW9uYXJ5IiwiT2JqZWN0Iiwia2V5cyIsIm1vcnBoRGljdCIsImphd09wZW5OYW1lcyIsIm1vdXRoQ2xvc2VOYW1lcyIsImtleSIsInN0YXJ0c1dpdGgiLCJtZXNoIiwiaW5kZXgiLCJ3ZWlnaHQiLCJ1bmRlZmluZWQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYm94IiwiQm94MyIsInNldEZyb21PYmplY3QiLCJjZW50ZXIiLCJnZXRDZW50ZXIiLCJWZWN0b3IzIiwieiIsInNjYWxlIiwiYW5pbWF0aW9ucyIsImxlbmd0aCIsIkFuaW1hdGlvbk1peGVyIiwiY2xpcCIsImFjdGlvbiIsImNsaXBBY3Rpb24iLCJwbGF5IiwiQ2xvY2siLCJhbmltYXRlIiwic2V0dXBBdWRpb0xpc3RlbmVyIiwiYXVkaW9FbGVtZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhdWRpbyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkF1ZGlvUGxheSIsIm9uQXVkaW9QYXVzZSIsIm9uQXVkaW9FbmRlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic3BlYWtXaXRoQXVkaW8iLCJhdWRpb0RhdGEiLCJzdG9wQWxsQW5pbWF0aW9ucyIsInJlc2V0TW91dGhTdGF0ZSIsInN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uIiwiZXN0aW1hdGVkRHVyYXRpb24iLCJjbGVhclRpbWVvdXQiLCJwcm9jZXNzVmlzZW1lRGF0YSIsImRhdGEiLCJzdGFydFZpc2VtZUJhc2VkQW5pbWF0aW9uIiwiZHVyYXRpb24iLCJzdGFydFJhbmRvbUV5ZUJsaW5rIiwicHJvZ3Jlc3MiLCJwZXJjZW50IiwibG9hZGVkIiwidG90YWwiLCJ0b0ZpeGVkIiwiZXJyb3IiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ1cGRhdGUiLCJnZXREZWx0YSIsInJlbmRlciIsImhhbmRsZVJlc2l6ZSIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJlIiwic3RhcnRMaXBTeW5jQW5pbWF0aW9uIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ2aXNlbWUiLCJtb3JwaFRhcmdldEluZmx1ZW5jZXMiLCJvcmlnaW5hbFJvdGF0aW9uIiwicm90YXRpb24iLCJwYXR0ZXJuQ29uZmlnIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIndvcmREdXJhdGlvbiIsInBhdXNlRHVyYXRpb24iLCJzeWxsYWJsZUNvdW50IiwiTWF0aCIsImNlaWwiLCJjdXJyZW50U3lsbGFibGUiLCJhbmltYXRlUGF0dGVybkJhc2VkTGlwU3luYyIsInBhdHRlcm4iLCJlbGFwc2VkIiwic3lsbGFibGVEdXJhdGlvbiIsImN5Y2xlRHVyYXRpb24iLCJjeWNsZVBvc2l0aW9uIiwib3BlblZhbHVlIiwic2luIiwiUEkiLCJ2YXJpYXRpb24iLCJyYW5kb20iLCJtYXgiLCJtaW4iLCJhcHBseVZpc2VtZXNCYXNlZE9uT3Blbm5lc3MiLCJVaW50OEFycmF5IiwiZGlzY29ubmVjdCIsImNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZSIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInNtb290aGluZ1RpbWVDb25zdGFudCIsImFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYyIsImJ1ZmZlckxlbmd0aCIsImZyZXF1ZW5jeUJpbkNvdW50IiwiZGF0YUFycmF5IiwiZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEiLCJzYW1wbGVSYXRlIiwiYmluU2l6ZSIsImxvd0JpbiIsImZsb29yIiwiaGlnaEJpbiIsInN1bSIsImNvdW50IiwiaSIsImFtcGxpdHVkZSIsInNldFZpc2VtZVdlaWdodCIsImN1cnJlbnRXZWlnaHQiLCJ0YXJnZXRXZWlnaHQiLCJuZXdXZWlnaHQiLCJ0YXJnZXQiLCJqYXdCb25lIiwidmlzZW1lTmFtZSIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImFuaW1hdGVWaXNlbWVzIiwidmlzZW1lSW5kZXgiLCJjdXJyZW50VmlzZW1lIiwidmlzZW1lS2V5IiwiZGlzcG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlQ2hpbGQiLCJkaXYiLCJyZWYiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luIiwiYm9yZGVyUmFkaXVzIiwib3ZlcmZsb3ciLCJiYWNrZ3JvdW5kQ29sb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/TalkingHead.js\n");

/***/ }),

/***/ "./components/VoiceChat.js":
/*!*********************************!*\
  !*** ./components/VoiceChat.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   audioEvents: () => (/* binding */ audioEvents),\n/* harmony export */   \"default\": () => (/* binding */ VoiceChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"styled-jsx/style\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Simple event bus for audio playback status communication\nconst audioEvents = {\n    listeners: {},\n    subscribe: (event, callback)=>{\n        if (!audioEvents.listeners[event]) {\n            audioEvents.listeners[event] = [];\n        }\n        audioEvents.listeners[event].push(callback);\n        return ()=>{\n            audioEvents.listeners[event] = audioEvents.listeners[event].filter((cb)=>cb !== callback);\n        };\n    },\n    publish: (event, data)=>{\n        if (audioEvents.listeners[event]) {\n            audioEvents.listeners[event].forEach((callback)=>callback(data));\n        }\n    }\n};\nfunction VoiceChat({ socket, socketStatus, systemInstructions, apiKey, onNewMessage }) {\n    // UI States\n    const [micActive, setMicActive] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [listening, setListening] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [recording, setRecording] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [processing, setProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [responseReceived, setResponseReceived] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [audioPlaying, setAudioPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    // Technical refs\n    const recognitionRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const mediaRecorderRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const audioChunksRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)([]);\n    const streamRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const timeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    // Listen for audio playback events\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const unsubscribeStart = audioEvents.subscribe(\"audio-play-start\", ()=>{\n            console.log(\"[VoiceChat] Detected audio playback start\");\n            setAudioPlaying(true);\n            // Stop recognition while audio is playing to prevent it from picking up the response\n            if (recognitionRef.current) {\n                try {\n                    recognitionRef.current.abort();\n                    recognitionRef.current = null;\n                } catch (e) {\n                    console.error(\"[VoiceChat] Error stopping recognition during audio playback:\", e);\n                }\n            }\n        });\n        const unsubscribeEnd = audioEvents.subscribe(\"audio-play-end\", ()=>{\n            console.log(\"[VoiceChat] Detected audio playback end\");\n            setAudioPlaying(false);\n            // Restart recognition after a short delay when audio ends\n            if (micActive && !processing) {\n                timeoutRef.current = setTimeout(()=>{\n                    if (micActive && !processing) {\n                        startSpeechRecognition();\n                    }\n                }, 500);\n            }\n        });\n        return ()=>{\n            unsubscribeStart();\n            unsubscribeEnd();\n        };\n    }, [\n        micActive,\n        processing\n    ]);\n    // Clean up resources when component unmounts\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        return ()=>{\n            cleanupResources();\n        };\n    }, []);\n    // Force restart recognition when response is received\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (responseReceived && micActive && !processing && !audioPlaying) {\n            console.log(\"[VoiceChat] Response received, restarting recognition\");\n            setResponseReceived(false);\n            // Allow a brief pause before restarting\n            timeoutRef.current = setTimeout(()=>{\n                if (micActive && !processing && !audioPlaying) {\n                    startSpeechRecognition();\n                }\n            }, 500);\n        }\n    }, [\n        responseReceived,\n        micActive,\n        processing,\n        audioPlaying\n    ]);\n    /**\n   * Full cleanup of all resources\n   */ const cleanupResources = ()=>{\n        // Clear any pending timeouts\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n        }\n        // Stop speech recognition\n        if (recognitionRef.current) {\n            try {\n                recognitionRef.current.abort();\n                recognitionRef.current = null;\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping recognition during cleanup:\", e);\n            }\n        }\n        // Stop media stream\n        if (streamRef.current) {\n            try {\n                streamRef.current.getTracks().forEach((track)=>track.stop());\n                streamRef.current = null;\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping stream during cleanup:\", e);\n            }\n        }\n        // Reset recorder\n        mediaRecorderRef.current = null;\n        audioChunksRef.current = [];\n    };\n    /**\n   * Toggle microphone on/off\n   */ const toggleMicrophone = ()=>{\n        if (micActive) {\n            stopMicrophone();\n        } else {\n            startMicrophone();\n        }\n    };\n    /**\n   * Start microphone and begin listening\n   */ const startMicrophone = ()=>{\n        if (socketStatus !== \"connected\") {\n            console.error(\"[VoiceChat] Cannot start mic - socket not connected\");\n            return;\n        }\n        console.log(\"[VoiceChat] Starting microphone\");\n        setMicActive(true);\n        // Small delay to ensure UI updates before starting recognition\n        setTimeout(()=>{\n            startSpeechRecognition();\n        }, 100);\n    };\n    /**\n   * Stop microphone and all associated processes\n   */ const stopMicrophone = ()=>{\n        console.log(\"[VoiceChat] Stopping microphone\");\n        setMicActive(false);\n        cleanupResources();\n        setListening(false);\n        setRecording(false);\n    };\n    /**\n   * Initialize and start the speech recognition\n   */ const startSpeechRecognition = ()=>{\n        // Don't start recognition if audio is playing\n        if (audioPlaying) {\n            console.log(\"[VoiceChat] Not starting recognition while audio is playing\");\n            return;\n        }\n        console.log(\"[VoiceChat] Starting speech recognition\");\n        // Clear any existing timeouts\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n        }\n        // Clean up any existing recognition\n        if (recognitionRef.current) {\n            try {\n                recognitionRef.current.abort();\n            } catch (e) {\n                console.error(\"[VoiceChat] Error aborting existing recognition:\", e);\n            }\n            recognitionRef.current = null;\n        }\n        const SpeechRecognition =  false && (0);\n        if (!SpeechRecognition) {\n            alert(\"Speech recognition is not supported in your browser.\");\n            setMicActive(false);\n            return;\n        }\n        try {\n            // Create a new recognition instance for each session\n            const recognition = new SpeechRecognition();\n            recognition.continuous = false;\n            recognition.interimResults = true;\n            recognition.lang = \"en-US\";\n            recognition.maxAlternatives = 1;\n            // Speech recognition started\n            recognition.onstart = ()=>{\n                console.log(\"[VoiceChat] Speech recognition started\");\n                setListening(true);\n                startAudioRecording();\n            };\n            // Handle speech recognition errors\n            recognition.onerror = (event)=>{\n                console.error(`[VoiceChat] Speech recognition error: ${event.error}`);\n                // No speech error is common and not fatal\n                if (event.error === \"no-speech\") {\n                    setListening(false);\n                    // If mic is still active, restart after a short delay\n                    if (micActive && !processing) {\n                        timeoutRef.current = setTimeout(()=>{\n                            if (micActive && !processing) {\n                                startSpeechRecognition();\n                            }\n                        }, 300);\n                    }\n                    return;\n                }\n                // Handle other errors\n                setListening(false);\n                // If not manually aborted and mic is still active, try to restart\n                if (event.error !== \"aborted\" && micActive && !processing) {\n                    timeoutRef.current = setTimeout(()=>{\n                        if (micActive && !processing) {\n                            startSpeechRecognition();\n                        }\n                    }, 500);\n                }\n            };\n            // Handle speech recognition ending\n            recognition.onend = ()=>{\n                console.log(\"[VoiceChat] Speech recognition ended normally\");\n                setListening(false);\n                // If mic should still be active and we're not processing, restart\n                if (micActive && !processing && !responseReceived) {\n                    timeoutRef.current = setTimeout(()=>{\n                        if (micActive && !processing) {\n                            startSpeechRecognition();\n                        }\n                    }, 300);\n                }\n            };\n            // Handle speech recognition results\n            recognition.onresult = async (event)=>{\n                let finalTranscript = \"\";\n                // Extract final transcript\n                for(let i = event.resultIndex; i < event.results.length; i++){\n                    const transcript = event.results[i][0].transcript;\n                    if (event.results[i].isFinal) {\n                        finalTranscript += transcript;\n                    }\n                }\n                // Process final speech result\n                if (finalTranscript.trim()) {\n                    console.log(\"[VoiceChat] Final transcript:\", finalTranscript);\n                    // Stop speech recognition to prevent capturing response\n                    try {\n                        recognition.abort();\n                        recognitionRef.current = null;\n                    } catch (e) {\n                        console.error(\"[VoiceChat] Error stopping recognition after result:\", e);\n                    }\n                    setListening(false);\n                    // Add user message to UI\n                    onNewMessage(finalTranscript, \"user\");\n                    // Get audio data and send to backend\n                    const audioData = await stopAudioRecordingAndGetData();\n                    if (audioData) {\n                        setProcessing(true);\n                        try {\n                            await sendAudioToBackend(audioData);\n                        } catch (err) {\n                            console.error(\"[VoiceChat] Error sending audio to backend:\", err);\n                            onNewMessage(`Error: ${err.message}`, \"assistant\");\n                        } finally{\n                            setProcessing(false);\n                            setResponseReceived(true);\n                        }\n                    } else {\n                        console.log(\"[VoiceChat] No valid audio data to send\");\n                        // If mic is still active, restart recognition\n                        if (micActive) {\n                            timeoutRef.current = setTimeout(()=>{\n                                if (micActive) {\n                                    startSpeechRecognition();\n                                }\n                            }, 300);\n                        }\n                    }\n                }\n            };\n            // Store and start\n            recognitionRef.current = recognition;\n            recognition.start();\n        } catch (e) {\n            console.error(\"[VoiceChat] Error setting up speech recognition:\", e);\n            setMicActive(false);\n            setListening(false);\n            // Try to restart after a short delay if this was a temporary error\n            if (micActive) {\n                timeoutRef.current = setTimeout(()=>{\n                    if (micActive) {\n                        startSpeechRecognition();\n                    }\n                }, 1000);\n            }\n        }\n    };\n    /**\n   * Start recording audio\n   */ const startAudioRecording = async ()=>{\n        // Clean up any existing recording first\n        if (streamRef.current) {\n            streamRef.current.getTracks().forEach((track)=>track.stop());\n            streamRef.current = null;\n        }\n        try {\n            console.log(\"[VoiceChat] Starting audio recording\");\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    echoCancellation: true,\n                    noiseSuppression: true,\n                    autoGainControl: true\n                }\n            });\n            streamRef.current = stream;\n            const mediaRecorder = new MediaRecorder(stream, {\n                mimeType: \"audio/webm\"\n            });\n            mediaRecorderRef.current = mediaRecorder;\n            audioChunksRef.current = [];\n            mediaRecorder.ondataavailable = (event)=>{\n                if (event.data && event.data.size > 0) {\n                    audioChunksRef.current.push(event.data);\n                }\n            };\n            mediaRecorder.start(100); // Collect data in 100ms chunks\n            setRecording(true);\n        } catch (e) {\n            console.error(\"[VoiceChat] Error starting audio recording:\", e);\n            alert(\"Could not access microphone. Please check permissions.\");\n            setMicActive(false);\n            setRecording(false);\n        }\n    };\n    /**\n   * Stop audio recording and return the audio data\n   */ const stopAudioRecordingAndGetData = ()=>{\n        return new Promise((resolve)=>{\n            if (!mediaRecorderRef.current || mediaRecorderRef.current.state !== \"recording\") {\n                console.log(\"[VoiceChat] No active recording to stop\");\n                resolve(null);\n                return;\n            }\n            console.log(\"[VoiceChat] Stopping audio recording and getting data\");\n            const handleStop = ()=>{\n                if (!audioChunksRef.current.length) {\n                    console.log(\"[VoiceChat] No audio chunks collected\");\n                    cleanupAudioResources();\n                    resolve(null);\n                    return;\n                }\n                const audioBlob = new Blob(audioChunksRef.current, {\n                    type: \"audio/webm\"\n                });\n                console.log(\"[VoiceChat] Audio recording complete, size:\", audioBlob.size, \"bytes\");\n                if (audioBlob.size < 1000) {\n                    console.log(\"[VoiceChat] Audio too small, ignoring\");\n                    cleanupAudioResources();\n                    resolve(null);\n                    return;\n                }\n                // Convert to base64\n                const reader = new FileReader();\n                reader.readAsDataURL(audioBlob);\n                reader.onloadend = ()=>{\n                    const base64data = reader.result.split(\",\")[1];\n                    cleanupAudioResources();\n                    resolve(base64data);\n                };\n                reader.onerror = ()=>{\n                    console.error(\"[VoiceChat] Error reading audio blob\");\n                    cleanupAudioResources();\n                    resolve(null);\n                };\n            };\n            const cleanupAudioResources = ()=>{\n                if (streamRef.current) {\n                    streamRef.current.getTracks().forEach((track)=>track.stop());\n                    streamRef.current = null;\n                }\n                mediaRecorderRef.current = null;\n                audioChunksRef.current = [];\n                setRecording(false);\n            };\n            // Set stop handler and stop recording\n            mediaRecorderRef.current.onstop = handleStop;\n            try {\n                mediaRecorderRef.current.stop();\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping media recorder:\", e);\n                cleanupAudioResources();\n                resolve(null);\n            }\n        });\n    };\n    /**\n   * Send audio data to the backend\n   */ const sendAudioToBackend = async (audioData)=>{\n        if (!socket.current) {\n            throw new Error(\"Socket not connected\");\n        }\n        return new Promise((resolve, reject)=>{\n            const timeoutId = setTimeout(()=>{\n                reject(new Error(\"Request timed out after 90 seconds\"));\n            }, 90000);\n            console.log(\"[VoiceChat] Sending audio to backend\");\n            // Update user message to show sending state\n            onNewMessage(\"Sending your message...\", \"user\", null, null, true);\n            socket.current.emit(\"audioInput\", {\n                audioData,\n                systemInstruction: systemInstructions,\n                apiKey: apiKey.trim(),\n                mimeType: \"audio/webm\"\n            }, (response)=>{\n                clearTimeout(timeoutId);\n                if (!response) {\n                    reject(new Error(\"No response from server\"));\n                    return;\n                }\n                resolve(response);\n            });\n        }).then((data)=>{\n            // Update user message to show completion\n            onNewMessage(\"\\uD83C\\uDFA4 Message sent\", \"user\", null, null, true);\n            // Handle errors in response\n            if (data.error) {\n                throw new Error(data.error);\n            }\n            // Process response\n            const assistantText = data.text || \"[Audio response]\";\n            // Check for valid audio data\n            if (data.audioData) {\n                onNewMessage(assistantText, \"assistant\", data.audioData, data.mimeType || \"audio/wav\");\n            } else {\n                onNewMessage(assistantText, \"assistant\");\n            }\n        });\n    };\n    // Render UI with video call styling\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n            [\n                \"c7989463b0059724\",\n                [\n                    micActive ? \"#ff3b30\" : \"#34c759\",\n                    micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                ]\n            ]\n        ]) + \" \" + \"video-call-controls-wrapper\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"c7989463b0059724\",\n                        [\n                            micActive ? \"#ff3b30\" : \"#34c759\",\n                            micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                        ]\n                    ]\n                ]) + \" \" + \"call-status-indicator\",\n                children: socketStatus !== \"connected\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge connecting\",\n                    children: \"Connecting...\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 533,\n                    columnNumber: 11\n                }, this) : processing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge processing\",\n                    children: \"Processing...\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 535,\n                    columnNumber: 11\n                }, this) : recording && !listening ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge recording\",\n                    children: \"Recording...\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 537,\n                    columnNumber: 11\n                }, this) : listening ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge listening\",\n                    children: \"Listening...\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 539,\n                    columnNumber: 11\n                }, this) : micActive ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge ready\",\n                    children: \"Ready\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 541,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                        [\n                            \"c7989463b0059724\",\n                            [\n                                micActive ? \"#ff3b30\" : \"#34c759\",\n                                micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                            ]\n                        ]\n                    ]) + \" \" + \"status-badge idle\",\n                    children: \"Call Ready\"\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                    lineNumber: 543,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                lineNumber: 531,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                    [\n                        \"c7989463b0059724\",\n                        [\n                            micActive ? \"#ff3b30\" : \"#34c759\",\n                            micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                        ]\n                    ]\n                ]) + \" \" + \"video-call-actions\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: toggleMicrophone,\n                        disabled: socketStatus !== \"connected\" || processing,\n                        title: micActive ? \"End call\" : \"Start call\",\n                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                            [\n                                \"c7989463b0059724\",\n                                [\n                                    micActive ? \"#ff3b30\" : \"#34c759\",\n                                    micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                                ]\n                            ]\n                        ]) + \" \" + `video-call-button mic-button ${micActive ? \"active\" : \"\"}`,\n                        children: micActive ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"c7989463b0059724\",\n                                    [\n                                        micActive ? \"#ff3b30\" : \"#34c759\",\n                                        micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                                    ]\n                                ]\n                            ]) + \" \" + \"button-icon\",\n                            children: \"\\uD83D\\uDCDE\"\n                        }, void 0, false, {\n                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                            lineNumber: 555,\n                            columnNumber: 13\n                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"c7989463b0059724\",\n                                    [\n                                        micActive ? \"#ff3b30\" : \"#34c759\",\n                                        micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                                    ]\n                                ]\n                            ]) + \" \" + \"button-icon\",\n                            children: \"\\uD83D\\uDCDE\"\n                        }, void 0, false, {\n                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                            lineNumber: 557,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                        lineNumber: 548,\n                        columnNumber: 9\n                    }, this),\n                    micActive && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: stopMicrophone,\n                        title: \"Mute microphone\",\n                        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                            [\n                                \"c7989463b0059724\",\n                                [\n                                    micActive ? \"#ff3b30\" : \"#34c759\",\n                                    micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                                ]\n                            ]\n                        ]) + \" \" + \"video-call-button mute-button\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default().dynamic([\n                                [\n                                    \"c7989463b0059724\",\n                                    [\n                                        micActive ? \"#ff3b30\" : \"#34c759\",\n                                        micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                                    ]\n                                ]\n                            ]) + \" \" + \"button-icon\",\n                            children: \"\\uD83D\\uDD07\"\n                        }, void 0, false, {\n                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                            lineNumber: 567,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                        lineNumber: 562,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                lineNumber: 547,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"c7989463b0059724\",\n                dynamic: [\n                    micActive ? \"#ff3b30\" : \"#34c759\",\n                    micActive ? \"rotate(135deg)\" : \"rotate(0)\"\n                ],\n                children: `.video-call-controls-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin:20px 0}.call-status-indicator.__jsx-style-dynamic-selector{margin-bottom:15px}.status-badge.__jsx-style-dynamic-selector{padding:6px 12px;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;font-size:14px;font-weight:500;color:white}.connecting.__jsx-style-dynamic-selector{background:#007aff}.processing.__jsx-style-dynamic-selector{background:#ff9500}.recording.__jsx-style-dynamic-selector{background:#ff3b30;-webkit-animation:pulse 1.5s infinite;-moz-animation:pulse 1.5s infinite;-o-animation:pulse 1.5s infinite;animation:pulse 1.5s infinite}.listening.__jsx-style-dynamic-selector{background:#34c759;-webkit-animation:pulse 1.5s infinite;-moz-animation:pulse 1.5s infinite;-o-animation:pulse 1.5s infinite;animation:pulse 1.5s infinite}.ready.__jsx-style-dynamic-selector{background:#5856d6}.idle.__jsx-style-dynamic-selector{background:#8e8e93}.video-call-actions.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:16px}.video-call-button.__jsx-style-dynamic-selector{width:60px;height:60px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;border:none;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;background:#444;color:white;-webkit-box-shadow:0 4px 12px rgba(0,0,0,.2);-moz-box-shadow:0 4px 12px rgba(0,0,0,.2);box-shadow:0 4px 12px rgba(0,0,0,.2)}.video-call-button.__jsx-style-dynamic-selector:hover{-webkit-transform:scale(1.05);-moz-transform:scale(1.05);-ms-transform:scale(1.05);-o-transform:scale(1.05);transform:scale(1.05)}.video-call-button.__jsx-style-dynamic-selector:active{-webkit-transform:scale(.95);-moz-transform:scale(.95);-ms-transform:scale(.95);-o-transform:scale(.95);transform:scale(.95)}.video-call-button.__jsx-style-dynamic-selector:disabled{background:#555;opacity:.5;cursor:not-allowed}.mic-button.__jsx-style-dynamic-selector{background:${micActive ? \"#ff3b30\" : \"#34c759\"};-webkit-transform:${micActive ? \"rotate(135deg)\" : \"rotate(0)\"};-moz-transform:${micActive ? \"rotate(135deg)\" : \"rotate(0)\"};-ms-transform:${micActive ? \"rotate(135deg)\" : \"rotate(0)\"};-o-transform:${micActive ? \"rotate(135deg)\" : \"rotate(0)\"};transform:${micActive ? \"rotate(135deg)\" : \"rotate(0)\"}}.mic-button.active.__jsx-style-dynamic-selector{background:#ff3b30}.mute-button.__jsx-style-dynamic-selector{background:#007aff}.button-icon.__jsx-style-dynamic-selector{font-size:24px}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.8}100%{opacity:1}}@-moz-keyframes pulse{0%{opacity:1}50%{opacity:.8}100%{opacity:1}}@-o-keyframes pulse{0%{opacity:1}50%{opacity:.8}100%{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.8}100%{opacity:1}}`\n            }, void 0, false, void 0, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n        lineNumber: 530,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LWZyb250ZW5kLy4vY29tcG9uZW50cy9Wb2ljZUNoYXQuanM/MTA0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuLy8gU2ltcGxlIGV2ZW50IGJ1cyBmb3IgYXVkaW8gcGxheWJhY2sgc3RhdHVzIGNvbW11bmljYXRpb25cbmV4cG9ydCBjb25zdCBhdWRpb0V2ZW50cyA9IHtcbiAgbGlzdGVuZXJzOiB7fSxcbiAgXG4gIHN1YnNjcmliZTogKGV2ZW50LCBjYWxsYmFjaykgPT4ge1xuICAgIGlmICghYXVkaW9FdmVudHMubGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgYXVkaW9FdmVudHMubGlzdGVuZXJzW2V2ZW50XSA9IFtdO1xuICAgIH1cbiAgICBhdWRpb0V2ZW50cy5saXN0ZW5lcnNbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBhdWRpb0V2ZW50cy5saXN0ZW5lcnNbZXZlbnRdID0gYXVkaW9FdmVudHMubGlzdGVuZXJzW2V2ZW50XS5maWx0ZXIoY2IgPT4gY2IgIT09IGNhbGxiYWNrKTtcbiAgICB9O1xuICB9LFxuICBcbiAgcHVibGlzaDogKGV2ZW50LCBkYXRhKSA9PiB7XG4gICAgaWYgKGF1ZGlvRXZlbnRzLmxpc3RlbmVyc1tldmVudF0pIHtcbiAgICAgIGF1ZGlvRXZlbnRzLmxpc3RlbmVyc1tldmVudF0uZm9yRWFjaChjYWxsYmFjayA9PiBjYWxsYmFjayhkYXRhKSk7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBWb2ljZUNoYXQoeyBcbiAgc29ja2V0LCBcbiAgc29ja2V0U3RhdHVzLCBcbiAgc3lzdGVtSW5zdHJ1Y3Rpb25zLCBcbiAgYXBpS2V5LCBcbiAgb25OZXdNZXNzYWdlIFxufSkge1xuICAvLyBVSSBTdGF0ZXNcbiAgY29uc3QgW21pY0FjdGl2ZSwgc2V0TWljQWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xpc3RlbmluZywgc2V0TGlzdGVuaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3JlY29yZGluZywgc2V0UmVjb3JkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Byb2Nlc3NpbmcsIHNldFByb2Nlc3NpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVzcG9uc2VSZWNlaXZlZCwgc2V0UmVzcG9uc2VSZWNlaXZlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthdWRpb1BsYXlpbmcsIHNldEF1ZGlvUGxheWluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gVGVjaG5pY2FsIHJlZnNcbiAgY29uc3QgcmVjb2duaXRpb25SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IG1lZGlhUmVjb3JkZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGF1ZGlvQ2h1bmtzUmVmID0gdXNlUmVmKFtdKTtcbiAgY29uc3Qgc3RyZWFtUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB0aW1lb3V0UmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIC8vIExpc3RlbiBmb3IgYXVkaW8gcGxheWJhY2sgZXZlbnRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgdW5zdWJzY3JpYmVTdGFydCA9IGF1ZGlvRXZlbnRzLnN1YnNjcmliZSgnYXVkaW8tcGxheS1zdGFydCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gRGV0ZWN0ZWQgYXVkaW8gcGxheWJhY2sgc3RhcnRcIik7XG4gICAgICBzZXRBdWRpb1BsYXlpbmcodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFN0b3AgcmVjb2duaXRpb24gd2hpbGUgYXVkaW8gaXMgcGxheWluZyB0byBwcmV2ZW50IGl0IGZyb20gcGlja2luZyB1cCB0aGUgcmVzcG9uc2VcbiAgICAgIGlmIChyZWNvZ25pdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVjb2duaXRpb25SZWYuY3VycmVudC5hYm9ydCgpO1xuICAgICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIHN0b3BwaW5nIHJlY29nbml0aW9uIGR1cmluZyBhdWRpbyBwbGF5YmFjazpcIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCB1bnN1YnNjcmliZUVuZCA9IGF1ZGlvRXZlbnRzLnN1YnNjcmliZSgnYXVkaW8tcGxheS1lbmQnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIERldGVjdGVkIGF1ZGlvIHBsYXliYWNrIGVuZFwiKTtcbiAgICAgIHNldEF1ZGlvUGxheWluZyhmYWxzZSk7XG4gICAgICBcbiAgICAgIC8vIFJlc3RhcnQgcmVjb2duaXRpb24gYWZ0ZXIgYSBzaG9ydCBkZWxheSB3aGVuIGF1ZGlvIGVuZHNcbiAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcpIHtcbiAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZykge1xuICAgICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgNTAwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdW5zdWJzY3JpYmVTdGFydCgpO1xuICAgICAgdW5zdWJzY3JpYmVFbmQoKTtcbiAgICB9O1xuICB9LCBbbWljQWN0aXZlLCBwcm9jZXNzaW5nXSk7XG5cbiAgLy8gQ2xlYW4gdXAgcmVzb3VyY2VzIHdoZW4gY29tcG9uZW50IHVubW91bnRzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFudXBSZXNvdXJjZXMoKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gRm9yY2UgcmVzdGFydCByZWNvZ25pdGlvbiB3aGVuIHJlc3BvbnNlIGlzIHJlY2VpdmVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHJlc3BvbnNlUmVjZWl2ZWQgJiYgbWljQWN0aXZlICYmICFwcm9jZXNzaW5nICYmICFhdWRpb1BsYXlpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gUmVzcG9uc2UgcmVjZWl2ZWQsIHJlc3RhcnRpbmcgcmVjb2duaXRpb25cIik7XG4gICAgICBzZXRSZXNwb25zZVJlY2VpdmVkKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gQWxsb3cgYSBicmllZiBwYXVzZSBiZWZvcmUgcmVzdGFydGluZ1xuICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcgJiYgIWF1ZGlvUGxheWluZykge1xuICAgICAgICAgIHN0YXJ0U3BlZWNoUmVjb2duaXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9XG4gIH0sIFtyZXNwb25zZVJlY2VpdmVkLCBtaWNBY3RpdmUsIHByb2Nlc3NpbmcsIGF1ZGlvUGxheWluZ10pO1xuXG4gIC8qKlxuICAgKiBGdWxsIGNsZWFudXAgb2YgYWxsIHJlc291cmNlc1xuICAgKi9cbiAgY29uc3QgY2xlYW51cFJlc291cmNlcyA9ICgpID0+IHtcbiAgICAvLyBDbGVhciBhbnkgcGVuZGluZyB0aW1lb3V0c1xuICAgIGlmICh0aW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdG9wIHNwZWVjaCByZWNvZ25pdGlvblxuICAgIGlmIChyZWNvZ25pdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc3RvcHBpbmcgcmVjb2duaXRpb24gZHVyaW5nIGNsZWFudXA6XCIsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3AgbWVkaWEgc3RyZWFtXG4gICAgaWYgKHN0cmVhbVJlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBzdHJlYW1SZWYuY3VycmVudC5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICAgIHN0cmVhbVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIHN0b3BwaW5nIHN0cmVhbSBkdXJpbmcgY2xlYW51cDpcIiwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgcmVjb3JkZXJcbiAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIGF1ZGlvQ2h1bmtzUmVmLmN1cnJlbnQgPSBbXTtcbiAgfTtcblxuICAvKipcbiAgICogVG9nZ2xlIG1pY3JvcGhvbmUgb24vb2ZmXG4gICAqL1xuICBjb25zdCB0b2dnbGVNaWNyb3Bob25lID0gKCkgPT4ge1xuICAgIGlmIChtaWNBY3RpdmUpIHtcbiAgICAgIHN0b3BNaWNyb3Bob25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0TWljcm9waG9uZSgpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU3RhcnQgbWljcm9waG9uZSBhbmQgYmVnaW4gbGlzdGVuaW5nXG4gICAqL1xuICBjb25zdCBzdGFydE1pY3JvcGhvbmUgPSAoKSA9PiB7XG4gICAgaWYgKHNvY2tldFN0YXR1cyAhPT0gXCJjb25uZWN0ZWRcIikge1xuICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIENhbm5vdCBzdGFydCBtaWMgLSBzb2NrZXQgbm90IGNvbm5lY3RlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFN0YXJ0aW5nIG1pY3JvcGhvbmVcIik7XG4gICAgc2V0TWljQWN0aXZlKHRydWUpO1xuICAgIFxuICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBVSSB1cGRhdGVzIGJlZm9yZSBzdGFydGluZyByZWNvZ25pdGlvblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgIH0sIDEwMCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3AgbWljcm9waG9uZSBhbmQgYWxsIGFzc29jaWF0ZWQgcHJvY2Vzc2VzXG4gICAqL1xuICBjb25zdCBzdG9wTWljcm9waG9uZSA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFN0b3BwaW5nIG1pY3JvcGhvbmVcIik7XG4gICAgc2V0TWljQWN0aXZlKGZhbHNlKTtcbiAgICBjbGVhbnVwUmVzb3VyY2VzKCk7XG4gICAgc2V0TGlzdGVuaW5nKGZhbHNlKTtcbiAgICBzZXRSZWNvcmRpbmcoZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGFuZCBzdGFydCB0aGUgc3BlZWNoIHJlY29nbml0aW9uXG4gICAqL1xuICBjb25zdCBzdGFydFNwZWVjaFJlY29nbml0aW9uID0gKCkgPT4ge1xuICAgIC8vIERvbid0IHN0YXJ0IHJlY29nbml0aW9uIGlmIGF1ZGlvIGlzIHBsYXlpbmdcbiAgICBpZiAoYXVkaW9QbGF5aW5nKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIE5vdCBzdGFydGluZyByZWNvZ25pdGlvbiB3aGlsZSBhdWRpbyBpcyBwbGF5aW5nXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFN0YXJ0aW5nIHNwZWVjaCByZWNvZ25pdGlvblwiKTtcbiAgICBcbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dHNcbiAgICBpZiAodGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIENsZWFuIHVwIGFueSBleGlzdGluZyByZWNvZ25pdGlvblxuICAgIGlmIChyZWNvZ25pdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBhYm9ydGluZyBleGlzdGluZyByZWNvZ25pdGlvbjpcIiwgZSk7XG4gICAgICB9XG4gICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgU3BlZWNoUmVjb2duaXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIFxuICAgICAgKHdpbmRvdy5TcGVlY2hSZWNvZ25pdGlvbiB8fCB3aW5kb3cud2Via2l0U3BlZWNoUmVjb2duaXRpb24pO1xuICAgIFxuICAgIGlmICghU3BlZWNoUmVjb2duaXRpb24pIHtcbiAgICAgIGFsZXJ0KFwiU3BlZWNoIHJlY29nbml0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4geW91ciBicm93c2VyLlwiKTtcbiAgICAgIHNldE1pY0FjdGl2ZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIENyZWF0ZSBhIG5ldyByZWNvZ25pdGlvbiBpbnN0YW5jZSBmb3IgZWFjaCBzZXNzaW9uXG4gICAgICBjb25zdCByZWNvZ25pdGlvbiA9IG5ldyBTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgcmVjb2duaXRpb24uY29udGludW91cyA9IGZhbHNlO1xuICAgICAgcmVjb2duaXRpb24uaW50ZXJpbVJlc3VsdHMgPSB0cnVlO1xuICAgICAgcmVjb2duaXRpb24ubGFuZyA9IFwiZW4tVVNcIjtcbiAgICAgIHJlY29nbml0aW9uLm1heEFsdGVybmF0aXZlcyA9IDE7XG5cbiAgICAgIC8vIFNwZWVjaCByZWNvZ25pdGlvbiBzdGFydGVkXG4gICAgICByZWNvZ25pdGlvbi5vbnN0YXJ0ID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFNwZWVjaCByZWNvZ25pdGlvbiBzdGFydGVkXCIpO1xuICAgICAgICBzZXRMaXN0ZW5pbmcodHJ1ZSk7XG4gICAgICAgIHN0YXJ0QXVkaW9SZWNvcmRpbmcoKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEhhbmRsZSBzcGVlY2ggcmVjb2duaXRpb24gZXJyb3JzXG4gICAgICByZWNvZ25pdGlvbi5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtWb2ljZUNoYXRdIFNwZWVjaCByZWNvZ25pdGlvbiBlcnJvcjogJHtldmVudC5lcnJvcn1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE5vIHNwZWVjaCBlcnJvciBpcyBjb21tb24gYW5kIG5vdCBmYXRhbFxuICAgICAgICBpZiAoZXZlbnQuZXJyb3IgPT09IFwibm8tc3BlZWNoXCIpIHtcbiAgICAgICAgICBzZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIG1pYyBpcyBzdGlsbCBhY3RpdmUsIHJlc3RhcnQgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgICAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAobWljQWN0aXZlICYmICFwcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBvdGhlciBlcnJvcnNcbiAgICAgICAgc2V0TGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vdCBtYW51YWxseSBhYm9ydGVkIGFuZCBtaWMgaXMgc3RpbGwgYWN0aXZlLCB0cnkgdG8gcmVzdGFydFxuICAgICAgICBpZiAoZXZlbnQuZXJyb3IgIT09IFwiYWJvcnRlZFwiICYmIG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZykge1xuICAgICAgICAgIHRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZykge1xuICAgICAgICAgICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gSGFuZGxlIHNwZWVjaCByZWNvZ25pdGlvbiBlbmRpbmdcbiAgICAgIHJlY29nbml0aW9uLm9uZW5kID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFNwZWVjaCByZWNvZ25pdGlvbiBlbmRlZCBub3JtYWxseVwiKTtcbiAgICAgICAgc2V0TGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIG1pYyBzaG91bGQgc3RpbGwgYmUgYWN0aXZlIGFuZCB3ZSdyZSBub3QgcHJvY2Vzc2luZywgcmVzdGFydFxuICAgICAgICBpZiAobWljQWN0aXZlICYmICFwcm9jZXNzaW5nICYmICFyZXNwb25zZVJlY2VpdmVkKSB7XG4gICAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWljQWN0aXZlICYmICFwcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgIHN0YXJ0U3BlZWNoUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBIYW5kbGUgc3BlZWNoIHJlY29nbml0aW9uIHJlc3VsdHNcbiAgICAgIHJlY29nbml0aW9uLm9ucmVzdWx0ID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBmaW5hbFRyYW5zY3JpcHQgPSBcIlwiO1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFjdCBmaW5hbCB0cmFuc2NyaXB0XG4gICAgICAgIGZvciAobGV0IGkgPSBldmVudC5yZXN1bHRJbmRleDsgaSA8IGV2ZW50LnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCB0cmFuc2NyaXB0ID0gZXZlbnQucmVzdWx0c1tpXVswXS50cmFuc2NyaXB0O1xuICAgICAgICAgIGlmIChldmVudC5yZXN1bHRzW2ldLmlzRmluYWwpIHtcbiAgICAgICAgICAgIGZpbmFsVHJhbnNjcmlwdCArPSB0cmFuc2NyaXB0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzcyBmaW5hbCBzcGVlY2ggcmVzdWx0XG4gICAgICAgIGlmIChmaW5hbFRyYW5zY3JpcHQudHJpbSgpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBGaW5hbCB0cmFuc2NyaXB0OlwiLCBmaW5hbFRyYW5zY3JpcHQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFN0b3Agc3BlZWNoIHJlY29nbml0aW9uIHRvIHByZXZlbnQgY2FwdHVyaW5nIHJlc3BvbnNlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlY29nbml0aW9uLmFib3J0KCk7XG4gICAgICAgICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc3RvcHBpbmcgcmVjb2duaXRpb24gYWZ0ZXIgcmVzdWx0OlwiLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgc2V0TGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgdXNlciBtZXNzYWdlIHRvIFVJXG4gICAgICAgICAgb25OZXdNZXNzYWdlKGZpbmFsVHJhbnNjcmlwdCwgXCJ1c2VyXCIpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEdldCBhdWRpbyBkYXRhIGFuZCBzZW5kIHRvIGJhY2tlbmRcbiAgICAgICAgICBjb25zdCBhdWRpb0RhdGEgPSBhd2FpdCBzdG9wQXVkaW9SZWNvcmRpbmdBbmRHZXREYXRhKCk7XG4gICAgICAgICAgaWYgKGF1ZGlvRGF0YSkge1xuICAgICAgICAgICAgc2V0UHJvY2Vzc2luZyh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgc2VuZEF1ZGlvVG9CYWNrZW5kKGF1ZGlvRGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIHNlbmRpbmcgYXVkaW8gdG8gYmFja2VuZDpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgb25OZXdNZXNzYWdlKGBFcnJvcjogJHtlcnIubWVzc2FnZX1gLCBcImFzc2lzdGFudFwiKTtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgIHNldFByb2Nlc3NpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICBzZXRSZXNwb25zZVJlY2VpdmVkKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIE5vIHZhbGlkIGF1ZGlvIGRhdGEgdG8gc2VuZFwiKTtcbiAgICAgICAgICAgIC8vIElmIG1pYyBpcyBzdGlsbCBhY3RpdmUsIHJlc3RhcnQgcmVjb2duaXRpb25cbiAgICAgICAgICAgIGlmIChtaWNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1pY0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIFN0b3JlIGFuZCBzdGFydFxuICAgICAgcmVjb2duaXRpb25SZWYuY3VycmVudCA9IHJlY29nbml0aW9uO1xuICAgICAgcmVjb2duaXRpb24uc3RhcnQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc2V0dGluZyB1cCBzcGVlY2ggcmVjb2duaXRpb246XCIsIGUpO1xuICAgICAgc2V0TWljQWN0aXZlKGZhbHNlKTtcbiAgICAgIHNldExpc3RlbmluZyhmYWxzZSk7XG4gICAgICBcbiAgICAgIC8vIFRyeSB0byByZXN0YXJ0IGFmdGVyIGEgc2hvcnQgZGVsYXkgaWYgdGhpcyB3YXMgYSB0ZW1wb3JhcnkgZXJyb3JcbiAgICAgIGlmIChtaWNBY3RpdmUpIHtcbiAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKG1pY0FjdGl2ZSkge1xuICAgICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwMCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydCByZWNvcmRpbmcgYXVkaW9cbiAgICovXG4gIGNvbnN0IHN0YXJ0QXVkaW9SZWNvcmRpbmcgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgYW55IGV4aXN0aW5nIHJlY29yZGluZyBmaXJzdFxuICAgIGlmIChzdHJlYW1SZWYuY3VycmVudCkge1xuICAgICAgc3RyZWFtUmVmLmN1cnJlbnQuZ2V0VHJhY2tzKCkuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xuICAgICAgc3RyZWFtUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBTdGFydGluZyBhdWRpbyByZWNvcmRpbmdcIik7XG4gICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7IFxuICAgICAgICBhdWRpbzoge1xuICAgICAgICAgIGVjaG9DYW5jZWxsYXRpb246IHRydWUsXG4gICAgICAgICAgbm9pc2VTdXBwcmVzc2lvbjogdHJ1ZSxcbiAgICAgICAgICBhdXRvR2FpbkNvbnRyb2w6IHRydWVcbiAgICAgICAgfSBcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBzdHJlYW1SZWYuY3VycmVudCA9IHN0cmVhbTtcbiAgICAgIFxuICAgICAgY29uc3QgbWVkaWFSZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbSwgeyBtaW1lVHlwZTogXCJhdWRpby93ZWJtXCIgfSk7XG4gICAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgPSBtZWRpYVJlY29yZGVyO1xuICAgICAgYXVkaW9DaHVua3NSZWYuY3VycmVudCA9IFtdO1xuICAgICAgXG4gICAgICBtZWRpYVJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuZGF0YSAmJiBldmVudC5kYXRhLnNpemUgPiAwKSB7XG4gICAgICAgICAgYXVkaW9DaHVua3NSZWYuY3VycmVudC5wdXNoKGV2ZW50LmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICBtZWRpYVJlY29yZGVyLnN0YXJ0KDEwMCk7IC8vIENvbGxlY3QgZGF0YSBpbiAxMDBtcyBjaHVua3NcbiAgICAgIHNldFJlY29yZGluZyh0cnVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc3RhcnRpbmcgYXVkaW8gcmVjb3JkaW5nOlwiLCBlKTtcbiAgICAgIGFsZXJ0KFwiQ291bGQgbm90IGFjY2VzcyBtaWNyb3Bob25lLiBQbGVhc2UgY2hlY2sgcGVybWlzc2lvbnMuXCIpO1xuICAgICAgc2V0TWljQWN0aXZlKGZhbHNlKTtcbiAgICAgIHNldFJlY29yZGluZyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdG9wIGF1ZGlvIHJlY29yZGluZyBhbmQgcmV0dXJuIHRoZSBhdWRpbyBkYXRhXG4gICAqL1xuICBjb25zdCBzdG9wQXVkaW9SZWNvcmRpbmdBbmRHZXREYXRhID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgaWYgKCFtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgfHwgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50LnN0YXRlICE9PSBcInJlY29yZGluZ1wiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gTm8gYWN0aXZlIHJlY29yZGluZyB0byBzdG9wXCIpO1xuICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3RvcHBpbmcgYXVkaW8gcmVjb3JkaW5nIGFuZCBnZXR0aW5nIGRhdGFcIik7XG4gICAgICBcbiAgICAgIGNvbnN0IGhhbmRsZVN0b3AgPSAoKSA9PiB7XG4gICAgICAgIGlmICghYXVkaW9DaHVua3NSZWYuY3VycmVudC5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIE5vIGF1ZGlvIGNodW5rcyBjb2xsZWN0ZWRcIik7XG4gICAgICAgICAgY2xlYW51cEF1ZGlvUmVzb3VyY2VzKCk7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGF1ZGlvQmxvYiA9IG5ldyBCbG9iKGF1ZGlvQ2h1bmtzUmVmLmN1cnJlbnQsIHsgdHlwZTogXCJhdWRpby93ZWJtXCIgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gQXVkaW8gcmVjb3JkaW5nIGNvbXBsZXRlLCBzaXplOlwiLCBhdWRpb0Jsb2Iuc2l6ZSwgXCJieXRlc1wiKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChhdWRpb0Jsb2Iuc2l6ZSA8IDEwMDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIEF1ZGlvIHRvbyBzbWFsbCwgaWdub3JpbmdcIik7XG4gICAgICAgICAgY2xlYW51cEF1ZGlvUmVzb3VyY2VzKCk7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnQgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGF1ZGlvQmxvYik7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgYmFzZTY0ZGF0YSA9IHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXTtcbiAgICAgICAgICBjbGVhbnVwQXVkaW9SZXNvdXJjZXMoKTtcbiAgICAgICAgICByZXNvbHZlKGJhc2U2NGRhdGEpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIHJlYWRpbmcgYXVkaW8gYmxvYlwiKTtcbiAgICAgICAgICBjbGVhbnVwQXVkaW9SZXNvdXJjZXMoKTtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW51cEF1ZGlvUmVzb3VyY2VzID0gKCkgPT4ge1xuICAgICAgICBpZiAoc3RyZWFtUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICBzdHJlYW1SZWYuY3VycmVudC5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICAgICAgc3RyZWFtUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICBhdWRpb0NodW5rc1JlZi5jdXJyZW50ID0gW107XG4gICAgICAgIHNldFJlY29yZGluZyhmYWxzZSk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBTZXQgc3RvcCBoYW5kbGVyIGFuZCBzdG9wIHJlY29yZGluZ1xuICAgICAgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50Lm9uc3RvcCA9IGhhbmRsZVN0b3A7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudC5zdG9wKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBzdG9wcGluZyBtZWRpYSByZWNvcmRlcjpcIiwgZSk7XG4gICAgICAgIGNsZWFudXBBdWRpb1Jlc291cmNlcygpO1xuICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZW5kIGF1ZGlvIGRhdGEgdG8gdGhlIGJhY2tlbmRcbiAgICovXG4gIGNvbnN0IHNlbmRBdWRpb1RvQmFja2VuZCA9IGFzeW5jIChhdWRpb0RhdGEpID0+IHtcbiAgICBpZiAoIXNvY2tldC5jdXJyZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb2NrZXQgbm90IGNvbm5lY3RlZFwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJSZXF1ZXN0IHRpbWVkIG91dCBhZnRlciA5MCBzZWNvbmRzXCIpKTtcbiAgICAgIH0sIDkwMDAwKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBTZW5kaW5nIGF1ZGlvIHRvIGJhY2tlbmRcIik7XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB1c2VyIG1lc3NhZ2UgdG8gc2hvdyBzZW5kaW5nIHN0YXRlXG4gICAgICBvbk5ld01lc3NhZ2UoXCJTZW5kaW5nIHlvdXIgbWVzc2FnZS4uLlwiLCBcInVzZXJcIiwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICBcbiAgICAgIHNvY2tldC5jdXJyZW50LmVtaXQoXCJhdWRpb0lucHV0XCIsIHtcbiAgICAgICAgYXVkaW9EYXRhLFxuICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbjogc3lzdGVtSW5zdHJ1Y3Rpb25zLFxuICAgICAgICBhcGlLZXk6IGFwaUtleS50cmltKCksXG4gICAgICAgIG1pbWVUeXBlOiBcImF1ZGlvL3dlYm1cIlxuICAgICAgfSwgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJObyByZXNwb25zZSBmcm9tIHNlcnZlclwiKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIC8vIFVwZGF0ZSB1c2VyIG1lc3NhZ2UgdG8gc2hvdyBjb21wbGV0aW9uXG4gICAgICBvbk5ld01lc3NhZ2UoXCLwn46kIE1lc3NhZ2Ugc2VudFwiLCBcInVzZXJcIiwgbnVsbCwgbnVsbCwgdHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBlcnJvcnMgaW4gcmVzcG9uc2VcbiAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyByZXNwb25zZVxuICAgICAgY29uc3QgYXNzaXN0YW50VGV4dCA9IGRhdGEudGV4dCB8fCBcIltBdWRpbyByZXNwb25zZV1cIjtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHZhbGlkIGF1ZGlvIGRhdGFcbiAgICAgIGlmIChkYXRhLmF1ZGlvRGF0YSkge1xuICAgICAgICBvbk5ld01lc3NhZ2UoXG4gICAgICAgICAgYXNzaXN0YW50VGV4dCwgXG4gICAgICAgICAgXCJhc3Npc3RhbnRcIiwgXG4gICAgICAgICAgZGF0YS5hdWRpb0RhdGEsIFxuICAgICAgICAgIGRhdGEubWltZVR5cGUgfHwgXCJhdWRpby93YXZcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb25OZXdNZXNzYWdlKGFzc2lzdGFudFRleHQsIFwiYXNzaXN0YW50XCIpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFJlbmRlciBVSSB3aXRoIHZpZGVvIGNhbGwgc3R5bGluZ1xuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tY2FsbC1jb250cm9scy13cmFwcGVyXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhbGwtc3RhdHVzLWluZGljYXRvclwiPlxuICAgICAgICB7c29ja2V0U3RhdHVzICE9PSBcImNvbm5lY3RlZFwiID8gKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXR1cy1iYWRnZSBjb25uZWN0aW5nXCI+Q29ubmVjdGluZy4uLjwvc3Bhbj5cbiAgICAgICAgKSA6IHByb2Nlc3NpbmcgPyAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3RhdHVzLWJhZGdlIHByb2Nlc3NpbmdcIj5Qcm9jZXNzaW5nLi4uPC9zcGFuPlxuICAgICAgICApIDogcmVjb3JkaW5nICYmICFsaXN0ZW5pbmcgPyAoXG4gICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwic3RhdHVzLWJhZGdlIHJlY29yZGluZ1wiPlJlY29yZGluZy4uLjwvc3Bhbj5cbiAgICAgICAgKSA6IGxpc3RlbmluZyA/IChcbiAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJzdGF0dXMtYmFkZ2UgbGlzdGVuaW5nXCI+TGlzdGVuaW5nLi4uPC9zcGFuPlxuICAgICAgICApIDogbWljQWN0aXZlID8gKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXR1cy1iYWRnZSByZWFkeVwiPlJlYWR5PC9zcGFuPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInN0YXR1cy1iYWRnZSBpZGxlXCI+Q2FsbCBSZWFkeTwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZGVvLWNhbGwtYWN0aW9uc1wiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3NOYW1lPXtgdmlkZW8tY2FsbC1idXR0b24gbWljLWJ1dHRvbiAke21pY0FjdGl2ZSA/ICdhY3RpdmUnIDogJyd9YH1cbiAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVNaWNyb3Bob25lfVxuICAgICAgICAgIGRpc2FibGVkPXtzb2NrZXRTdGF0dXMgIT09IFwiY29ubmVjdGVkXCIgfHwgcHJvY2Vzc2luZ31cbiAgICAgICAgICB0aXRsZT17bWljQWN0aXZlID8gXCJFbmQgY2FsbFwiIDogXCJTdGFydCBjYWxsXCJ9XG4gICAgICAgID5cbiAgICAgICAgICB7bWljQWN0aXZlID8gKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYnV0dG9uLWljb25cIj7wn5OePC9zcGFuPlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJidXR0b24taWNvblwiPvCfk548L3NwYW4+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIFxuICAgICAgICB7bWljQWN0aXZlICYmIChcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ2aWRlby1jYWxsLWJ1dHRvbiBtdXRlLWJ1dHRvblwiXG4gICAgICAgICAgICBvbkNsaWNrPXtzdG9wTWljcm9waG9uZX1cbiAgICAgICAgICAgIHRpdGxlPVwiTXV0ZSBtaWNyb3Bob25lXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJidXR0b24taWNvblwiPvCflIc8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAudmlkZW8tY2FsbC1jb250cm9scy13cmFwcGVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNhbGwtc3RhdHVzLWluZGljYXRvciB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnN0YXR1cy1iYWRnZSB7XG4gICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb25uZWN0aW5nIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjMDA3YWZmO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucHJvY2Vzc2luZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmOTUwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnJlY29yZGluZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmM2IzMDtcbiAgICAgICAgICBhbmltYXRpb246IHB1bHNlIDEuNXMgaW5maW5pdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5saXN0ZW5pbmcge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICMzNGM3NTk7XG4gICAgICAgICAgYW5pbWF0aW9uOiBwdWxzZSAxLjVzIGluZmluaXRlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAucmVhZHkge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICM1ODU2ZDY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5pZGxlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjOGU4ZTkzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudmlkZW8tY2FsbC1hY3Rpb25zIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogMTZweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZGVvLWNhbGwtYnV0dG9uIHtcbiAgICAgICAgICB3aWR0aDogNjBweDtcbiAgICAgICAgICBoZWlnaHQ6IDYwcHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzQ0NDtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC52aWRlby1jYWxsLWJ1dHRvbjpob3ZlciB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZGVvLWNhbGwtYnV0dG9uOmFjdGl2ZSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZGVvLWNhbGwtYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjNTU1O1xuICAgICAgICAgIG9wYWNpdHk6IDAuNTtcbiAgICAgICAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWljLWJ1dHRvbiB7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHttaWNBY3RpdmUgPyAnI2ZmM2IzMCcgOiAnIzM0Yzc1OSd9O1xuICAgICAgICAgIHRyYW5zZm9ybTogJHttaWNBY3RpdmUgPyAncm90YXRlKDEzNWRlZyknIDogJ3JvdGF0ZSgwKSd9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWljLWJ1dHRvbi5hY3RpdmUge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmZjNiMzA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5tdXRlLWJ1dHRvbiB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzAwN2FmZjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmJ1dHRvbi1pY29uIHtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIEBrZXlmcmFtZXMgcHVsc2Uge1xuICAgICAgICAgIDAlIHsgb3BhY2l0eTogMTsgfVxuICAgICAgICAgIDUwJSB7IG9wYWNpdHk6IDAuODsgfVxuICAgICAgICAgIDEwMCUgeyBvcGFjaXR5OiAxOyB9XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiYXVkaW9FdmVudHMiLCJsaXN0ZW5lcnMiLCJzdWJzY3JpYmUiLCJldmVudCIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImNiIiwicHVibGlzaCIsImRhdGEiLCJmb3JFYWNoIiwiVm9pY2VDaGF0Iiwic29ja2V0Iiwic29ja2V0U3RhdHVzIiwic3lzdGVtSW5zdHJ1Y3Rpb25zIiwiYXBpS2V5Iiwib25OZXdNZXNzYWdlIiwibWljQWN0aXZlIiwic2V0TWljQWN0aXZlIiwibGlzdGVuaW5nIiwic2V0TGlzdGVuaW5nIiwicmVjb3JkaW5nIiwic2V0UmVjb3JkaW5nIiwicHJvY2Vzc2luZyIsInNldFByb2Nlc3NpbmciLCJyZXNwb25zZVJlY2VpdmVkIiwic2V0UmVzcG9uc2VSZWNlaXZlZCIsImF1ZGlvUGxheWluZyIsInNldEF1ZGlvUGxheWluZyIsInJlY29nbml0aW9uUmVmIiwibWVkaWFSZWNvcmRlclJlZiIsImF1ZGlvQ2h1bmtzUmVmIiwic3RyZWFtUmVmIiwidGltZW91dFJlZiIsInVuc3Vic2NyaWJlU3RhcnQiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudCIsImFib3J0IiwiZSIsImVycm9yIiwidW5zdWJzY3JpYmVFbmQiLCJzZXRUaW1lb3V0Iiwic3RhcnRTcGVlY2hSZWNvZ25pdGlvbiIsImNsZWFudXBSZXNvdXJjZXMiLCJjbGVhclRpbWVvdXQiLCJnZXRUcmFja3MiLCJ0cmFjayIsInN0b3AiLCJ0b2dnbGVNaWNyb3Bob25lIiwic3RvcE1pY3JvcGhvbmUiLCJzdGFydE1pY3JvcGhvbmUiLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndpbmRvdyIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwiYWxlcnQiLCJyZWNvZ25pdGlvbiIsImNvbnRpbnVvdXMiLCJpbnRlcmltUmVzdWx0cyIsImxhbmciLCJtYXhBbHRlcm5hdGl2ZXMiLCJvbnN0YXJ0Iiwic3RhcnRBdWRpb1JlY29yZGluZyIsIm9uZXJyb3IiLCJvbmVuZCIsIm9ucmVzdWx0IiwiZmluYWxUcmFuc2NyaXB0IiwiaSIsInJlc3VsdEluZGV4IiwicmVzdWx0cyIsImxlbmd0aCIsInRyYW5zY3JpcHQiLCJpc0ZpbmFsIiwidHJpbSIsImF1ZGlvRGF0YSIsInN0b3BBdWRpb1JlY29yZGluZ0FuZEdldERhdGEiLCJzZW5kQXVkaW9Ub0JhY2tlbmQiLCJlcnIiLCJtZXNzYWdlIiwic3RhcnQiLCJzdHJlYW0iLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJhdWRpbyIsImVjaG9DYW5jZWxsYXRpb24iLCJub2lzZVN1cHByZXNzaW9uIiwiYXV0b0dhaW5Db250cm9sIiwibWVkaWFSZWNvcmRlciIsIk1lZGlhUmVjb3JkZXIiLCJtaW1lVHlwZSIsIm9uZGF0YWF2YWlsYWJsZSIsInNpemUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN0YXRlIiwiaGFuZGxlU3RvcCIsImNsZWFudXBBdWRpb1Jlc291cmNlcyIsImF1ZGlvQmxvYiIsIkJsb2IiLCJ0eXBlIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJvbmxvYWRlbmQiLCJiYXNlNjRkYXRhIiwicmVzdWx0Iiwic3BsaXQiLCJvbnN0b3AiLCJFcnJvciIsInJlamVjdCIsInRpbWVvdXRJZCIsImVtaXQiLCJzeXN0ZW1JbnN0cnVjdGlvbiIsInJlc3BvbnNlIiwidGhlbiIsImFzc2lzdGFudFRleHQiLCJ0ZXh0IiwiZGl2Iiwic3BhbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsInRpdGxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/VoiceChat.js\n");

/***/ }),

/***/ "./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction App({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n        ...pageProps\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/_app.js\",\n        lineNumber: 4,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QjtBQUVmLFNBQVNBLElBQUksRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQUU7SUFDbEQscUJBQU8sOERBQUNEO1FBQVcsR0FBR0MsU0FBUzs7Ozs7O0FBQ2pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VtaW5pLXZvaWNlLWZyb250ZW5kLy4vcGFnZXMvX2FwcC5qcz9lMGFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9KSB7XG4gIHJldHVybiA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG59ICJdLCJuYW1lcyI6WyJBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/_app.js\n");

/***/ }),

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"styled-jsx/style\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _components_VoiceChat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/VoiceChat */ \"./components/VoiceChat.js\");\n/* harmony import */ var _components_AudioPlayer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/AudioPlayer */ \"./components/AudioPlayer.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/head */ \"next/head\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_TalkingHead__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/TalkingHead */ \"./components/TalkingHead.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_3__]);\nsocket_io_client__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\nfunction Home() {\n    const [systemInstr, setSystemInstr] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [apiKey, setApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [showApiKey, setShowApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [socketStatus, setSocketStatus] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"disconnected\");\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    // Connect to socket on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (true) return; // SSR guard\n        setSocketStatus(\"connecting\");\n        const socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_3__.io)(process.env.NEXT_PUBLIC_API_WS || \"http://localhost:5000\");\n        socketRef.current = socket;\n        socket.on(\"connect\", ()=>{\n            console.log(\"[Frontend] Socket connected\");\n            setSocketStatus(\"connected\");\n        });\n        socket.on(\"disconnect\", ()=>{\n            console.log(\"[Frontend] Socket disconnected\");\n            setSocketStatus(\"disconnected\");\n        });\n        socket.on(\"connect_error\", (err)=>{\n            console.error(\"[Frontend] Socket connection error:\", err);\n            setSocketStatus(\"disconnected\");\n        });\n        return ()=>{\n            socket?.disconnect();\n        };\n    }, []);\n    // Auto-scroll to bottom when new messages arrive\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        if (chatContainerRef.current) {\n            chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n        }\n    }, [\n        messages\n    ]);\n    // Format timestamp for messages\n    const formatTime = (date)=>{\n        return date.toLocaleTimeString([], {\n            hour: \"2-digit\",\n            minute: \"2-digit\"\n        });\n    };\n    // Handle new message\n    const handleNewMessage = (text, sender, audioData = null, mimeType = null, isUpdate = false)=>{\n        setMessages((prev)=>{\n            // If this is an update to the last message from the same sender\n            if (isUpdate && prev.length > 0 && prev[prev.length - 1].sender === sender) {\n                const newMessages = [\n                    ...prev\n                ];\n                newMessages[newMessages.length - 1] = {\n                    ...newMessages[newMessages.length - 1],\n                    text,\n                    ...audioData && {\n                        audioData,\n                        mimeType\n                    }\n                };\n                return newMessages;\n            }\n            // Otherwise add as a new message\n            return [\n                ...prev,\n                {\n                    sender,\n                    text,\n                    timestamp: new Date(),\n                    audioData,\n                    mimeType\n                }\n            ];\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        // Import Three.js dynamically on the client side\n        const loadThreeJS = async ()=>{\n            // Only run in the browser\n            if (false) {}\n        };\n        loadThreeJS();\n    }, []);\n    // Function to initialize the TalkingHead\n    const initTalkingHead = (THREE, GLTFLoader, OrbitControls)=>{\n        console.log(\"Initializing TalkingHead...\");\n        const container = document.getElementById(\"talking-head\");\n        if (!container) {\n            console.error(\"Container element not found\");\n            return;\n        }\n        // Basic Three.js setup\n        const scene = new THREE.Scene();\n        scene.background = new THREE.Color(0xf5f5f5);\n        // Camera setup\n        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);\n        camera.position.set(0, 1.5, 2.0);\n        camera.lookAt(0, 1.5, 0);\n        // Renderer\n        const renderer = new THREE.WebGLRenderer({\n            antialias: true\n        });\n        renderer.setSize(container.clientWidth, container.clientHeight);\n        renderer.setPixelRatio(window.devicePixelRatio);\n        container.appendChild(renderer.domElement);\n        // Lighting\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n        scene.add(ambientLight);\n        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n        directionalLight.position.set(0, 1, 1);\n        scene.add(directionalLight);\n        // Load 3D model - use Next.js public path\n        const loader = new GLTFLoader();\n        console.log(\"Loading avatar model...\");\n        loader.load(\"/talkinghead/avatars/brunette.glb\", (gltf)=>{\n            console.log(\"Model loaded successfully!\");\n            const model = gltf.scene;\n            scene.add(model);\n            // Center model and adjust scale if needed\n            const box = new THREE.Box3().setFromObject(model);\n            const center = box.getCenter(new THREE.Vector3());\n            model.position.x = -center.x;\n            model.position.y = -center.y;\n            model.position.z = -center.z;\n            // Animation mixer for any animations\n            if (gltf.animations && gltf.animations.length > 0) {\n                const mixer = new THREE.AnimationMixer(model);\n                const clip = gltf.animations[0];\n                const action = mixer.clipAction(clip);\n                action.play();\n                // Update animations in render loop\n                const clock = new THREE.Clock();\n                function animate() {\n                    requestAnimationFrame(animate);\n                    const delta = clock.getDelta();\n                    mixer.update(delta);\n                    renderer.render(scene, camera);\n                }\n                animate();\n            } else {\n                // Simple render loop if no animations\n                function animate() {\n                    requestAnimationFrame(animate);\n                    renderer.render(scene, camera);\n                }\n                animate();\n            }\n            // Simple speaking animation function\n            window.speakWithAudio = (audioData)=>{\n                console.log(\"Speaking with audio data, length:\", audioData.length);\n            // In a real implementation, this would analyze the audio and animate the face\n            };\n        }, (progress)=>{\n            const percent = progress.loaded / progress.total * 100;\n            console.log(`Loading model: ${percent.toFixed(2)}%`);\n        }, (error)=>{\n            console.error(\"Error loading model:\", error);\n        });\n        // Handle window resize\n        window.addEventListener(\"resize\", ()=>{\n            camera.aspect = container.clientWidth / container.clientHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(container.clientWidth, container.clientHeight);\n        });\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"jsx-e52dbd05b31c592d\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_6___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        className: \"jsx-e52dbd05b31c592d\",\n                        children: \"Gemini Voice Chat\"\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 208,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Gemini Voice Chat with 3D Avatar\",\n                        className: \"jsx-e52dbd05b31c592d\"\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 209,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"link\", {\n                        href: \"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap\",\n                        rel: \"stylesheet\",\n                        className: \"jsx-e52dbd05b31c592d\"\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 210,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                lineNumber: 207,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"jsx-e52dbd05b31c592d\" + \" \" + \"video-chat-app\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"app-container\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"app-header\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"jsx-e52dbd05b31c592d\" + \" \" + \"app-title\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-e52dbd05b31c592d\" + \" \" + \"app-logo\",\n                                        children: \"\\uD83E\\uDD16\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 217,\n                                        columnNumber: 15\n                                    }, this),\n                                    \" Gemini Video Call\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"jsx-e52dbd05b31c592d\" + \" \" + `connection-badge ${socketStatus}`,\n                                        children: socketStatus === \"connected\" ? \"Online\" : socketStatus === \"connecting\" ? \"Connecting...\" : \"Offline\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 218,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 216,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                            lineNumber: 215,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"video-chat-layout\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"video-chat-main\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TalkingHead__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {}, void 0, false, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 229,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_VoiceChat__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                            socket: socketRef,\n                                            socketStatus: socketStatus,\n                                            systemInstructions: systemInstr,\n                                            apiKey: apiKey,\n                                            onNewMessage: handleNewMessage\n                                        }, void 0, false, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 232,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                    lineNumber: 227,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"video-chat-sidebar\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"sidebar-panel\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-header\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-icon\",\n                                                            children: \"⚙️\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 245,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        \" System Instructions\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 244,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                                    placeholder: \"Enter optional system instructions (e.g. 'You are a friendly assistant who speaks like a pirate')\",\n                                                    value: systemInstr,\n                                                    onChange: (e)=>setSystemInstr(e.target.value),\n                                                    rows: 3,\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"system-textarea\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 247,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 243,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"sidebar-panel\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-header\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-icon\",\n                                                            children: \"\\uD83D\\uDD11\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 259,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        \" API Key\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 258,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"api-key-input-group\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                            type: showApiKey ? \"text\" : \"password\",\n                                                            placeholder: \"Enter your Gemini API key\",\n                                                            value: apiKey,\n                                                            onChange: (e)=>setApiKey(e.target.value),\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"api-key-input\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 262,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                            onClick: ()=>setShowApiKey(!showApiKey),\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"toggle-visibility-button\",\n                                                            children: showApiKey ? \"\\uD83D\\uDE48\" : \"\\uD83D\\uDC41️\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 269,\n                                                            columnNumber: 19\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 261,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 257,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"sidebar-panel conversation-panel\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-header\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + \"panel-icon\",\n                                                            children: \"\\uD83D\\uDCAC\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 281,\n                                                            columnNumber: 19\n                                                        }, this),\n                                                        \" Conversation\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 280,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    ref: chatContainerRef,\n                                                    className: \"jsx-e52dbd05b31c592d\" + \" \" + \"messages-container\",\n                                                    children: messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: \"jsx-e52dbd05b31c592d\" + \" \" + \"empty-state\",\n                                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                            className: \"jsx-e52dbd05b31c592d\",\n                                                            children: \"Start a conversation by clicking the call button\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 286,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                        lineNumber: 285,\n                                                        columnNumber: 21\n                                                    }, this) : messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"jsx-e52dbd05b31c592d\" + \" \" + `message ${message.sender}`,\n                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                className: \"jsx-e52dbd05b31c592d\" + \" \" + \"message-content\",\n                                                                children: [\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"jsx-e52dbd05b31c592d\" + \" \" + \"message-header\",\n                                                                        children: [\n                                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                className: \"jsx-e52dbd05b31c592d\" + \" \" + \"message-sender\",\n                                                                                children: message.sender === \"user\" ? \"You\" : \"Gemini\"\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                                lineNumber: 296,\n                                                                                columnNumber: 29\n                                                                            }, this),\n                                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                                                className: \"jsx-e52dbd05b31c592d\" + \" \" + \"message-time\",\n                                                                                children: formatTime(message.timestamp)\n                                                                            }, void 0, false, {\n                                                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                                lineNumber: 299,\n                                                                                columnNumber: 29\n                                                                            }, this)\n                                                                        ]\n                                                                    }, void 0, true, {\n                                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                        lineNumber: 295,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                        className: \"jsx-e52dbd05b31c592d\" + \" \" + \"message-text\",\n                                                                        children: message.text\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                        lineNumber: 303,\n                                                                        columnNumber: 27\n                                                                    }, this),\n                                                                    message.audioData && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AudioPlayer__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                                                        audioData: message.audioData,\n                                                                        mimeType: message.mimeType\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                        lineNumber: 305,\n                                                                        columnNumber: 29\n                                                                    }, this)\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                lineNumber: 294,\n                                                                columnNumber: 25\n                                                            }, this)\n                                                        }, index, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 290,\n                                                            columnNumber: 23\n                                                        }, this))\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 283,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 279,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                    lineNumber: 241,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                            lineNumber: 226,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                    lineNumber: 214,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                lineNumber: 213,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                id: \"e52dbd05b31c592d\",\n                children: '*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:0;padding:0}body{font-family:\"Inter\",-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen,Ubuntu,Cantarell,\"Open Sans\",\"Helvetica Neue\",sans-serif;background-color:#f0f2f5;color:#333}.video-chat-app{min-height:100vh;padding:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:-webkit-linear-gradient(315deg,#f5f7fa 0%,#c3cfe2 100%);background:-moz-linear-gradient(315deg,#f5f7fa 0%,#c3cfe2 100%);background:-o-linear-gradient(315deg,#f5f7fa 0%,#c3cfe2 100%);background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%)}.app-container{width:100%;max-width:1200px;background:white;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px;-webkit-box-shadow:0 10px 30px rgba(0,0,0,.1);-moz-box-shadow:0 10px 30px rgba(0,0,0,.1);box-shadow:0 10px 30px rgba(0,0,0,.1);overflow:hidden}.app-header{padding:16px 24px;background:#1e1e1e;color:white;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid#333}.app-title{font-size:20px;font-weight:600;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.app-logo{font-size:24px}.connection-badge{font-size:12px;padding:4px 8px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;margin-left:12px}.connection-badge.connected{background:#34c759}.connection-badge.connecting{background:#ff9500}.connection-badge.disconnected{background:#ff3b30}.video-chat-layout{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;min-height:80vh}.video-chat-main{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f9f9f9}.video-chat-sidebar{width:340px;padding:20px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:16px;background:white;border-left:1px solid#eaeaea;overflow-y:auto}.sidebar-panel{background:#f9f9f9;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;padding:16px;-webkit-box-shadow:0 2px 8px rgba(0,0,0,.05);-moz-box-shadow:0 2px 8px rgba(0,0,0,.05);box-shadow:0 2px 8px rgba(0,0,0,.05)}.panel-header{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;font-size:16px;font-weight:600;margin-bottom:12px;color:#333}.panel-icon{font-size:18px}.system-textarea{width:100%;padding:12px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#ddd;font-family:inherit;resize:none;font-size:14px}.system-textarea:focus{outline:none;border-color:#007aff}.api-key-input-group{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.api-key-input{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:12px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;border:1px solid#ddd;font-family:inherit}.api-key-input:focus{outline:none;border-color:#007aff}.toggle-visibility-button{width:40px;background:#f0f0f0;border:1px solid#ddd;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer}.toggle-visibility-button:hover{background:#e5e5e5}.conversation-panel{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;max-height:400px}.messages-container{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:12px;padding-right:4px}.empty-state{height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;color:#999;text-align:center;font-size:14px;padding:20px}.message{padding:12px;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;max-width:100%}.message.user{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;background:#e1f5fe}.message.assistant{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;background:#f0f0f0}.message-header{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:4px;font-size:12px}.message-sender{font-weight:600}.message-time{color:#777}.message-text{font-size:14px;line-height:1.4;margin-bottom:8px}.message-audio-player{width:100%;height:36px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}'\n            }, void 0, false, void 0, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n        lineNumber: 206,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O3NFQUV0Qyw0RUFBQytFOzBHQUFjOztrRkFDYiw4REFBQ0E7a0hBQWM7OzBGQUNiLDhEQUFDVTswSEFBZTswRkFDYmtCLFFBQVEzRyxNQUFNLEtBQUssU0FBUyxRQUFROzs7Ozs7MEZBRXZDLDhEQUFDeUY7MEhBQWU7MEZBQ2JoRyxXQUFXa0gsUUFBUXBHLFNBQVM7Ozs7Ozs7Ozs7OztrRkFHakMsOERBQUN3RTtrSEFBYztrRkFBZ0I0QixRQUFRNUcsSUFBSTs7Ozs7O29FQUMxQzRHLFFBQVExRyxTQUFTLGtCQUNoQiw4REFBQ3JDLCtEQUFXQTt3RUFDVnFDLFdBQVcwRyxRQUFRMUcsU0FBUzt3RUFDNUJDLFVBQVV5RyxRQUFRekcsUUFBUTs7Ozs7Ozs7Ozs7OzJEQWhCM0IwRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTBRN0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW1pbmktdm9pY2UtZnJvbnRlbmQvLi9wYWdlcy9pbmRleC5qcz9iZWU3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgaW8gfSBmcm9tIFwic29ja2V0LmlvLWNsaWVudFwiO1xuaW1wb3J0IFZvaWNlQ2hhdCBmcm9tIFwiLi4vY29tcG9uZW50cy9Wb2ljZUNoYXRcIjtcbmltcG9ydCBBdWRpb1BsYXllciBmcm9tIFwiLi4vY29tcG9uZW50cy9BdWRpb1BsYXllclwiO1xuaW1wb3J0IEhlYWQgZnJvbSAnbmV4dC9oZWFkJztcbmltcG9ydCBUYWxraW5nSGVhZCBmcm9tIFwiLi4vY29tcG9uZW50cy9UYWxraW5nSGVhZFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBIb21lKCkge1xuICBjb25zdCBbc3lzdGVtSW5zdHIsIHNldFN5c3RlbUluc3RyXSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbYXBpS2V5LCBzZXRBcGlLZXldID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzaG93QXBpS2V5LCBzZXRTaG93QXBpS2V5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NvY2tldFN0YXR1cywgc2V0U29ja2V0U3RhdHVzXSA9IHVzZVN0YXRlKFwiZGlzY29ubmVjdGVkXCIpO1xuICBjb25zdCBzb2NrZXRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNoYXRDb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoW10pO1xuXG4gIC8vIENvbm5lY3QgdG8gc29ja2V0IG9uIGNvbXBvbmVudCBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47IC8vIFNTUiBndWFyZFxuXG4gICAgc2V0U29ja2V0U3RhdHVzKFwiY29ubmVjdGluZ1wiKTtcbiAgICBjb25zdCBzb2NrZXQgPSBpbyhwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfV1MgfHwgXCJodHRwOi8vbG9jYWxob3N0OjUwMDBcIik7XG4gICAgc29ja2V0UmVmLmN1cnJlbnQgPSBzb2NrZXQ7XG5cbiAgICBzb2NrZXQub24oXCJjb25uZWN0XCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW0Zyb250ZW5kXSBTb2NrZXQgY29ubmVjdGVkXCIpO1xuICAgICAgc2V0U29ja2V0U3RhdHVzKFwiY29ubmVjdGVkXCIpO1xuICAgIH0pO1xuXG4gICAgc29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIltGcm9udGVuZF0gU29ja2V0IGRpc2Nvbm5lY3RlZFwiKTtcbiAgICAgIHNldFNvY2tldFN0YXR1cyhcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICB9KTtcblxuICAgIHNvY2tldC5vbihcImNvbm5lY3RfZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIltGcm9udGVuZF0gU29ja2V0IGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycik7XG4gICAgICBzZXRTb2NrZXRTdGF0dXMoXCJkaXNjb25uZWN0ZWRcIik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgc29ja2V0Py5kaXNjb25uZWN0KCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIC8vIEF1dG8tc2Nyb2xsIHRvIGJvdHRvbSB3aGVuIG5ldyBtZXNzYWdlcyBhcnJpdmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoY2hhdENvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICBjaGF0Q29udGFpbmVyUmVmLmN1cnJlbnQuc2Nyb2xsVG9wID0gY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbEhlaWdodDtcbiAgICB9XG4gIH0sIFttZXNzYWdlc10pO1xuXG4gIC8vIEZvcm1hdCB0aW1lc3RhbXAgZm9yIG1lc3NhZ2VzXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAoZGF0ZSkgPT4ge1xuICAgIHJldHVybiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZyhbXSwgeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pO1xuICB9O1xuXG4gIC8vIEhhbmRsZSBuZXcgbWVzc2FnZVxuICBjb25zdCBoYW5kbGVOZXdNZXNzYWdlID0gKHRleHQsIHNlbmRlciwgYXVkaW9EYXRhID0gbnVsbCwgbWltZVR5cGUgPSBudWxsLCBpc1VwZGF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgc2V0TWVzc2FnZXMoKHByZXYpID0+IHtcbiAgICAgIC8vIElmIHRoaXMgaXMgYW4gdXBkYXRlIHRvIHRoZSBsYXN0IG1lc3NhZ2UgZnJvbSB0aGUgc2FtZSBzZW5kZXJcbiAgICAgIGlmIChpc1VwZGF0ZSAmJiBwcmV2Lmxlbmd0aCA+IDAgJiYgcHJldltwcmV2Lmxlbmd0aCAtIDFdLnNlbmRlciA9PT0gc2VuZGVyKSB7XG4gICAgICAgIGNvbnN0IG5ld01lc3NhZ2VzID0gWy4uLnByZXZdO1xuICAgICAgICBuZXdNZXNzYWdlc1tuZXdNZXNzYWdlcy5sZW5ndGggLSAxXSA9IHtcbiAgICAgICAgICAuLi5uZXdNZXNzYWdlc1tuZXdNZXNzYWdlcy5sZW5ndGggLSAxXSxcbiAgICAgICAgICB0ZXh0LFxuICAgICAgICAgIC4uLihhdWRpb0RhdGEgJiYgeyBhdWRpb0RhdGEsIG1pbWVUeXBlIH0pXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXdNZXNzYWdlcztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBhcyBhIG5ldyBtZXNzYWdlXG4gICAgICByZXR1cm4gWy4uLnByZXYsIHtcbiAgICAgICAgc2VuZGVyLFxuICAgICAgICB0ZXh0LFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIGF1ZGlvRGF0YSxcbiAgICAgICAgbWltZVR5cGVcbiAgICAgIH1dO1xuICAgIH0pO1xuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSW1wb3J0IFRocmVlLmpzIGR5bmFtaWNhbGx5IG9uIHRoZSBjbGllbnQgc2lkZVxuICAgIGNvbnN0IGxvYWRUaHJlZUpTID0gYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gT25seSBydW4gaW4gdGhlIGJyb3dzZXJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIExvYWQgVGhyZWUuanMgYW5kIHJlbGF0ZWQgbGlicmFyaWVzXG4gICAgICAgICAgY29uc3QgVEhSRUUgPSBhd2FpdCBpbXBvcnQoJ3RocmVlJyk7XG4gICAgICAgICAgY29uc3QgeyBHTFRGTG9hZGVyIH0gPSBhd2FpdCBpbXBvcnQoJ3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanMnKTtcbiAgICAgICAgICBjb25zdCB7IE9yYml0Q29udHJvbHMgfSA9IGF3YWl0IGltcG9ydCgndGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMnKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBUYWxraW5nSGVhZFxuICAgICAgICAgIGluaXRUYWxraW5nSGVhZChUSFJFRSwgR0xURkxvYWRlciwgT3JiaXRDb250cm9scyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBUaHJlZS5qczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIGxvYWRUaHJlZUpTKCk7XG4gIH0sIFtdKTtcbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIFRhbGtpbmdIZWFkXG4gIGNvbnN0IGluaXRUYWxraW5nSGVhZCA9IChUSFJFRSwgR0xURkxvYWRlciwgT3JiaXRDb250cm9scykgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcgVGFsa2luZ0hlYWQuLi4nKTtcbiAgICBcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFsa2luZy1oZWFkJyk7XG4gICAgaWYgKCFjb250YWluZXIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRhaW5lciBlbGVtZW50IG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBCYXNpYyBUaHJlZS5qcyBzZXR1cFxuICAgIGNvbnN0IHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7XG4gICAgc2NlbmUuYmFja2dyb3VuZCA9IG5ldyBUSFJFRS5Db2xvcigweGY1ZjVmNSk7XG4gICAgXG4gICAgLy8gQ2FtZXJhIHNldHVwXG4gICAgY29uc3QgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKDQ1LCBjb250YWluZXIuY2xpZW50V2lkdGggLyBjb250YWluZXIuY2xpZW50SGVpZ2h0LCAwLjEsIDEwMDApO1xuICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMS41LCAyLjApO1xuICAgIGNhbWVyYS5sb29rQXQoMCwgMS41LCAwKTtcbiAgICBcbiAgICAvLyBSZW5kZXJlclxuICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXIoeyBhbnRpYWxpYXM6IHRydWUgfSk7XG4gICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpO1xuICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChyZW5kZXJlci5kb21FbGVtZW50KTtcbiAgICBcbiAgICAvLyBMaWdodGluZ1xuICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDEpO1xuICAgIHNjZW5lLmFkZChhbWJpZW50TGlnaHQpO1xuICAgIFxuICAgIGNvbnN0IGRpcmVjdGlvbmFsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZmZiwgMSk7XG4gICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMCwgMSwgMSk7XG4gICAgc2NlbmUuYWRkKGRpcmVjdGlvbmFsTGlnaHQpO1xuICAgIFxuICAgIC8vIExvYWQgM0QgbW9kZWwgLSB1c2UgTmV4dC5qcyBwdWJsaWMgcGF0aFxuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBHTFRGTG9hZGVyKCk7XG4gICAgY29uc29sZS5sb2coJ0xvYWRpbmcgYXZhdGFyIG1vZGVsLi4uJyk7XG4gICAgXG4gICAgbG9hZGVyLmxvYWQoXG4gICAgICAnL3RhbGtpbmdoZWFkL2F2YXRhcnMvYnJ1bmV0dGUuZ2xiJyxcbiAgICAgIChnbHRmKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBsb2FkZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgICBjb25zdCBtb2RlbCA9IGdsdGYuc2NlbmU7XG4gICAgICAgIHNjZW5lLmFkZChtb2RlbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDZW50ZXIgbW9kZWwgYW5kIGFkanVzdCBzY2FsZSBpZiBuZWVkZWRcbiAgICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgICAgY29uc3QgY2VudGVyID0gYm94LmdldENlbnRlcihuZXcgVEhSRUUuVmVjdG9yMygpKTtcbiAgICAgICAgbW9kZWwucG9zaXRpb24ueCA9IC1jZW50ZXIueDtcbiAgICAgICAgbW9kZWwucG9zaXRpb24ueSA9IC1jZW50ZXIueTtcbiAgICAgICAgbW9kZWwucG9zaXRpb24ueiA9IC1jZW50ZXIuejtcbiAgICAgICAgXG4gICAgICAgIC8vIEFuaW1hdGlvbiBtaXhlciBmb3IgYW55IGFuaW1hdGlvbnNcbiAgICAgICAgaWYgKGdsdGYuYW5pbWF0aW9ucyAmJiBnbHRmLmFuaW1hdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IG1peGVyID0gbmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyKG1vZGVsKTtcbiAgICAgICAgICBjb25zdCBjbGlwID0gZ2x0Zi5hbmltYXRpb25zWzBdO1xuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IG1peGVyLmNsaXBBY3Rpb24oY2xpcCk7XG4gICAgICAgICAgYWN0aW9uLnBsYXkoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgYW5pbWF0aW9ucyBpbiByZW5kZXIgbG9vcFxuICAgICAgICAgIGNvbnN0IGNsb2NrID0gbmV3IFRIUkVFLkNsb2NrKCk7XG4gICAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gY2xvY2suZ2V0RGVsdGEoKTtcbiAgICAgICAgICAgIG1peGVyLnVwZGF0ZShkZWx0YSk7XG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGFuaW1hdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW1wbGUgcmVuZGVyIGxvb3AgaWYgbm8gYW5pbWF0aW9uc1xuICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGFuaW1hdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2ltcGxlIHNwZWFraW5nIGFuaW1hdGlvbiBmdW5jdGlvblxuICAgICAgICB3aW5kb3cuc3BlYWtXaXRoQXVkaW8gPSAoYXVkaW9EYXRhKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NwZWFraW5nIHdpdGggYXVkaW8gZGF0YSwgbGVuZ3RoOicsIGF1ZGlvRGF0YS5sZW5ndGgpO1xuICAgICAgICAgIC8vIEluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBhbmFseXplIHRoZSBhdWRpbyBhbmQgYW5pbWF0ZSB0aGUgZmFjZVxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIChwcm9ncmVzcykgPT4ge1xuICAgICAgICBjb25zdCBwZXJjZW50ID0gKHByb2dyZXNzLmxvYWRlZCAvIHByb2dyZXNzLnRvdGFsKSAqIDEwMDtcbiAgICAgICAgY29uc29sZS5sb2coYExvYWRpbmcgbW9kZWw6ICR7cGVyY2VudC50b0ZpeGVkKDIpfSVgKTtcbiAgICAgIH0sXG4gICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBtb2RlbDonLCBlcnJvcik7XG4gICAgICB9XG4gICAgKTtcbiAgICBcbiAgICAvLyBIYW5kbGUgd2luZG93IHJlc2l6ZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBjYW1lcmEuYXNwZWN0ID0gY29udGFpbmVyLmNsaWVudFdpZHRoIC8gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgICByZW5kZXJlci5zZXRTaXplKGNvbnRhaW5lci5jbGllbnRXaWR0aCwgY29udGFpbmVyLmNsaWVudEhlaWdodCk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2PlxuICAgICAgPEhlYWQ+XG4gICAgICAgIDx0aXRsZT5HZW1pbmkgVm9pY2UgQ2hhdDwvdGl0bGU+XG4gICAgICAgIDxtZXRhIG5hbWU9XCJkZXNjcmlwdGlvblwiIGNvbnRlbnQ9XCJHZW1pbmkgVm9pY2UgQ2hhdCB3aXRoIDNEIEF2YXRhclwiIC8+XG4gICAgICAgIDxsaW5rIGhyZWY9XCJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzUwMDs2MDA7NzAwJmRpc3BsYXk9c3dhcFwiIHJlbD1cInN0eWxlc2hlZXRcIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgXG4gICAgICA8bWFpbiBjbGFzc05hbWU9XCJ2aWRlby1jaGF0LWFwcFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcC1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFwcC1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJhcHAtdGl0bGVcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwLWxvZ29cIj7wn6SWPC9zcGFuPiBHZW1pbmkgVmlkZW8gQ2FsbFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Bjb25uZWN0aW9uLWJhZGdlICR7c29ja2V0U3RhdHVzfWB9PlxuICAgICAgICAgICAgICAgIHtzb2NrZXRTdGF0dXMgPT09IFwiY29ubmVjdGVkXCIgPyBcIk9ubGluZVwiIDogXG4gICAgICAgICAgICAgICAgIHNvY2tldFN0YXR1cyA9PT0gXCJjb25uZWN0aW5nXCIgPyBcIkNvbm5lY3RpbmcuLi5cIiA6IFxuICAgICAgICAgICAgICAgICBcIk9mZmxpbmVcIn1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9oMT5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tY2hhdC1sYXlvdXRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tY2hhdC1tYWluXCI+XG4gICAgICAgICAgICAgIHsvKiAzRCBUYWxraW5nIEhlYWQgQ29tcG9uZW50ICovfVxuICAgICAgICAgICAgICA8VGFsa2luZ0hlYWQgLz5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBWb2ljZSBDb250cm9scyAqL31cbiAgICAgICAgICAgICAgPFZvaWNlQ2hhdFxuICAgICAgICAgICAgICAgIHNvY2tldD17c29ja2V0UmVmfVxuICAgICAgICAgICAgICAgIHNvY2tldFN0YXR1cz17c29ja2V0U3RhdHVzfVxuICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9ucz17c3lzdGVtSW5zdHJ9XG4gICAgICAgICAgICAgICAgYXBpS2V5PXthcGlLZXl9XG4gICAgICAgICAgICAgICAgb25OZXdNZXNzYWdlPXtoYW5kbGVOZXdNZXNzYWdlfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidmlkZW8tY2hhdC1zaWRlYmFyXCI+XG4gICAgICAgICAgICAgIHsvKiBTeXN0ZW0gSW5zdHJ1Y3Rpb25zIFBhbmVsICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZGViYXItcGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwYW5lbC1pY29uXCI+4pqZ77iPPC9zcGFuPiBTeXN0ZW0gSW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICA8dGV4dGFyZWFcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInN5c3RlbS10ZXh0YXJlYVwiXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIG9wdGlvbmFsIHN5c3RlbSBpbnN0cnVjdGlvbnMgKGUuZy4gJ1lvdSBhcmUgYSBmcmllbmRseSBhc3Npc3RhbnQgd2hvIHNwZWFrcyBsaWtlIGEgcGlyYXRlJylcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e3N5c3RlbUluc3RyfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTeXN0ZW1JbnN0cihlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIHsvKiBBUEkgS2V5IFBhbmVsICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNpZGViYXItcGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwYW5lbC1pY29uXCI+8J+UkTwvc3Bhbj4gQVBJIEtleVxuICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcGkta2V5LWlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT17c2hvd0FwaUtleSA/IFwidGV4dFwiIDogXCJwYXNzd29yZFwifVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhcGkta2V5LWlucHV0XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIEdlbWluaSBBUEkga2V5XCJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2FwaUtleX1cbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRBcGlLZXkoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRvZ2dsZS12aXNpYmlsaXR5LWJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dBcGlLZXkoIXNob3dBcGlLZXkpfVxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICB7c2hvd0FwaUtleSA/IFwi8J+ZiFwiIDogXCLwn5GB77iPXCJ9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICB7LyogQ29udmVyc2F0aW9uIEhpc3RvcnkgKi99XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2lkZWJhci1wYW5lbCBjb252ZXJzYXRpb24tcGFuZWxcIj5cbiAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicGFuZWwtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJwYW5lbC1pY29uXCI+8J+SrDwvc3Bhbj4gQ29udmVyc2F0aW9uXG4gICAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2VzLWNvbnRhaW5lclwiIHJlZj17Y2hhdENvbnRhaW5lclJlZn0+XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPHA+U3RhcnQgYSBjb252ZXJzYXRpb24gYnkgY2xpY2tpbmcgdGhlIGNhbGwgYnV0dG9uPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtpbmRleH0gXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtZXNzYWdlICR7bWVzc2FnZS5zZW5kZXJ9YH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2UtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2UtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWVzc2FnZS1zZW5kZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnNlbmRlciA9PT0gXCJ1c2VyXCIgPyBcIllvdVwiIDogXCJHZW1pbmlcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWVzc2FnZS10aW1lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9ybWF0VGltZShtZXNzYWdlLnRpbWVzdGFtcCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlLXRleHRcIj57bWVzc2FnZS50ZXh0fTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5hdWRpb0RhdGEgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxBdWRpb1BsYXllciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvRGF0YT17bWVzc2FnZS5hdWRpb0RhdGF9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU9e21lc3NhZ2UubWltZVR5cGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9tYWluPlxuXG4gICAgICA8c3R5bGUganN4IGdsb2JhbD57YFxuICAgICAgICAqIHtcbiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBib2R5IHtcbiAgICAgICAgICBmb250LWZhbWlseTogJ0ludGVyJywgLWFwcGxlLXN5c3RlbSwgQmxpbmtNYWNTeXN0ZW1Gb250LCAnU2Vnb2UgVUknLCBSb2JvdG8sIE94eWdlbiwgVWJ1bnR1LCBDYW50YXJlbGwsICdPcGVuIFNhbnMnLCAnSGVsdmV0aWNhIE5ldWUnLCBzYW5zLXNlcmlmO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYyZjU7XG4gICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC52aWRlby1jaGF0LWFwcCB7XG4gICAgICAgICAgbWluLWhlaWdodDogMTAwdmg7XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgI2Y1ZjdmYSAwJSwgI2MzY2ZlMiAxMDAlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmFwcC1jb250YWluZXIge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1heC13aWR0aDogMTIwMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDMwcHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5hcHAtaGVhZGVyIHtcbiAgICAgICAgICBwYWRkaW5nOiAxNnB4IDI0cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzFlMWUxZTtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzMzMztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmFwcC10aXRsZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYXBwLWxvZ28ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNvbm5lY3Rpb24tYmFkZ2Uge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBwYWRkaW5nOiA0cHggOHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5jb25uZWN0aW9uLWJhZGdlLmNvbm5lY3RlZCB7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzM0Yzc1OTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNvbm5lY3Rpb24tYmFkZ2UuY29ubmVjdGluZyB7XG4gICAgICAgICAgYmFja2dyb3VuZDogI2ZmOTUwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmNvbm5lY3Rpb24tYmFkZ2UuZGlzY29ubmVjdGVkIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmYzYjMwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudmlkZW8tY2hhdC1sYXlvdXQge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWluLWhlaWdodDogODB2aDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnZpZGVvLWNoYXQtbWFpbiB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmOWY5Zjk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC52aWRlby1jaGF0LXNpZGViYXIge1xuICAgICAgICAgIHdpZHRoOiAzNDBweDtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDE2cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWFlYWVhO1xuICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zaWRlYmFyLXBhbmVsIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjlmOWY5O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnBhbmVsLWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgICAgY29sb3I6ICMzMzM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5wYW5lbC1pY29uIHtcbiAgICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5zeXN0ZW0tdGV4dGFyZWEge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7XG4gICAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICAgICAgcmVzaXplOiBub25lO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnN5c3RlbS10ZXh0YXJlYTpmb2N1cyB7XG4gICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdhZmY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5hcGkta2V5LWlucHV0LWdyb3VwIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYXBpLWtleS1pbnB1dCB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgICAgICAgIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuYXBpLWtleS1pbnB1dDpmb2N1cyB7XG4gICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDdhZmY7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50b2dnbGUtdmlzaWJpbGl0eS1idXR0b24ge1xuICAgICAgICAgIHdpZHRoOiA0MHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2RkZDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudG9nZ2xlLXZpc2liaWxpdHktYnV0dG9uOmhvdmVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZTVlNWU1O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuY29udmVyc2F0aW9uLXBhbmVsIHtcbiAgICAgICAgICBmbGV4OiAxO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBtYXgtaGVpZ2h0OiA0MDBweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1lc3NhZ2VzLWNvbnRhaW5lciB7XG4gICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgICAgcGFkZGluZy1yaWdodDogNHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAuZW1wdHktc3RhdGUge1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgY29sb3I6ICM5OTk7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWVzc2FnZSB7XG4gICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1lc3NhZ2UudXNlciB7XG4gICAgICAgICAgYWxpZ24tc2VsZjogZmxleC1lbmQ7XG4gICAgICAgICAgYmFja2dyb3VuZDogI2UxZjVmZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1lc3NhZ2UuYXNzaXN0YW50IHtcbiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5tZXNzYWdlLWhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1lc3NhZ2Utc2VuZGVyIHtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWVzc2FnZS10aW1lIHtcbiAgICAgICAgICBjb2xvcjogIzc3NztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLm1lc3NhZ2UtdGV4dCB7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAubWVzc2FnZS1hdWRpby1wbGF5ZXIge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMzZweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiaW8iLCJWb2ljZUNoYXQiLCJBdWRpb1BsYXllciIsIkhlYWQiLCJUYWxraW5nSGVhZCIsIkhvbWUiLCJzeXN0ZW1JbnN0ciIsInNldFN5c3RlbUluc3RyIiwiYXBpS2V5Iiwic2V0QXBpS2V5Iiwic2hvd0FwaUtleSIsInNldFNob3dBcGlLZXkiLCJzb2NrZXRTdGF0dXMiLCJzZXRTb2NrZXRTdGF0dXMiLCJzb2NrZXRSZWYiLCJjaGF0Q29udGFpbmVyUmVmIiwibWVzc2FnZXMiLCJzZXRNZXNzYWdlcyIsInNvY2tldCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfV1MiLCJjdXJyZW50Iiwib24iLCJjb25zb2xlIiwibG9nIiwiZXJyIiwiZXJyb3IiLCJkaXNjb25uZWN0Iiwic2Nyb2xsVG9wIiwic2Nyb2xsSGVpZ2h0IiwiZm9ybWF0VGltZSIsImRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJob3VyIiwibWludXRlIiwiaGFuZGxlTmV3TWVzc2FnZSIsInRleHQiLCJzZW5kZXIiLCJhdWRpb0RhdGEiLCJtaW1lVHlwZSIsImlzVXBkYXRlIiwicHJldiIsImxlbmd0aCIsIm5ld01lc3NhZ2VzIiwidGltZXN0YW1wIiwiRGF0ZSIsImxvYWRUaHJlZUpTIiwiVEhSRUUiLCJHTFRGTG9hZGVyIiwiT3JiaXRDb250cm9scyIsImluaXRUYWxraW5nSGVhZCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzY2VuZSIsIlNjZW5lIiwiYmFja2dyb3VuZCIsIkNvbG9yIiwiY2FtZXJhIiwiUGVyc3BlY3RpdmVDYW1lcmEiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsInBvc2l0aW9uIiwic2V0IiwibG9va0F0IiwicmVuZGVyZXIiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwiYWRkIiwiZGlyZWN0aW9uYWxMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJsb2FkZXIiLCJsb2FkIiwiZ2x0ZiIsIm1vZGVsIiwiYm94IiwiQm94MyIsInNldEZyb21PYmplY3QiLCJjZW50ZXIiLCJnZXRDZW50ZXIiLCJWZWN0b3IzIiwieCIsInkiLCJ6IiwiYW5pbWF0aW9ucyIsIm1peGVyIiwiQW5pbWF0aW9uTWl4ZXIiLCJjbGlwIiwiYWN0aW9uIiwiY2xpcEFjdGlvbiIsInBsYXkiLCJjbG9jayIsIkNsb2NrIiwiYW5pbWF0ZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRlbHRhIiwiZ2V0RGVsdGEiLCJ1cGRhdGUiLCJyZW5kZXIiLCJzcGVha1dpdGhBdWRpbyIsInByb2dyZXNzIiwicGVyY2VudCIsImxvYWRlZCIsInRvdGFsIiwidG9GaXhlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhc3BlY3QiLCJ1cGRhdGVQcm9qZWN0aW9uTWF0cml4IiwiZGl2IiwidGl0bGUiLCJtZXRhIiwibmFtZSIsImNvbnRlbnQiLCJsaW5rIiwiaHJlZiIsInJlbCIsIm1haW4iLCJoMSIsInNwYW4iLCJzeXN0ZW1JbnN0cnVjdGlvbnMiLCJvbk5ld01lc3NhZ2UiLCJoMyIsInRleHRhcmVhIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsInJvd3MiLCJpbnB1dCIsInR5cGUiLCJidXR0b24iLCJvbkNsaWNrIiwicmVmIiwicCIsIm1hcCIsIm1lc3NhZ2UiLCJpbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/index.js\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "next/head":
/*!****************************!*\
  !*** external "next/head" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/head");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "styled-jsx/style":
/*!***********************************!*\
  !*** external "styled-jsx/style" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = require("styled-jsx/style");

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "three":
/*!************************!*\
  !*** external "three" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("three");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();