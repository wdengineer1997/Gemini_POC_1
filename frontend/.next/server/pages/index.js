/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"./node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"./node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.js\");\n/* harmony import */ var _pages_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/index.js */ \"./pages/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_index_js__WEBPACK_IMPORTED_MODULE_5__]);\n_pages_index_js__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_js__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/index\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _pages_index_js__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTJnBhZ2U9JTJGJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZpbmRleC5qcyZhYnNvbHV0ZUFwcFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2FwcCZhYnNvbHV0ZURvY3VtZW50UGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZG9jdW1lbnQmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ2hDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDVjtBQUMxQztBQUM2QztBQUM3QztBQUNBLGlFQUFlLHdFQUFLLENBQUMsNENBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsNENBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsNENBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsNENBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLDRDQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLDRDQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsNENBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsNENBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsNENBQVE7QUFDekQ7QUFDTyx3QkFBd0IseUdBQWdCO0FBQy9DO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW1pbmktdm9pY2UtZnJvbnRlbmQvPzE0M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSBhcHAgYW5kIGRvY3VtZW50IG1vZHVsZXMuXG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fZG9jdW1lbnRcIjtcbmltcG9ydCBBcHAgZnJvbSBcInByaXZhdGUtbmV4dC1wYWdlcy9fYXBwXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9pbmRleC5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuZXhwb3J0IGNvbnN0IHJlcG9ydFdlYlZpdGFscyA9IGhvaXN0KHVzZXJsYW5kLCBcInJlcG9ydFdlYlZpdGFsc1wiKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgIHBhZ2U6IFwiL2luZGV4XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBBcHAsXG4gICAgICAgIERvY3VtZW50XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./components/AudioPlayer.js":
/*!***********************************!*\
  !*** ./components/AudioPlayer.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AudioPlayer)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _VoiceChat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VoiceChat */ \"./components/VoiceChat.js\");\n\n\n\nfunction AudioPlayer({ audioData, mimeType = \"audio/wav\" }) {\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!audioData) return;\n        // Create audio source\n        const audioBlob = new Blob([\n            Uint8Array.from(atob(audioData), (c)=>c.charCodeAt(0))\n        ], {\n            type: mimeType\n        });\n        const audioUrl = URL.createObjectURL(audioBlob);\n        if (audioRef.current) {\n            audioRef.current.src = audioUrl;\n            // Try to autoplay the audio\n            const playPromise = audioRef.current.play();\n            // Handle autoplay restrictions\n            if (playPromise !== undefined) {\n                playPromise.then(()=>{\n                    console.log(\"Audio autoplay started successfully\");\n                    // Make the TalkingHead speak when audio plays\n                    if (false) {}\n                }).catch((error)=>{\n                    console.warn(\"Audio autoplay prevented:\", error);\n                // Autoplay was prevented - user will need to press play manually\n                });\n            }\n            // Make the TalkingHead speak when audio plays manually\n            audioRef.current.onplay = ()=>{\n                if (false) {}\n            };\n            // Clean up when component unmounts\n            return ()=>{\n                URL.revokeObjectURL(audioUrl);\n            };\n        }\n    }, [\n        audioData,\n        mimeType\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n        ref: audioRef,\n        controls: true,\n        className: \"message-audio-player\",\n        preload: \"auto\"\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/AudioPlayer.js\",\n        lineNumber: 54,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL0F1ZGlvUGxheWVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEM7QUFDQTtBQUUzQixTQUFTRyxZQUFZLEVBQUVDLFNBQVMsRUFBRUMsV0FBVyxXQUFXLEVBQUU7SUFDdkUsTUFBTUMsV0FBV0wsNkNBQU1BLENBQUM7SUFFeEJELGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDSSxXQUFXO1FBRWhCLHNCQUFzQjtRQUN0QixNQUFNRyxZQUFZLElBQUlDLEtBQ3BCO1lBQUNDLFdBQVdDLElBQUksQ0FBQ0MsS0FBS1AsWUFBWVEsQ0FBQUEsSUFBS0EsRUFBRUMsVUFBVSxDQUFDO1NBQUksRUFDeEQ7WUFBRUMsTUFBTVQ7UUFBUztRQUVuQixNQUFNVSxXQUFXQyxJQUFJQyxlQUFlLENBQUNWO1FBRXJDLElBQUlELFNBQVNZLE9BQU8sRUFBRTtZQUNwQlosU0FBU1ksT0FBTyxDQUFDQyxHQUFHLEdBQUdKO1lBRXZCLDRCQUE0QjtZQUM1QixNQUFNSyxjQUFjZCxTQUFTWSxPQUFPLENBQUNHLElBQUk7WUFFekMsK0JBQStCO1lBQy9CLElBQUlELGdCQUFnQkUsV0FBVztnQkFDN0JGLFlBQ0dHLElBQUksQ0FBQztvQkFDSkMsUUFBUUMsR0FBRyxDQUFDO29CQUNaLDhDQUE4QztvQkFDOUMsSUFBSSxLQUFrRSxFQUFZLEVBRWpGO2dCQUNILEdBQ0NHLEtBQUssQ0FBQ0MsQ0FBQUE7b0JBQ0xMLFFBQVFNLElBQUksQ0FBQyw2QkFBNkJEO2dCQUMxQyxpRUFBaUU7Z0JBQ25FO1lBQ0o7WUFFQSx1REFBdUQ7WUFDdkR2QixTQUFTWSxPQUFPLENBQUNhLE1BQU0sR0FBRztnQkFDeEIsSUFBSSxLQUFrRSxFQUFZLEVBRWpGO1lBQ0g7WUFFQSxtQ0FBbUM7WUFDbkMsT0FBTztnQkFDTGYsSUFBSWdCLGVBQWUsQ0FBQ2pCO1lBQ3RCO1FBQ0Y7SUFDRixHQUFHO1FBQUNYO1FBQVdDO0tBQVM7SUFFeEIscUJBQ0UsOERBQUM0QjtRQUNDQyxLQUFLNUI7UUFDTDZCLFFBQVE7UUFDUkMsV0FBVTtRQUNWQyxTQUFROzs7Ozs7QUFHZCIsInNvdXJjZXMiOlsid2VicGFjazovL2dlbWluaS12b2ljZS1mcm9udGVuZC8uL2NvbXBvbmVudHMvQXVkaW9QbGF5ZXIuanM/MThhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGF1ZGlvRXZlbnRzIH0gZnJvbSAnLi9Wb2ljZUNoYXQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBdWRpb1BsYXllcih7IGF1ZGlvRGF0YSwgbWltZVR5cGUgPSAnYXVkaW8vd2F2JyB9KSB7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhdWRpb0RhdGEpIHJldHVybjtcbiAgICBcbiAgICAvLyBDcmVhdGUgYXVkaW8gc291cmNlXG4gICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoXG4gICAgICBbVWludDhBcnJheS5mcm9tKGF0b2IoYXVkaW9EYXRhKSwgYyA9PiBjLmNoYXJDb2RlQXQoMCkpXSwgXG4gICAgICB7IHR5cGU6IG1pbWVUeXBlIH1cbiAgICApO1xuICAgIGNvbnN0IGF1ZGlvVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChhdWRpb0Jsb2IpO1xuICAgIFxuICAgIGlmIChhdWRpb1JlZi5jdXJyZW50KSB7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LnNyYyA9IGF1ZGlvVXJsO1xuICAgICAgXG4gICAgICAvLyBUcnkgdG8gYXV0b3BsYXkgdGhlIGF1ZGlvXG4gICAgICBjb25zdCBwbGF5UHJvbWlzZSA9IGF1ZGlvUmVmLmN1cnJlbnQucGxheSgpO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgYXV0b3BsYXkgcmVzdHJpY3Rpb25zXG4gICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwbGF5UHJvbWlzZVxuICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXVkaW8gYXV0b3BsYXkgc3RhcnRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgICAvLyBNYWtlIHRoZSBUYWxraW5nSGVhZCBzcGVhayB3aGVuIGF1ZGlvIHBsYXlzXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB3aW5kb3cuc3BlYWtXaXRoQXVkaW8oYXVkaW9EYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJBdWRpbyBhdXRvcGxheSBwcmV2ZW50ZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEF1dG9wbGF5IHdhcyBwcmV2ZW50ZWQgLSB1c2VyIHdpbGwgbmVlZCB0byBwcmVzcyBwbGF5IG1hbnVhbGx5XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE1ha2UgdGhlIFRhbGtpbmdIZWFkIHNwZWFrIHdoZW4gYXVkaW8gcGxheXMgbWFudWFsbHlcbiAgICAgIGF1ZGlvUmVmLmN1cnJlbnQub25wbGF5ID0gKCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHdpbmRvdy5zcGVha1dpdGhBdWRpbyhhdWRpb0RhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChhdWRpb1VybCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSwgW2F1ZGlvRGF0YSwgbWltZVR5cGVdKTtcblxuICByZXR1cm4gKFxuICAgIDxhdWRpbyBcbiAgICAgIHJlZj17YXVkaW9SZWZ9IFxuICAgICAgY29udHJvbHMgXG4gICAgICBjbGFzc05hbWU9XCJtZXNzYWdlLWF1ZGlvLXBsYXllclwiXG4gICAgICBwcmVsb2FkPVwiYXV0b1wiXG4gICAgLz5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsImF1ZGlvRXZlbnRzIiwiQXVkaW9QbGF5ZXIiLCJhdWRpb0RhdGEiLCJtaW1lVHlwZSIsImF1ZGlvUmVmIiwiYXVkaW9CbG9iIiwiQmxvYiIsIlVpbnQ4QXJyYXkiLCJmcm9tIiwiYXRvYiIsImMiLCJjaGFyQ29kZUF0IiwidHlwZSIsImF1ZGlvVXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiY3VycmVudCIsInNyYyIsInBsYXlQcm9taXNlIiwicGxheSIsInVuZGVmaW5lZCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwid2luZG93Iiwic3BlYWtXaXRoQXVkaW8iLCJjYXRjaCIsImVycm9yIiwid2FybiIsIm9ucGxheSIsInJldm9rZU9iamVjdFVSTCIsImF1ZGlvIiwicmVmIiwiY29udHJvbHMiLCJjbGFzc05hbWUiLCJwcmVsb2FkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/AudioPlayer.js\n");

/***/ }),

/***/ "./components/TalkingHead.js":
/*!***********************************!*\
  !*** ./components/TalkingHead.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TalkingHead)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// TalkingHead.js - Component that renders and manages the 3D talking avatar\n\n\nfunction TalkingHead() {\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const modelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mixerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isAnimatingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const jawBoneRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioContextRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioAnalyserRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioSourceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationFrameRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const animationTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const blinkIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const randomMovementIntervalRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mouthControls = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        jawOpen: null,\n        mouthClose: null,\n        visemes: {},\n        lastUpdateTime: 0,\n        targetValue: 0,\n        currentValue: 0\n    });\n    const facialExpressionsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        eyeBlink: {\n            left: 0,\n            right: 0,\n            nextBlink: 0\n        },\n        eyeMovement: {\n            x: 0,\n            y: 0,\n            nextMove: 0\n        },\n        browMovement: {\n            value: 0,\n            nextMove: 0\n        },\n        mouthExpression: {\n            value: 0,\n            type: \"neutral\",\n            nextChange: 0\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!containerRef.current) return;\n        let scene, camera, renderer, mixer, clock;\n        const init = async ()=>{\n            try {\n                // Dynamically import Three.js (only in browser)\n                const THREE = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! three */ \"three\"));\n                const { GLTFLoader } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/three\").then(__webpack_require__.bind(__webpack_require__, /*! three/examples/jsm/loaders/GLTFLoader */ \"./node_modules/three/examples/jsm/loaders/GLTFLoader.js\"));\n                // Setup scene\n                scene = new THREE.Scene();\n                scene.background = new THREE.Color(0xf5f5f5);\n                // Setup camera\n                camera = new THREE.PerspectiveCamera(45, containerRef.current.clientWidth / containerRef.current.clientHeight, 0.1, 1000);\n                camera.position.set(0, 1.6, 1.8);\n                camera.lookAt(0, 1.4, 0);\n                // Setup renderer\n                renderer = new THREE.WebGLRenderer({\n                    antialias: true\n                });\n                renderer.setSize(containerRef.current.clientWidth, containerRef.current.clientHeight);\n                renderer.setPixelRatio(window.devicePixelRatio);\n                containerRef.current.appendChild(renderer.domElement);\n                // Setup lighting\n                const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n                scene.add(ambientLight);\n                const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n                directionalLight.position.set(0, 1, 1);\n                scene.add(directionalLight);\n                // Setup Audio Context for analysis\n                try {\n                    if (window.AudioContext || window.webkitAudioContext) {\n                        audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n                        audioAnalyserRef.current = audioContextRef.current.createAnalyser();\n                        audioAnalyserRef.current.fftSize = 256; // Smaller FFT size for better performance\n                    }\n                } catch (err) {\n                    console.warn(\"Audio Context could not be created:\", err);\n                }\n                // Load model\n                const loader = new GLTFLoader();\n                console.log(\"Loading 3D model from path:\", \"/talkinghead/avatars/brunette.glb\");\n                loader.load(\"/talkinghead/avatars/brunette.glb\", (gltf)=>{\n                    console.log(\"Model loaded successfully!\");\n                    const model = gltf.scene;\n                    scene.add(model);\n                    modelRef.current = model;\n                    // Log all bones to help identify mouth parts\n                    console.log(\"Bone structure:\");\n                    model.traverse((object)=>{\n                        if (object.isBone || object.isSkinnedMesh || object.isMesh) {\n                            console.log(`Found object: ${object.name}, type: ${object.type}`);\n                            // Look for morph targets (blendshapes) for mouth/face\n                            if (object.morphTargetDictionary) {\n                                console.log(\"Found morph targets:\", Object.keys(object.morphTargetDictionary));\n                                // Store references to mouth morphs if available\n                                const morphDict = object.morphTargetDictionary;\n                                if (morphDict) {\n                                    // Check for common morph target names used for mouth/speech\n                                    const jawOpenNames = [\n                                        \"jawOpen\",\n                                        \"mouthOpen\",\n                                        \"JawOpen\",\n                                        \"MouthOpen\",\n                                        \"jaw_open\"\n                                    ];\n                                    const mouthCloseNames = [\n                                        \"mouthClose\",\n                                        \"MouthClose\",\n                                        \"mouth_close\"\n                                    ];\n                                    // Store all viseme morph targets\n                                    for(const key in morphDict){\n                                        if (key.startsWith(\"viseme_\")) {\n                                            console.log(`Found viseme morph: ${key}`);\n                                            mouthControls.current.visemes[key] = {\n                                                mesh: object,\n                                                index: morphDict[key],\n                                                weight: 0\n                                            };\n                                        }\n                                    }\n                                    for (const name of jawOpenNames){\n                                        if (morphDict[name] !== undefined) {\n                                            console.log(`Found jaw open morph: ${name}`);\n                                            mouthControls.current.jawOpen = {\n                                                mesh: object,\n                                                index: morphDict[name]\n                                            };\n                                            break;\n                                        }\n                                    }\n                                    for (const name of mouthCloseNames){\n                                        if (morphDict[name] !== undefined) {\n                                            console.log(`Found mouth close morph: ${name}`);\n                                            mouthControls.current.mouthClose = {\n                                                mesh: object,\n                                                index: morphDict[name]\n                                            };\n                                            break;\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                        // Find jaw bone\n                        const name = (object.name || \"\").toLowerCase();\n                        if (name.includes(\"jaw\") || name.includes(\"mouth\") || name.includes(\"chin\") || name.includes(\"teeth\") || name.includes(\"tongue\")) {\n                            console.log(\"Found potential jaw/mouth bone:\", object.name);\n                            jawBoneRef.current = object;\n                        }\n                    });\n                    // Center model\n                    const box = new THREE.Box3().setFromObject(model);\n                    const center = box.getCenter(new THREE.Vector3());\n                    model.position.x = -center.x;\n                    model.position.y = -center.y + 0.1; // Slight offset upward\n                    model.position.z = -center.z;\n                    // Optional: adjust scale if needed\n                    model.scale.set(1.6, 1.6, 1.6); // Slightly larger model\n                    // Setup animations if available\n                    if (gltf.animations && gltf.animations.length > 0) {\n                        mixer = new THREE.AnimationMixer(model);\n                        mixerRef.current = mixer; // Store mixer reference\n                        const clip = gltf.animations[0];\n                        const action = mixer.clipAction(clip);\n                        action.play();\n                    }\n                    // Start animation loop\n                    clock = new THREE.Clock();\n                    animate();\n                    // Hook up audio listeners for global audio element\n                    const setupAudioListener = ()=>{\n                        const audioElements = document.querySelectorAll(\"audio\");\n                        if (audioElements.length > 0) {\n                            console.log(\"Found audio elements:\", audioElements.length);\n                            audioElements.forEach((audio)=>{\n                                // Remove previous listeners if any\n                                audio.removeEventListener(\"play\", onAudioPlay1);\n                                audio.removeEventListener(\"pause\", onAudioPause1);\n                                audio.removeEventListener(\"ended\", onAudioEnded1);\n                                // Add new listeners\n                                audio.addEventListener(\"play\", onAudioPlay1);\n                                audio.addEventListener(\"pause\", onAudioPause1);\n                                audio.addEventListener(\"ended\", onAudioEnded1);\n                                console.log(\"Added event listeners to audio element\");\n                            });\n                        } else {\n                            // If no audio elements found yet, try again later\n                            setTimeout(setupAudioListener, 1000);\n                        }\n                    };\n                    // Try to find audio elements once the DOM is loaded\n                    setupAudioListener();\n                    // Expose speaking function to window\n                    window.speakWithAudio = (audioData)=>{\n                        console.log(\"Speaking with audio data, length:\", audioData?.length || 0);\n                        // Cancel any previous animation\n                        stopAllAnimations();\n                        if (!audioData || audioData.length === 0) {\n                            resetMouthState();\n                            return;\n                        }\n                        // Set a flag indicating we're animating\n                        isAnimatingRef.current = true;\n                        // Start a pattern-based animation since we can't reliably decode the audio\n                        startPatternBasedAnimation(audioData);\n                        // Set a timeout to stop the animation after estimated audio duration\n                        // Estimate: ~44100 samples per second for audio (rough estimate)\n                        const estimatedDuration = audioData.length / 44100 * 1000;\n                        console.log(\"Estimated audio duration:\", estimatedDuration, \"ms\");\n                        if (animationTimeoutRef.current) {\n                            clearTimeout(animationTimeoutRef.current);\n                        }\n                        animationTimeoutRef.current = setTimeout(()=>{\n                            console.log(\"Animation timeout reached, stopping animation\");\n                            stopAllAnimations();\n                        }, estimatedDuration + 500); // Add small buffer\n                    };\n                    // New function to process viseme data from socket\n                    window.processVisemeData = (data)=>{\n                        console.log(\"Processing viseme data:\", data);\n                        // Cancel any previous animation\n                        stopAllAnimations();\n                        if (!data || !data.visemes || data.visemes.length === 0) {\n                            resetMouthState();\n                            return;\n                        }\n                        // Start viseme-based animation\n                        startVisemeBasedAnimation(data.visemes, data.duration || 3000);\n                    };\n                    // Start random eye blinking\n                    startRandomEyeBlink();\n                }, (progress)=>{\n                    const percent = progress.loaded / progress.total * 100;\n                    console.log(`Loading model: ${percent.toFixed(2)}%`);\n                }, (error)=>{\n                    console.error(\"Error loading model:\", error);\n                });\n                // Animation loop for rendering\n                function animate() {\n                    requestAnimationFrame(animate);\n                    if (mixer) {\n                        mixer.update(clock.getDelta());\n                    }\n                    renderer.render(scene, camera);\n                }\n                // Handle window resize\n                const handleResize1 = ()=>{\n                    if (!containerRef.current) return;\n                    camera.aspect = containerRef.current.clientWidth / containerRef.current.clientHeight;\n                    camera.updateProjectionMatrix();\n                    renderer.setSize(containerRef.current.clientWidth, containerRef.current.clientHeight);\n                };\n                window.addEventListener(\"resize\", handleResize1);\n                // Audio event handlers\n                function onAudioPlay1(e) {\n                    console.log(\"Audio playback started\");\n                    if (!isAnimatingRef.current) {\n                        isAnimatingRef.current = true;\n                        startLipSyncAnimation();\n                    }\n                }\n                function onAudioPause1(e) {\n                    console.log(\"Audio playback paused\");\n                    stopAllAnimations();\n                }\n                function onAudioEnded1(e) {\n                    console.log(\"Audio playback ended\");\n                    stopAllAnimations();\n                }\n                // Stop all animations and reset mouth state\n                function stopAllAnimations() {\n                    isAnimatingRef.current = false;\n                    if (animationFrameRef.current) {\n                        cancelAnimationFrame(animationFrameRef.current);\n                        animationFrameRef.current = null;\n                    }\n                    if (animationTimeoutRef.current) {\n                        clearTimeout(animationTimeoutRef.current);\n                        animationTimeoutRef.current = null;\n                    }\n                    resetMouthState();\n                }\n                // Reset all mouth controls to default state\n                function resetMouthState() {\n                    // Reset all viseme weights\n                    for(const key in mouthControls.current.visemes){\n                        const viseme = mouthControls.current.visemes[key];\n                        if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                            viseme.mesh.morphTargetInfluences[viseme.index] = 0;\n                        }\n                    }\n                    // Reset jaw open\n                    if (mouthControls.current.jawOpen) {\n                        const mesh = mouthControls.current.jawOpen.mesh;\n                        const index = mouthControls.current.jawOpen.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            mesh.morphTargetInfluences[index] = 0;\n                        }\n                    }\n                    // Reset mouth close\n                    if (mouthControls.current.mouthClose) {\n                        const mesh = mouthControls.current.mouthClose.mesh;\n                        const index = mouthControls.current.mouthClose.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            mesh.morphTargetInfluences[index] = 0;\n                        }\n                    }\n                    // Reset jaw bone rotation\n                    if (jawBoneRef.current && jawBoneRef.current.originalRotation) {\n                        jawBoneRef.current.rotation.x = jawBoneRef.current.originalRotation.x;\n                        jawBoneRef.current.rotation.y = jawBoneRef.current.originalRotation.y;\n                        jawBoneRef.current.rotation.z = jawBoneRef.current.originalRotation.z;\n                    }\n                }\n                // Start pattern-based animation (since audio decoding is failing)\n                function startPatternBasedAnimation(audioData) {\n                    const patternConfig = {\n                        startTime: Date.now(),\n                        wordDuration: 300,\n                        pauseDuration: 100,\n                        syllableCount: Math.ceil(audioData.length / 8000),\n                        currentSyllable: 0\n                    };\n                    console.log(\"Starting pattern-based animation with estimated syllables:\", patternConfig.syllableCount);\n                    // Start the animation loop\n                    animatePatternBasedLipSync(patternConfig);\n                }\n                // Pattern-based lip sync animation that doesn't rely on audio decoding\n                function animatePatternBasedLipSync(pattern) {\n                    if (!isAnimatingRef.current) {\n                        resetMouthState();\n                        return;\n                    }\n                    const now = Date.now();\n                    const elapsed = now - pattern.startTime;\n                    const syllableDuration = pattern.wordDuration / 2;\n                    const cycleDuration = syllableDuration + pattern.pauseDuration;\n                    const cyclePosition = elapsed % cycleDuration / syllableDuration;\n                    let openValue;\n                    if (cyclePosition < 1) {\n                        // Reduce the sine wave amplitude for smaller mouth movements\n                        openValue = Math.sin(cyclePosition * Math.PI) * 0.5; // Reduced from 0.8\n                    } else {\n                        openValue = 0;\n                    }\n                    // Apply a bit of random variation\n                    const variation = Math.random() * 0.1;\n                    openValue = Math.max(0, Math.min(1, openValue + variation));\n                    // Apply to visemes based on openness\n                    applyVisemesBasedOnOpenness(openValue);\n                    // Continue animation\n                    animationFrameRef.current = requestAnimationFrame(()=>{\n                        animatePatternBasedLipSync(pattern);\n                    });\n                }\n                // Start real-time audio-based lip sync animation using AudioContext API\n                function startLipSyncAnimation() {\n                    if (!audioContextRef.current || !audioAnalyserRef.current) {\n                        // Fallback to pattern-based animation if audio context not available\n                        console.log(\"No AudioContext available, using pattern-based animation\");\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                        return;\n                    }\n                    try {\n                        const audioElements = document.querySelectorAll(\"audio\");\n                        if (audioElements.length > 0) {\n                            // If we already have a source, disconnect it\n                            if (audioSourceRef.current) {\n                                try {\n                                    audioSourceRef.current.disconnect();\n                                } catch (e) {\n                                    console.warn(\"Error disconnecting previous audio source:\", e);\n                                }\n                            }\n                            // Create a media element source from the audio element\n                            audioSourceRef.current = audioContextRef.current.createMediaElementSource(audioElements[0]);\n                            audioSourceRef.current.connect(audioAnalyserRef.current);\n                            audioAnalyserRef.current.connect(audioContextRef.current.destination);\n                            // Configure analyzer\n                            audioAnalyserRef.current.fftSize = 256;\n                            audioAnalyserRef.current.smoothingTimeConstant = 0.8;\n                            // Start the animation loop\n                            animateAudioBasedLipSync();\n                        } else {\n                            console.warn(\"No audio elements found for lip sync\");\n                            // Fallback to pattern-based animation\n                            startPatternBasedAnimation(new Uint8Array(10000));\n                        }\n                    } catch (error) {\n                        console.error(\"Error setting up audio analysis:\", error);\n                        // Fallback to pattern-based animation\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                    }\n                }\n                // Real-time audio-based lip sync animation\n                function animateAudioBasedLipSync() {\n                    if (!isAnimatingRef.current || !audioAnalyserRef.current) {\n                        resetMouthState();\n                        return;\n                    }\n                    try {\n                        // Get frequency data\n                        const bufferLength = audioAnalyserRef.current.frequencyBinCount;\n                        const dataArray = new Uint8Array(bufferLength);\n                        audioAnalyserRef.current.getByteFrequencyData(dataArray);\n                        // Calculate average amplitude, focusing on speech frequencies (500-2000 Hz)\n                        // Approximate the frequency range based on fftSize and sample rate\n                        const sampleRate = audioContextRef.current.sampleRate || 44100;\n                        const binSize = sampleRate / (audioAnalyserRef.current.fftSize * 2);\n                        const lowBin = Math.floor(500 / binSize);\n                        const highBin = Math.floor(2000 / binSize);\n                        let sum = 0;\n                        let count = 0;\n                        for(let i = lowBin; i <= highBin && i < bufferLength; i++){\n                            sum += dataArray[i];\n                            count++;\n                        }\n                        // Normalize to 0-1 range\n                        const amplitude = count > 0 ? sum / count / 255 : 0;\n                        // Apply to visemes based on amplitude\n                        applyVisemesBasedOnOpenness(amplitude);\n                        // Continue animation\n                        animationFrameRef.current = requestAnimationFrame(animateAudioBasedLipSync);\n                    } catch (error) {\n                        console.error(\"Error in audio analysis:\", error);\n                        // Fallback to pattern-based animation\n                        startPatternBasedAnimation(new Uint8Array(10000));\n                    }\n                }\n                // Apply viseme weights based on mouth openness value\n                function applyVisemesBasedOnOpenness(openValue) {\n                    // Reset all viseme weights first\n                    for(const key in mouthControls.current.visemes){\n                        mouthControls.current.visemes[key].weight = 0;\n                    }\n                    // Set visemes based on openness value with reduced weights\n                    if (openValue < 0.1) {\n                        // Closed mouth\n                        setVisemeWeight(\"viseme_sil\", 0.8); // Reduced from 1.0\n                        setVisemeWeight(\"viseme_PP\", 0.2);\n                    } else if (openValue < 0.3) {\n                        // Slightly open\n                        setVisemeWeight(\"viseme_PP\", 0.4); // Reduced from 0.5\n                        setVisemeWeight(\"viseme_FF\", 0.4); // Reduced from 0.5\n                        setVisemeWeight(\"viseme_TH\", 0.2); // Reduced from 0.3\n                    } else if (openValue < 0.5) {\n                        // Medium open\n                        setVisemeWeight(\"viseme_DD\", 0.2); // Reduced from 0.3\n                        setVisemeWeight(\"viseme_kk\", 0.2); // Reduced from 0.3\n                        setVisemeWeight(\"viseme_CH\", 0.3); // Reduced from 0.4\n                        setVisemeWeight(\"viseme_E\", 0.4); // Reduced from 0.6\n                    } else if (openValue < 0.7) {\n                        // More open\n                        setVisemeWeight(\"viseme_aa\", 0.5); // Reduced from 0.7\n                        setVisemeWeight(\"viseme_E\", 0.2); // Reduced from 0.3\n                    } else {\n                        // Wide open\n                        setVisemeWeight(\"viseme_aa\", 0.6); // Reduced from 1.0\n                        setVisemeWeight(\"viseme_O\", 0.2); // Reduced from 0.3\n                    }\n                    // Apply all viseme weights with smooth interpolation\n                    for(const key in mouthControls.current.visemes){\n                        const viseme = mouthControls.current.visemes[key];\n                        if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                            const currentWeight = viseme.mesh.morphTargetInfluences[viseme.index] || 0;\n                            const targetWeight = viseme.weight || 0;\n                            // Smooth interpolation (LERP)\n                            const newWeight = currentWeight + (targetWeight - currentWeight) * 0.3;\n                            viseme.mesh.morphTargetInfluences[viseme.index] = newWeight;\n                        }\n                    }\n                    // Also apply to jawOpen as fallback with reduced value\n                    if (mouthControls.current.jawOpen) {\n                        const mesh = mouthControls.current.jawOpen.mesh;\n                        const index = mouthControls.current.jawOpen.index;\n                        if (mesh && mesh.morphTargetInfluences) {\n                            const current = mesh.morphTargetInfluences[index] || 0;\n                            // Scale down the target value for less opening\n                            const target = openValue * 0.6; // Added multiplier to reduce opening\n                            // Smooth interpolation\n                            mesh.morphTargetInfluences[index] = current + (target - current) * 0.3;\n                        }\n                    }\n                    // Apply to jaw bone rotation as well with reduced rotation\n                    if (jawBoneRef.current) {\n                        const jawBone = jawBoneRef.current;\n                        const originalRotation = jawBone.originalRotation || {\n                            x: jawBone.rotation.x,\n                            y: jawBone.rotation.y,\n                            z: jawBone.rotation.z\n                        };\n                        // Store original rotation if not already saved\n                        if (!jawBone.originalRotation) {\n                            jawBone.originalRotation = originalRotation;\n                        }\n                        // Apply rotation based on openness with reduced values\n                        const current = {\n                            x: jawBone.rotation.x,\n                            y: jawBone.rotation.y,\n                            z: jawBone.rotation.z\n                        };\n                        const target = {\n                            x: originalRotation.x + openValue * 0.1,\n                            y: originalRotation.y,\n                            z: originalRotation.z\n                        };\n                        // Smooth interpolation\n                        jawBone.rotation.x = current.x + (target.x - current.x) * 0.3;\n                        jawBone.rotation.y = current.y + (target.y - current.y) * 0.3;\n                        jawBone.rotation.z = current.z + (target.z - current.z) * 0.3;\n                    }\n                }\n                // Helper to set viseme weight if it exists\n                function setVisemeWeight(visemeName, weight) {\n                    if (mouthControls.current.visemes[visemeName]) {\n                        mouthControls.current.visemes[visemeName].weight = weight;\n                    }\n                }\n                function startRandomEyeBlink() {\n                    if (blinkIntervalRef.current) {\n                        clearInterval(blinkIntervalRef.current);\n                    }\n                    blinkIntervalRef.current = setInterval(()=>{\n                        if (!isAnimatingRef.current || Math.random() > 0.3) {\n                            modelRef.current.traverse((object)=>{\n                                if (object.morphTargetDictionary) {\n                                    if (object.morphTargetDictionary[\"eyeBlinkLeft\"] !== undefined) {\n                                        const index = object.morphTargetDictionary[\"eyeBlinkLeft\"];\n                                        object.morphTargetInfluences[index] = 1;\n                                        setTimeout(()=>{\n                                            object.morphTargetInfluences[index] = 0;\n                                        }, 150 + Math.random() * 100);\n                                    }\n                                    if (object.morphTargetDictionary[\"eyeBlinkRight\"] !== undefined) {\n                                        const index = object.morphTargetDictionary[\"eyeBlinkRight\"];\n                                        object.morphTargetInfluences[index] = 1;\n                                        setTimeout(()=>{\n                                            object.morphTargetInfluences[index] = 0;\n                                        }, 150 + Math.random() * 100);\n                                    }\n                                }\n                            });\n                        }\n                    }, 3000 + Math.random() * 4000);\n                }\n                function startVisemeBasedAnimation(visemes, duration) {\n                    console.log(`Starting viseme animation with ${visemes.length} visemes over ${duration}ms`);\n                    isAnimatingRef.current = true;\n                    const startTime = Date.now();\n                    function animateVisemes() {\n                        if (!isAnimatingRef.current) {\n                            resetMouthState();\n                            return;\n                        }\n                        const now = Date.now();\n                        const elapsed = now - startTime;\n                        const progress = Math.min(1, elapsed / duration);\n                        const visemeIndex = Math.min(Math.floor(progress * visemes.length), visemes.length - 1);\n                        const currentViseme = visemes[visemeIndex];\n                        for(const key in mouthControls.current.visemes){\n                            mouthControls.current.visemes[key].weight = 0;\n                        }\n                        if (currentViseme) {\n                            const visemeKey = `viseme_${currentViseme}`;\n                            if (mouthControls.current.visemes[visemeKey]) {\n                                // Reduce the viseme weight for more subtle movement\n                                mouthControls.current.visemes[visemeKey].weight = 0.7; // Reduced from 1.0\n                                // For certain visemes, add facial expressions with reduced values\n                                if ([\n                                    \"aa\",\n                                    \"O\"\n                                ].includes(currentViseme)) {\n                                    // Wide open mouth for these vowels, but less than before\n                                    if (mouthControls.current.jawOpen) {\n                                        const mesh = mouthControls.current.jawOpen.mesh;\n                                        const index = mouthControls.current.jawOpen.index;\n                                        if (mesh && mesh.morphTargetInfluences) {\n                                            mesh.morphTargetInfluences[index] = 0.5; // Reduced from 0.8\n                                        }\n                                    }\n                                } else if ([\n                                    \"E\",\n                                    \"I\"\n                                ].includes(currentViseme)) {\n                                    // Slightly open mouth for these vowels, reduced\n                                    if (mouthControls.current.jawOpen) {\n                                        const mesh = mouthControls.current.jawOpen.mesh;\n                                        const index = mouthControls.current.jawOpen.index;\n                                        if (mesh && mesh.morphTargetInfluences) {\n                                            mesh.morphTargetInfluences[index] = 0.3; // Reduced from 0.5\n                                        }\n                                    }\n                                }\n                                // Keep the random facial movements\n                                if (Math.random() > 0.9) {\n                                // ... existing random expression code ...\n                                }\n                            }\n                        }\n                        // Apply all viseme weights\n                        for(const key in mouthControls.current.visemes){\n                            const viseme = mouthControls.current.visemes[key];\n                            if (viseme.mesh && viseme.mesh.morphTargetInfluences) {\n                                const currentWeight = viseme.mesh.morphTargetInfluences[viseme.index] || 0;\n                                const targetWeight = viseme.weight || 0;\n                                // Smooth interpolation\n                                const newWeight = currentWeight + (targetWeight - currentWeight) * 0.3;\n                                viseme.mesh.morphTargetInfluences[viseme.index] = newWeight;\n                            }\n                        }\n                        // Continue if not complete\n                        if (progress < 1) {\n                            animationFrameRef.current = requestAnimationFrame(animateVisemes);\n                        } else {\n                            // Animation complete\n                            console.log(\"Viseme animation complete\");\n                            resetMouthState();\n                            isAnimatingRef.current = false;\n                        }\n                    }\n                    // Start the animation\n                    animateVisemes();\n                    // Safety timeout\n                    if (animationTimeoutRef.current) {\n                        clearTimeout(animationTimeoutRef.current);\n                    }\n                    animationTimeoutRef.current = setTimeout(()=>{\n                        console.log(\"Viseme animation safety timeout reached\");\n                        resetMouthState();\n                        isAnimatingRef.current = false;\n                    }, duration + 500);\n                }\n            } catch (error) {\n                console.error(\"Error initializing TalkingHead:\", error);\n            }\n        };\n        init();\n        // Cleanup\n        return ()=>{\n            if (renderer) {\n                renderer.dispose();\n                if (containerRef.current && containerRef.current.contains(renderer.domElement)) {\n                    containerRef.current.removeChild(renderer.domElement);\n                }\n            }\n            // Disconnect audio source if exists\n            if (audioSourceRef.current) {\n                try {\n                    audioSourceRef.current.disconnect();\n                } catch (e) {\n                    console.warn(\"Error disconnecting audio source:\", e);\n                }\n            }\n            if (animationFrameRef.current) {\n                cancelAnimationFrame(animationFrameRef.current);\n            }\n            if (animationTimeoutRef.current) {\n                clearTimeout(animationTimeoutRef.current);\n            }\n            // Remove event listeners from audio elements\n            const audioElements = document.querySelectorAll(\"audio\");\n            audioElements.forEach((audio)=>{\n                audio.removeEventListener(\"play\", onAudioPlay);\n                audio.removeEventListener(\"pause\", onAudioPause);\n                audio.removeEventListener(\"ended\", onAudioEnded);\n            });\n            window.removeEventListener(\"resize\", handleResize);\n            window.speakWithAudio = null;\n            // Add these to cleanup\n            if (blinkIntervalRef.current) {\n                clearInterval(blinkIntervalRef.current);\n            }\n            if (randomMovementIntervalRef.current) {\n                clearInterval(randomMovementIntervalRef.current);\n            }\n            window.processVisemeData = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        style: {\n            width: \"80%\",\n            height: \"400px\",\n            margin: \"30px auto\",\n            borderRadius: \"12px\",\n            overflow: \"hidden\",\n            backgroundColor: \"#f5f5f5\"\n        }\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/TalkingHead.js\",\n        lineNumber: 787,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bmQvLi9jb21wb25lbnRzL1RhbGtpbmdIZWFkLmpzPzcxMmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGFsa2luZ0hlYWQuanMgLSBDb21wb25lbnQgdGhhdCByZW5kZXJzIGFuZCBtYW5hZ2VzIHRoZSAzRCB0YWxraW5nIGF2YXRhclxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRhbGtpbmdIZWFkKCkge1xuICBjb25zdCBjb250YWluZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IG1vZGVsUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBtaXhlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgaXNBbmltYXRpbmdSZWYgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBqYXdCb25lUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBhdWRpb0NvbnRleHRSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGF1ZGlvQW5hbHlzZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGF1ZGlvU291cmNlUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBhbmltYXRpb25GcmFtZVJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYW5pbWF0aW9uVGltZW91dFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYmxpbmtJbnRlcnZhbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgcmFuZG9tTW92ZW1lbnRJbnRlcnZhbFJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbW91dGhDb250cm9scyA9IHVzZVJlZih7XG4gICAgamF3T3BlbjogbnVsbCxcbiAgICBtb3V0aENsb3NlOiBudWxsLFxuICAgIHZpc2VtZXM6IHt9LCAvLyBTdG9yZSBhbGwgdmlzZW1lIG1vcnBoIHRhcmdldHNcbiAgICBsYXN0VXBkYXRlVGltZTogMCxcbiAgICB0YXJnZXRWYWx1ZTogMCxcbiAgICBjdXJyZW50VmFsdWU6IDAsXG4gIH0pO1xuICBjb25zdCBmYWNpYWxFeHByZXNzaW9uc1JlZiA9IHVzZVJlZih7XG4gICAgZXllQmxpbms6IHsgbGVmdDogMCwgcmlnaHQ6IDAsIG5leHRCbGluazogMCB9LFxuICAgIGV5ZU1vdmVtZW50OiB7IHg6IDAsIHk6IDAsIG5leHRNb3ZlOiAwIH0sXG4gICAgYnJvd01vdmVtZW50OiB7IHZhbHVlOiAwLCBuZXh0TW92ZTogMCB9LFxuICAgIG1vdXRoRXhwcmVzc2lvbjogeyB2YWx1ZTogMCwgdHlwZTogJ25ldXRyYWwnLCBuZXh0Q2hhbmdlOiAwIH0sXG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjb250YWluZXJSZWYuY3VycmVudCkgcmV0dXJuO1xuICAgIFxuICAgIGxldCBzY2VuZSwgY2FtZXJhLCByZW5kZXJlciwgbWl4ZXIsIGNsb2NrO1xuICAgIFxuICAgIGNvbnN0IGluaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBEeW5hbWljYWxseSBpbXBvcnQgVGhyZWUuanMgKG9ubHkgaW4gYnJvd3NlcilcbiAgICAgICAgY29uc3QgVEhSRUUgPSBhd2FpdCBpbXBvcnQoJ3RocmVlJyk7XG4gICAgICAgIGNvbnN0IHsgR0xURkxvYWRlciB9ID0gYXdhaXQgaW1wb3J0KCd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXR1cCBzY2VuZVxuICAgICAgICBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgICAgICBzY2VuZS5iYWNrZ3JvdW5kID0gbmV3IFRIUkVFLkNvbG9yKDB4ZjVmNWY1KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldHVwIGNhbWVyYVxuICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIGNvbnRhaW5lclJlZi5jdXJyZW50LmNsaWVudFdpZHRoIC8gY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0LCAwLjEsIDEwMDApO1xuICAgICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDEuNiwgMS44KTtcbiAgICAgICAgY2FtZXJhLmxvb2tBdCgwLCAxLjQsIDApO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgcmVuZGVyZXJcbiAgICAgICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSB9KTtcbiAgICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRXaWR0aCwgY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgcmVuZGVyZXIuc2V0UGl4ZWxSYXRpbyh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIGNvbnRhaW5lclJlZi5jdXJyZW50LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbGlnaHRpbmdcbiAgICAgICAgY29uc3QgYW1iaWVudExpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweGZmZmZmZiwgMSk7XG4gICAgICAgIHNjZW5lLmFkZChhbWJpZW50TGlnaHQpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGlyZWN0aW9uYWxMaWdodCA9IG5ldyBUSFJFRS5EaXJlY3Rpb25hbExpZ2h0KDB4ZmZmZmZmLCAxKTtcbiAgICAgICAgZGlyZWN0aW9uYWxMaWdodC5wb3NpdGlvbi5zZXQoMCwgMSwgMSk7XG4gICAgICAgIHNjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldHVwIEF1ZGlvIENvbnRleHQgZm9yIGFuYWx5c2lzXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkge1xuICAgICAgICAgICAgYXVkaW9Db250ZXh0UmVmLmN1cnJlbnQgPSBuZXcgKHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkoKTtcbiAgICAgICAgICAgIGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudCA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZSA9IDI1NjsgLy8gU21hbGxlciBGRlQgc2l6ZSBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0F1ZGlvIENvbnRleHQgY291bGQgbm90IGJlIGNyZWF0ZWQ6JywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTG9hZCBtb2RlbFxuICAgICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyAzRCBtb2RlbCBmcm9tIHBhdGg6JywgJy90YWxraW5naGVhZC9hdmF0YXJzL2JydW5ldHRlLmdsYicpO1xuICAgICAgICBcbiAgICAgICAgbG9hZGVyLmxvYWQoXG4gICAgICAgICAgJy90YWxraW5naGVhZC9hdmF0YXJzL2JydW5ldHRlLmdsYicsXG4gICAgICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2RlbCBsb2FkZWQgc3VjY2Vzc2Z1bGx5IScpO1xuICAgICAgICAgICAgY29uc3QgbW9kZWwgPSBnbHRmLnNjZW5lO1xuICAgICAgICAgICAgc2NlbmUuYWRkKG1vZGVsKTtcbiAgICAgICAgICAgIG1vZGVsUmVmLmN1cnJlbnQgPSBtb2RlbDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTG9nIGFsbCBib25lcyB0byBoZWxwIGlkZW50aWZ5IG1vdXRoIHBhcnRzXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQm9uZSBzdHJ1Y3R1cmU6Jyk7XG4gICAgICAgICAgICBtb2RlbC50cmF2ZXJzZSgob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChvYmplY3QuaXNCb25lIHx8IG9iamVjdC5pc1NraW5uZWRNZXNoIHx8IG9iamVjdC5pc01lc2gpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRm91bmQgb2JqZWN0OiAke29iamVjdC5uYW1lfSwgdHlwZTogJHtvYmplY3QudHlwZX1gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBMb29rIGZvciBtb3JwaCB0YXJnZXRzIChibGVuZHNoYXBlcykgZm9yIG1vdXRoL2ZhY2VcbiAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIG1vcnBoIHRhcmdldHM6JywgT2JqZWN0LmtleXMob2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeSkpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBTdG9yZSByZWZlcmVuY2VzIHRvIG1vdXRoIG1vcnBocyBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1vcnBoRGljdCA9IG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnk7XG4gICAgICAgICAgICAgICAgICBpZiAobW9ycGhEaWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBjb21tb24gbW9ycGggdGFyZ2V0IG5hbWVzIHVzZWQgZm9yIG1vdXRoL3NwZWVjaFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBqYXdPcGVuTmFtZXMgPSBbJ2phd09wZW4nLCAnbW91dGhPcGVuJywgJ0phd09wZW4nLCAnTW91dGhPcGVuJywgJ2phd19vcGVuJ107XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdXRoQ2xvc2VOYW1lcyA9IFsnbW91dGhDbG9zZScsICdNb3V0aENsb3NlJywgJ21vdXRoX2Nsb3NlJ107XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTdG9yZSBhbGwgdmlzZW1lIG1vcnBoIHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbW9ycGhEaWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCd2aXNlbWVfJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCB2aXNlbWUgbW9ycGg6ICR7a2V5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaDogb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogbW9ycGhEaWN0W2tleV0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBvZiBqYXdPcGVuTmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAobW9ycGhEaWN0W25hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBqYXcgb3BlbiBtb3JwaDogJHtuYW1lfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1lc2g6IG9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG1vcnBoRGljdFtuYW1lXVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIG1vdXRoQ2xvc2VOYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChtb3JwaERpY3RbbmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEZvdW5kIG1vdXRoIGNsb3NlIG1vcnBoOiAke25hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3V0aENvbnRyb2xzLmN1cnJlbnQubW91dGhDbG9zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzaDogb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogbW9ycGhEaWN0W25hbWVdXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBGaW5kIGphdyBib25lXG4gICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAob2JqZWN0Lm5hbWUgfHwgJycpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBuYW1lLmluY2x1ZGVzKCdqYXcnKSB8fCBcbiAgICAgICAgICAgICAgICBuYW1lLmluY2x1ZGVzKCdtb3V0aCcpIHx8IFxuICAgICAgICAgICAgICAgIG5hbWUuaW5jbHVkZXMoJ2NoaW4nKSB8fFxuICAgICAgICAgICAgICAgIG5hbWUuaW5jbHVkZXMoJ3RlZXRoJykgfHxcbiAgICAgICAgICAgICAgICBuYW1lLmluY2x1ZGVzKCd0b25ndWUnKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgcG90ZW50aWFsIGphdy9tb3V0aCBib25lOicsIG9iamVjdC5uYW1lKTtcbiAgICAgICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQgPSBvYmplY3Q7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDZW50ZXIgbW9kZWxcbiAgICAgICAgICAgIGNvbnN0IGJveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChtb2RlbCk7XG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSBib3guZ2V0Q2VudGVyKG5ldyBUSFJFRS5WZWN0b3IzKCkpO1xuICAgICAgICAgICAgbW9kZWwucG9zaXRpb24ueCA9IC1jZW50ZXIueDtcbiAgICAgICAgICAgIG1vZGVsLnBvc2l0aW9uLnkgPSAtY2VudGVyLnkgKyAwLjE7IC8vIFNsaWdodCBvZmZzZXQgdXB3YXJkXG4gICAgICAgICAgICBtb2RlbC5wb3NpdGlvbi56ID0gLWNlbnRlci56O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPcHRpb25hbDogYWRqdXN0IHNjYWxlIGlmIG5lZWRlZFxuICAgICAgICAgICAgbW9kZWwuc2NhbGUuc2V0KDEuNiwgMS42LCAxLjYpOyAvLyBTbGlnaHRseSBsYXJnZXIgbW9kZWxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0dXAgYW5pbWF0aW9ucyBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIGlmIChnbHRmLmFuaW1hdGlvbnMgJiYgZ2x0Zi5hbmltYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgbWl4ZXIgPSBuZXcgVEhSRUUuQW5pbWF0aW9uTWl4ZXIobW9kZWwpO1xuICAgICAgICAgICAgICBtaXhlclJlZi5jdXJyZW50ID0gbWl4ZXI7IC8vIFN0b3JlIG1peGVyIHJlZmVyZW5jZVxuICAgICAgICAgICAgICBjb25zdCBjbGlwID0gZ2x0Zi5hbmltYXRpb25zWzBdO1xuICAgICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBtaXhlci5jbGlwQWN0aW9uKGNsaXApO1xuICAgICAgICAgICAgICBhY3Rpb24ucGxheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTdGFydCBhbmltYXRpb24gbG9vcFxuICAgICAgICAgICAgY2xvY2sgPSBuZXcgVEhSRUUuQ2xvY2soKTtcbiAgICAgICAgICAgIGFuaW1hdGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSG9vayB1cCBhdWRpbyBsaXN0ZW5lcnMgZm9yIGdsb2JhbCBhdWRpbyBlbGVtZW50XG4gICAgICAgICAgICBjb25zdCBzZXR1cEF1ZGlvTGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhdWRpbycpO1xuICAgICAgICAgICAgICBpZiAoYXVkaW9FbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZvdW5kIGF1ZGlvIGVsZW1lbnRzOicsIGF1ZGlvRWxlbWVudHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhdWRpb0VsZW1lbnRzLmZvckVhY2goYXVkaW8gPT4ge1xuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHByZXZpb3VzIGxpc3RlbmVycyBpZiBhbnlcbiAgICAgICAgICAgICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXknLCBvbkF1ZGlvUGxheSk7XG4gICAgICAgICAgICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdwYXVzZScsIG9uQXVkaW9QYXVzZSk7XG4gICAgICAgICAgICAgICAgICBhdWRpby5yZW1vdmVFdmVudExpc3RlbmVyKCdlbmRlZCcsIG9uQXVkaW9FbmRlZCk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgICBhdWRpby5hZGRFdmVudExpc3RlbmVyKCdwbGF5Jywgb25BdWRpb1BsYXkpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcigncGF1c2UnLCBvbkF1ZGlvUGF1c2UpO1xuICAgICAgICAgICAgICAgICAgYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvbkF1ZGlvRW5kZWQpO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkZWQgZXZlbnQgbGlzdGVuZXJzIHRvIGF1ZGlvIGVsZW1lbnQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBubyBhdWRpbyBlbGVtZW50cyBmb3VuZCB5ZXQsIHRyeSBhZ2FpbiBsYXRlclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoc2V0dXBBdWRpb0xpc3RlbmVyLCAxMDAwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgYXVkaW8gZWxlbWVudHMgb25jZSB0aGUgRE9NIGlzIGxvYWRlZFxuICAgICAgICAgICAgc2V0dXBBdWRpb0xpc3RlbmVyKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV4cG9zZSBzcGVha2luZyBmdW5jdGlvbiB0byB3aW5kb3dcbiAgICAgICAgICAgIHdpbmRvdy5zcGVha1dpdGhBdWRpbyA9IChhdWRpb0RhdGEpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NwZWFraW5nIHdpdGggYXVkaW8gZGF0YSwgbGVuZ3RoOicsIGF1ZGlvRGF0YT8ubGVuZ3RoIHx8IDApO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2FuY2VsIGFueSBwcmV2aW91cyBhbmltYXRpb25cbiAgICAgICAgICAgICAgc3RvcEFsbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmICghYXVkaW9EYXRhIHx8IGF1ZGlvRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXNldE1vdXRoU3RhdGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFNldCBhIGZsYWcgaW5kaWNhdGluZyB3ZSdyZSBhbmltYXRpbmdcbiAgICAgICAgICAgICAgaXNBbmltYXRpbmdSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTdGFydCBhIHBhdHRlcm4tYmFzZWQgYW5pbWF0aW9uIHNpbmNlIHdlIGNhbid0IHJlbGlhYmx5IGRlY29kZSB0aGUgYXVkaW9cbiAgICAgICAgICAgICAgc3RhcnRQYXR0ZXJuQmFzZWRBbmltYXRpb24oYXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFNldCBhIHRpbWVvdXQgdG8gc3RvcCB0aGUgYW5pbWF0aW9uIGFmdGVyIGVzdGltYXRlZCBhdWRpbyBkdXJhdGlvblxuICAgICAgICAgICAgICAvLyBFc3RpbWF0ZTogfjQ0MTAwIHNhbXBsZXMgcGVyIHNlY29uZCBmb3IgYXVkaW8gKHJvdWdoIGVzdGltYXRlKVxuICAgICAgICAgICAgICBjb25zdCBlc3RpbWF0ZWREdXJhdGlvbiA9IChhdWRpb0RhdGEubGVuZ3RoIC8gNDQxMDApICogMTAwMDtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VzdGltYXRlZCBhdWRpbyBkdXJhdGlvbjonLCBlc3RpbWF0ZWREdXJhdGlvbiwgJ21zJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbmltYXRpb24gdGltZW91dCByZWFjaGVkLCBzdG9wcGluZyBhbmltYXRpb24nKTtcbiAgICAgICAgICAgICAgICBzdG9wQWxsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICB9LCBlc3RpbWF0ZWREdXJhdGlvbiArIDUwMCk7IC8vIEFkZCBzbWFsbCBidWZmZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE5ldyBmdW5jdGlvbiB0byBwcm9jZXNzIHZpc2VtZSBkYXRhIGZyb20gc29ja2V0XG4gICAgICAgICAgICB3aW5kb3cucHJvY2Vzc1Zpc2VtZURhdGEgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUHJvY2Vzc2luZyB2aXNlbWUgZGF0YTonLCBkYXRhKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENhbmNlbCBhbnkgcHJldmlvdXMgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIHN0b3BBbGxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEudmlzZW1lcyB8fCBkYXRhLnZpc2VtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBTdGFydCB2aXNlbWUtYmFzZWQgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIHN0YXJ0VmlzZW1lQmFzZWRBbmltYXRpb24oZGF0YS52aXNlbWVzLCBkYXRhLmR1cmF0aW9uIHx8IDMwMDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RhcnQgcmFuZG9tIGV5ZSBibGlua2luZ1xuICAgICAgICAgICAgc3RhcnRSYW5kb21FeWVCbGluaygpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgKHByb2dyZXNzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwZXJjZW50ID0gKHByb2dyZXNzLmxvYWRlZCAvIHByb2dyZXNzLnRvdGFsKSAqIDEwMDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIG1vZGVsOiAke3BlcmNlbnQudG9GaXhlZCgyKX0lYCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgbW9kZWw6JywgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFuaW1hdGlvbiBsb29wIGZvciByZW5kZXJpbmdcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZSgpIHtcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKG1peGVyKSB7XG4gICAgICAgICAgICBtaXhlci51cGRhdGUoY2xvY2suZ2V0RGVsdGEoKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIHdpbmRvdyByZXNpemVcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzaXplID0gKCkgPT4ge1xuICAgICAgICAgIGlmICghY29udGFpbmVyUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICAgICAgICBcbiAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gY29udGFpbmVyUmVmLmN1cnJlbnQuY2xpZW50V2lkdGggLyBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgICByZW5kZXJlci5zZXRTaXplKGNvbnRhaW5lclJlZi5jdXJyZW50LmNsaWVudFdpZHRoLCBjb250YWluZXJSZWYuY3VycmVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGhhbmRsZVJlc2l6ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBdWRpbyBldmVudCBoYW5kbGVyc1xuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvUGxheShlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0F1ZGlvIHBsYXliYWNrIHN0YXJ0ZWQnKTtcbiAgICAgICAgICBpZiAoIWlzQW5pbWF0aW5nUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhcnRMaXBTeW5jQW5pbWF0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvUGF1c2UoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBwbGF5YmFjayBwYXVzZWQnKTtcbiAgICAgICAgICBzdG9wQWxsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmdW5jdGlvbiBvbkF1ZGlvRW5kZWQoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdWRpbyBwbGF5YmFjayBlbmRlZCcpO1xuICAgICAgICAgIHN0b3BBbGxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3AgYWxsIGFuaW1hdGlvbnMgYW5kIHJlc2V0IG1vdXRoIHN0YXRlXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BBbGxBbmltYXRpb25zKCkge1xuICAgICAgICAgIGlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgICAgICBhbmltYXRpb25UaW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXNldE1vdXRoU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUmVzZXQgYWxsIG1vdXRoIGNvbnRyb2xzIHRvIGRlZmF1bHQgc3RhdGVcbiAgICAgICAgZnVuY3Rpb24gcmVzZXRNb3V0aFN0YXRlKCkge1xuICAgICAgICAgIC8vIFJlc2V0IGFsbCB2aXNlbWUgd2VpZ2h0c1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzKSB7XG4gICAgICAgICAgICBjb25zdCB2aXNlbWUgPSBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1trZXldO1xuICAgICAgICAgICAgaWYgKHZpc2VtZS5tZXNoICYmIHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdmlzZW1lLmluZGV4XSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlc2V0IGphdyBvcGVuXG4gICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4ubWVzaDtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4uaW5kZXg7XG4gICAgICAgICAgICBpZiAobWVzaCAmJiBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZXNldCBtb3V0aCBjbG9zZVxuICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQubW91dGhDbG9zZSkge1xuICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5tb3V0aENsb3NlLm1lc2g7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5tb3V0aENsb3NlLmluZGV4O1xuICAgICAgICAgICAgaWYgKG1lc2ggJiYgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUmVzZXQgamF3IGJvbmUgcm90YXRpb25cbiAgICAgICAgICBpZiAoamF3Qm9uZVJlZi5jdXJyZW50ICYmIGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uKSB7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueCA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLng7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueSA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLnk7XG4gICAgICAgICAgICBqYXdCb25lUmVmLmN1cnJlbnQucm90YXRpb24ueiA9IGphd0JvbmVSZWYuY3VycmVudC5vcmlnaW5hbFJvdGF0aW9uLno7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFydCBwYXR0ZXJuLWJhc2VkIGFuaW1hdGlvbiAoc2luY2UgYXVkaW8gZGVjb2RpbmcgaXMgZmFpbGluZylcbiAgICAgICAgZnVuY3Rpb24gc3RhcnRQYXR0ZXJuQmFzZWRBbmltYXRpb24oYXVkaW9EYXRhKSB7XG4gICAgICAgICAgY29uc3QgcGF0dGVybkNvbmZpZyA9IHtcbiAgICAgICAgICAgIHN0YXJ0VGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIHdvcmREdXJhdGlvbjogMzAwLCAvLyBBdmVyYWdlIHdvcmQgZHVyYXRpb24gaW4gbXNcbiAgICAgICAgICAgIHBhdXNlRHVyYXRpb246IDEwMCwgLy8gQXZlcmFnZSBwYXVzZSBiZXR3ZWVuIHdvcmRzXG4gICAgICAgICAgICBzeWxsYWJsZUNvdW50OiBNYXRoLmNlaWwoYXVkaW9EYXRhLmxlbmd0aCAvIDgwMDApLCAvLyBSb3VnaCBlc3RpbWF0ZSBvZiBzeWxsYWJsZXMgYmFzZWQgb24gYXVkaW8gbGVuZ3RoXG4gICAgICAgICAgICBjdXJyZW50U3lsbGFibGU6IDBcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGFydGluZyBwYXR0ZXJuLWJhc2VkIGFuaW1hdGlvbiB3aXRoIGVzdGltYXRlZCBzeWxsYWJsZXM6JywgcGF0dGVybkNvbmZpZy5zeWxsYWJsZUNvdW50KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTdGFydCB0aGUgYW5pbWF0aW9uIGxvb3BcbiAgICAgICAgICBhbmltYXRlUGF0dGVybkJhc2VkTGlwU3luYyhwYXR0ZXJuQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUGF0dGVybi1iYXNlZCBsaXAgc3luYyBhbmltYXRpb24gdGhhdCBkb2Vzbid0IHJlbHkgb24gYXVkaW8gZGVjb2RpbmdcbiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZVBhdHRlcm5CYXNlZExpcFN5bmMocGF0dGVybikge1xuICAgICAgICAgIGlmICghaXNBbmltYXRpbmdSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIHBhdHRlcm4uc3RhcnRUaW1lO1xuICAgICAgICAgIGNvbnN0IHN5bGxhYmxlRHVyYXRpb24gPSBwYXR0ZXJuLndvcmREdXJhdGlvbiAvIDI7XG4gICAgICAgICAgY29uc3QgY3ljbGVEdXJhdGlvbiA9IHN5bGxhYmxlRHVyYXRpb24gKyBwYXR0ZXJuLnBhdXNlRHVyYXRpb247XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgY3ljbGVQb3NpdGlvbiA9IChlbGFwc2VkICUgY3ljbGVEdXJhdGlvbikgLyBzeWxsYWJsZUR1cmF0aW9uO1xuICAgICAgICAgIFxuICAgICAgICAgIGxldCBvcGVuVmFsdWU7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGN5Y2xlUG9zaXRpb24gPCAxKSB7XG4gICAgICAgICAgICAvLyBSZWR1Y2UgdGhlIHNpbmUgd2F2ZSBhbXBsaXR1ZGUgZm9yIHNtYWxsZXIgbW91dGggbW92ZW1lbnRzXG4gICAgICAgICAgICBvcGVuVmFsdWUgPSBNYXRoLnNpbihjeWNsZVBvc2l0aW9uICogTWF0aC5QSSkgKiAwLjU7IC8vIFJlZHVjZWQgZnJvbSAwLjhcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BlblZhbHVlID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgYSBiaXQgb2YgcmFuZG9tIHZhcmlhdGlvblxuICAgICAgICAgIGNvbnN0IHZhcmlhdGlvbiA9IE1hdGgucmFuZG9tKCkgKiAwLjE7XG4gICAgICAgICAgb3BlblZhbHVlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3BlblZhbHVlICsgdmFyaWF0aW9uKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgdG8gdmlzZW1lcyBiYXNlZCBvbiBvcGVubmVzc1xuICAgICAgICAgIGFwcGx5VmlzZW1lc0Jhc2VkT25PcGVubmVzcyhvcGVuVmFsdWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENvbnRpbnVlIGFuaW1hdGlvblxuICAgICAgICAgIGFuaW1hdGlvbkZyYW1lUmVmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgYW5pbWF0ZVBhdHRlcm5CYXNlZExpcFN5bmMocGF0dGVybik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXJ0IHJlYWwtdGltZSBhdWRpby1iYXNlZCBsaXAgc3luYyBhbmltYXRpb24gdXNpbmcgQXVkaW9Db250ZXh0IEFQSVxuICAgICAgICBmdW5jdGlvbiBzdGFydExpcFN5bmNBbmltYXRpb24oKSB7XG4gICAgICAgICAgaWYgKCFhdWRpb0NvbnRleHRSZWYuY3VycmVudCB8fCAhYXVkaW9BbmFseXNlclJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayB0byBwYXR0ZXJuLWJhc2VkIGFuaW1hdGlvbiBpZiBhdWRpbyBjb250ZXh0IG5vdCBhdmFpbGFibGVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBBdWRpb0NvbnRleHQgYXZhaWxhYmxlLCB1c2luZyBwYXR0ZXJuLWJhc2VkIGFuaW1hdGlvbicpO1xuICAgICAgICAgICAgc3RhcnRQYXR0ZXJuQmFzZWRBbmltYXRpb24obmV3IFVpbnQ4QXJyYXkoMTAwMDApKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhdWRpbycpO1xuICAgICAgICAgICAgaWYgKGF1ZGlvRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgYSBzb3VyY2UsIGRpc2Nvbm5lY3QgaXRcbiAgICAgICAgICAgICAgaWYgKGF1ZGlvU291cmNlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgYXVkaW9Tb3VyY2VSZWYuY3VycmVudC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBkaXNjb25uZWN0aW5nIHByZXZpb3VzIGF1ZGlvIHNvdXJjZTonLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG1lZGlhIGVsZW1lbnQgc291cmNlIGZyb20gdGhlIGF1ZGlvIGVsZW1lbnRcbiAgICAgICAgICAgICAgYXVkaW9Tb3VyY2VSZWYuY3VycmVudCA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZShhdWRpb0VsZW1lbnRzWzBdKTtcbiAgICAgICAgICAgICAgYXVkaW9Tb3VyY2VSZWYuY3VycmVudC5jb25uZWN0KGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudCk7XG4gICAgICAgICAgICAgIGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudC5jb25uZWN0KGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENvbmZpZ3VyZSBhbmFseXplclxuICAgICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZSA9IDI1NjtcbiAgICAgICAgICAgICAgYXVkaW9BbmFseXNlclJlZi5jdXJyZW50LnNtb290aGluZ1RpbWVDb25zdGFudCA9IDAuODtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFN0YXJ0IHRoZSBhbmltYXRpb24gbG9vcFxuICAgICAgICAgICAgICBhbmltYXRlQXVkaW9CYXNlZExpcFN5bmMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybignTm8gYXVkaW8gZWxlbWVudHMgZm91bmQgZm9yIGxpcCBzeW5jJyk7XG4gICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHBhdHRlcm4tYmFzZWQgYW5pbWF0aW9uXG4gICAgICAgICAgICAgIHN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uKG5ldyBVaW50OEFycmF5KDEwMDAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgYXVkaW8gYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gcGF0dGVybi1iYXNlZCBhbmltYXRpb25cbiAgICAgICAgICAgIHN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uKG5ldyBVaW50OEFycmF5KDEwMDAwKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWFsLXRpbWUgYXVkaW8tYmFzZWQgbGlwIHN5bmMgYW5pbWF0aW9uXG4gICAgICAgIGZ1bmN0aW9uIGFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYygpIHtcbiAgICAgICAgICBpZiAoIWlzQW5pbWF0aW5nUmVmLmN1cnJlbnQgfHwgIWF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBHZXQgZnJlcXVlbmN5IGRhdGFcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlckxlbmd0aCA9IGF1ZGlvQW5hbHlzZXJSZWYuY3VycmVudC5mcmVxdWVuY3lCaW5Db3VudDtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlckxlbmd0aCk7XG4gICAgICAgICAgICBhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEoZGF0YUFycmF5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgYW1wbGl0dWRlLCBmb2N1c2luZyBvbiBzcGVlY2ggZnJlcXVlbmNpZXMgKDUwMC0yMDAwIEh6KVxuICAgICAgICAgICAgLy8gQXBwcm94aW1hdGUgdGhlIGZyZXF1ZW5jeSByYW5nZSBiYXNlZCBvbiBmZnRTaXplIGFuZCBzYW1wbGUgcmF0ZVxuICAgICAgICAgICAgY29uc3Qgc2FtcGxlUmF0ZSA9IGF1ZGlvQ29udGV4dFJlZi5jdXJyZW50LnNhbXBsZVJhdGUgfHwgNDQxMDA7XG4gICAgICAgICAgICBjb25zdCBiaW5TaXplID0gc2FtcGxlUmF0ZSAvIChhdWRpb0FuYWx5c2VyUmVmLmN1cnJlbnQuZmZ0U2l6ZSAqIDIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBsb3dCaW4gPSBNYXRoLmZsb29yKDUwMCAvIGJpblNpemUpO1xuICAgICAgICAgICAgY29uc3QgaGlnaEJpbiA9IE1hdGguZmxvb3IoMjAwMCAvIGJpblNpemUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgc3VtID0gMDtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsb3dCaW47IGkgPD0gaGlnaEJpbiAmJiBpIDwgYnVmZmVyTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgc3VtICs9IGRhdGFBcnJheVtpXTtcbiAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTm9ybWFsaXplIHRvIDAtMSByYW5nZVxuICAgICAgICAgICAgY29uc3QgYW1wbGl0dWRlID0gY291bnQgPiAwID8gKHN1bSAvIGNvdW50KSAvIDI1NSA6IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFwcGx5IHRvIHZpc2VtZXMgYmFzZWQgb24gYW1wbGl0dWRlXG4gICAgICAgICAgICBhcHBseVZpc2VtZXNCYXNlZE9uT3Blbm5lc3MoYW1wbGl0dWRlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ29udGludWUgYW5pbWF0aW9uXG4gICAgICAgICAgICBhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50ID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGF1ZGlvIGFuYWx5c2lzOicsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHBhdHRlcm4tYmFzZWQgYW5pbWF0aW9uXG4gICAgICAgICAgICBzdGFydFBhdHRlcm5CYXNlZEFuaW1hdGlvbihuZXcgVWludDhBcnJheSgxMDAwMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQXBwbHkgdmlzZW1lIHdlaWdodHMgYmFzZWQgb24gbW91dGggb3Blbm5lc3MgdmFsdWVcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlWaXNlbWVzQmFzZWRPbk9wZW5uZXNzKG9wZW5WYWx1ZSkge1xuICAgICAgICAgIC8vIFJlc2V0IGFsbCB2aXNlbWUgd2VpZ2h0cyBmaXJzdFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzKSB7XG4gICAgICAgICAgICBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1trZXldLndlaWdodCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNldCB2aXNlbWVzIGJhc2VkIG9uIG9wZW5uZXNzIHZhbHVlIHdpdGggcmVkdWNlZCB3ZWlnaHRzXG4gICAgICAgICAgaWYgKG9wZW5WYWx1ZSA8IDAuMSkge1xuICAgICAgICAgICAgLy8gQ2xvc2VkIG1vdXRoXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9zaWwnLCAwLjgpOyAvLyBSZWR1Y2VkIGZyb20gMS4wXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9QUCcsIDAuMik7XG4gICAgICAgICAgfSBlbHNlIGlmIChvcGVuVmFsdWUgPCAwLjMpIHtcbiAgICAgICAgICAgIC8vIFNsaWdodGx5IG9wZW5cbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX1BQJywgMC40KTsgLy8gUmVkdWNlZCBmcm9tIDAuNVxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfRkYnLCAwLjQpOyAvLyBSZWR1Y2VkIGZyb20gMC41XG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9USCcsIDAuMik7IC8vIFJlZHVjZWQgZnJvbSAwLjNcbiAgICAgICAgICB9IGVsc2UgaWYgKG9wZW5WYWx1ZSA8IDAuNSkge1xuICAgICAgICAgICAgLy8gTWVkaXVtIG9wZW5cbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX0REJywgMC4yKTsgLy8gUmVkdWNlZCBmcm9tIDAuM1xuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfa2snLCAwLjIpOyAvLyBSZWR1Y2VkIGZyb20gMC4zXG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9DSCcsIDAuMyk7IC8vIFJlZHVjZWQgZnJvbSAwLjRcbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX0UnLCAwLjQpOyAvLyBSZWR1Y2VkIGZyb20gMC42XG4gICAgICAgICAgfSBlbHNlIGlmIChvcGVuVmFsdWUgPCAwLjcpIHtcbiAgICAgICAgICAgIC8vIE1vcmUgb3BlblxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfYWEnLCAwLjUpOyAvLyBSZWR1Y2VkIGZyb20gMC43XG4gICAgICAgICAgICBzZXRWaXNlbWVXZWlnaHQoJ3Zpc2VtZV9FJywgMC4yKTsgLy8gUmVkdWNlZCBmcm9tIDAuM1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBXaWRlIG9wZW5cbiAgICAgICAgICAgIHNldFZpc2VtZVdlaWdodCgndmlzZW1lX2FhJywgMC42KTsgLy8gUmVkdWNlZCBmcm9tIDEuMFxuICAgICAgICAgICAgc2V0VmlzZW1lV2VpZ2h0KCd2aXNlbWVfTycsIDAuMik7IC8vIFJlZHVjZWQgZnJvbSAwLjNcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQXBwbHkgYWxsIHZpc2VtZSB3ZWlnaHRzIHdpdGggc21vb3RoIGludGVycG9sYXRpb25cbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lcykge1xuICAgICAgICAgICAgY29uc3QgdmlzZW1lID0gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNba2V5XTtcbiAgICAgICAgICAgIGlmICh2aXNlbWUubWVzaCAmJiB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3VycmVudFdlaWdodCA9IHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t2aXNlbWUuaW5kZXhdIHx8IDA7XG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdlaWdodCA9IHZpc2VtZS53ZWlnaHQgfHwgMDtcbiAgICAgICAgICAgICAgLy8gU21vb3RoIGludGVycG9sYXRpb24gKExFUlApXG4gICAgICAgICAgICAgIGNvbnN0IG5ld1dlaWdodCA9IGN1cnJlbnRXZWlnaHQgKyAodGFyZ2V0V2VpZ2h0IC0gY3VycmVudFdlaWdodCkgKiAwLjM7XG4gICAgICAgICAgICAgIHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1t2aXNlbWUuaW5kZXhdID0gbmV3V2VpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBbHNvIGFwcGx5IHRvIGphd09wZW4gYXMgZmFsbGJhY2sgd2l0aCByZWR1Y2VkIHZhbHVlXG4gICAgICAgICAgaWYgKG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuKSB7XG4gICAgICAgICAgICBjb25zdCBtZXNoID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4ubWVzaDtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4uaW5kZXg7XG4gICAgICAgICAgICBpZiAobWVzaCAmJiBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdIHx8IDA7XG4gICAgICAgICAgICAgIC8vIFNjYWxlIGRvd24gdGhlIHRhcmdldCB2YWx1ZSBmb3IgbGVzcyBvcGVuaW5nXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IG9wZW5WYWx1ZSAqIDAuNjsgLy8gQWRkZWQgbXVsdGlwbGllciB0byByZWR1Y2Ugb3BlbmluZ1xuICAgICAgICAgICAgICAvLyBTbW9vdGggaW50ZXJwb2xhdGlvblxuICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSBjdXJyZW50ICsgKHRhcmdldCAtIGN1cnJlbnQpICogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBcHBseSB0byBqYXcgYm9uZSByb3RhdGlvbiBhcyB3ZWxsIHdpdGggcmVkdWNlZCByb3RhdGlvblxuICAgICAgICAgIGlmIChqYXdCb25lUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGphd0JvbmUgPSBqYXdCb25lUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFJvdGF0aW9uID0gamF3Qm9uZS5vcmlnaW5hbFJvdGF0aW9uIHx8IHsgXG4gICAgICAgICAgICAgIHg6IGphd0JvbmUucm90YXRpb24ueCwgXG4gICAgICAgICAgICAgIHk6IGphd0JvbmUucm90YXRpb24ueSwgXG4gICAgICAgICAgICAgIHo6IGphd0JvbmUucm90YXRpb24ueiBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIHJvdGF0aW9uIGlmIG5vdCBhbHJlYWR5IHNhdmVkXG4gICAgICAgICAgICBpZiAoIWphd0JvbmUub3JpZ2luYWxSb3RhdGlvbikge1xuICAgICAgICAgICAgICBqYXdCb25lLm9yaWdpbmFsUm90YXRpb24gPSBvcmlnaW5hbFJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBcHBseSByb3RhdGlvbiBiYXNlZCBvbiBvcGVubmVzcyB3aXRoIHJlZHVjZWQgdmFsdWVzXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0ge1xuICAgICAgICAgICAgICB4OiBqYXdCb25lLnJvdGF0aW9uLngsXG4gICAgICAgICAgICAgIHk6IGphd0JvbmUucm90YXRpb24ueSxcbiAgICAgICAgICAgICAgejogamF3Qm9uZS5yb3RhdGlvbi56XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB7XG4gICAgICAgICAgICAgIHg6IG9yaWdpbmFsUm90YXRpb24ueCArIG9wZW5WYWx1ZSAqIDAuMSwgLy8gUmVkdWNlZCBmcm9tIDAuMlxuICAgICAgICAgICAgICB5OiBvcmlnaW5hbFJvdGF0aW9uLnksXG4gICAgICAgICAgICAgIHo6IG9yaWdpbmFsUm90YXRpb24uelxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU21vb3RoIGludGVycG9sYXRpb25cbiAgICAgICAgICAgIGphd0JvbmUucm90YXRpb24ueCA9IGN1cnJlbnQueCArICh0YXJnZXQueCAtIGN1cnJlbnQueCkgKiAwLjM7XG4gICAgICAgICAgICBqYXdCb25lLnJvdGF0aW9uLnkgPSBjdXJyZW50LnkgKyAodGFyZ2V0LnkgLSBjdXJyZW50LnkpICogMC4zO1xuICAgICAgICAgICAgamF3Qm9uZS5yb3RhdGlvbi56ID0gY3VycmVudC56ICsgKHRhcmdldC56IC0gY3VycmVudC56KSAqIDAuMztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEhlbHBlciB0byBzZXQgdmlzZW1lIHdlaWdodCBpZiBpdCBleGlzdHNcbiAgICAgICAgZnVuY3Rpb24gc2V0VmlzZW1lV2VpZ2h0KHZpc2VtZU5hbWUsIHdlaWdodCkge1xuICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1t2aXNlbWVOYW1lXSkge1xuICAgICAgICAgICAgbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNbdmlzZW1lTmFtZV0ud2VpZ2h0ID0gd2VpZ2h0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc3RhcnRSYW5kb21FeWVCbGluaygpIHtcbiAgICAgICAgICBpZiAoYmxpbmtJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGJsaW5rSW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGJsaW5rSW50ZXJ2YWxSZWYuY3VycmVudCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaXNBbmltYXRpbmdSZWYuY3VycmVudCB8fCBNYXRoLnJhbmRvbSgpID4gMC4zKSB7XG4gICAgICAgICAgICAgIG1vZGVsUmVmLmN1cnJlbnQudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVsnZXllQmxpbmtMZWZ0J10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IG9iamVjdC5tb3JwaFRhcmdldERpY3Rpb25hcnlbJ2V5ZUJsaW5rTGVmdCddO1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2luZGV4XSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBvYmplY3QubW9ycGhUYXJnZXRJbmZsdWVuY2VzW2luZGV4XSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH0sIDE1MCArIE1hdGgucmFuZG9tKCkgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lm1vcnBoVGFyZ2V0RGljdGlvbmFyeVsnZXllQmxpbmtSaWdodCddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBvYmplY3QubW9ycGhUYXJnZXREaWN0aW9uYXJ5WydleWVCbGlua1JpZ2h0J107XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfSwgMTUwICsgTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAzMDAwICsgTWF0aC5yYW5kb20oKSAqIDQwMDApOyBcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc3RhcnRWaXNlbWVCYXNlZEFuaW1hdGlvbih2aXNlbWVzLCBkdXJhdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTdGFydGluZyB2aXNlbWUgYW5pbWF0aW9uIHdpdGggJHt2aXNlbWVzLmxlbmd0aH0gdmlzZW1lcyBvdmVyICR7ZHVyYXRpb259bXNgKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpc0FuaW1hdGluZ1JlZi5jdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIFxuICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGVWaXNlbWVzKCkge1xuICAgICAgICAgICAgaWYgKCFpc0FuaW1hdGluZ1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgIHJlc2V0TW91dGhTdGF0ZSgpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkID0gbm93IC0gc3RhcnRUaW1lO1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBNYXRoLm1pbigxLCBlbGFwc2VkIC8gZHVyYXRpb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2aXNlbWVJbmRleCA9IE1hdGgubWluKE1hdGguZmxvb3IocHJvZ3Jlc3MgKiB2aXNlbWVzLmxlbmd0aCksIHZpc2VtZXMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmlzZW1lID0gdmlzZW1lc1t2aXNlbWVJbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzKSB7XG4gICAgICAgICAgICAgIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW2tleV0ud2VpZ2h0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRWaXNlbWUpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmlzZW1lS2V5ID0gYHZpc2VtZV8ke2N1cnJlbnRWaXNlbWV9YDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQudmlzZW1lc1t2aXNlbWVLZXldKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVkdWNlIHRoZSB2aXNlbWUgd2VpZ2h0IGZvciBtb3JlIHN1YnRsZSBtb3ZlbWVudFxuICAgICAgICAgICAgICAgIG1vdXRoQ29udHJvbHMuY3VycmVudC52aXNlbWVzW3Zpc2VtZUtleV0ud2VpZ2h0ID0gMC43OyAvLyBSZWR1Y2VkIGZyb20gMS4wXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9yIGNlcnRhaW4gdmlzZW1lcywgYWRkIGZhY2lhbCBleHByZXNzaW9ucyB3aXRoIHJlZHVjZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgaWYgKFsnYWEnLCAnTyddLmluY2x1ZGVzKGN1cnJlbnRWaXNlbWUpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBXaWRlIG9wZW4gbW91dGggZm9yIHRoZXNlIHZvd2VscywgYnV0IGxlc3MgdGhhbiBiZWZvcmVcbiAgICAgICAgICAgICAgICAgIGlmIChtb3V0aENvbnRyb2xzLmN1cnJlbnQuamF3T3Blbikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNoID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4ubWVzaDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBtb3V0aENvbnRyb2xzLmN1cnJlbnQuamF3T3Blbi5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc2ggJiYgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICBtZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlc1tpbmRleF0gPSAwLjU7IC8vIFJlZHVjZWQgZnJvbSAwLjhcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoWydFJywgJ0knXS5pbmNsdWRlcyhjdXJyZW50VmlzZW1lKSkge1xuICAgICAgICAgICAgICAgICAgLy8gU2xpZ2h0bHkgb3BlbiBtb3V0aCBmb3IgdGhlc2Ugdm93ZWxzLCByZWR1Y2VkXG4gICAgICAgICAgICAgICAgICBpZiAobW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzaCA9IG1vdXRoQ29udHJvbHMuY3VycmVudC5qYXdPcGVuLm1lc2g7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbW91dGhDb250cm9scy5jdXJyZW50Lmphd09wZW4uaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXNoICYmIG1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbaW5kZXhdID0gMC4zOyAvLyBSZWR1Y2VkIGZyb20gMC41XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgcmFuZG9tIGZhY2lhbCBtb3ZlbWVudHNcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuOSkge1xuICAgICAgICAgICAgICAgICAgLy8gLi4uIGV4aXN0aW5nIHJhbmRvbSBleHByZXNzaW9uIGNvZGUgLi4uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFwcGx5IGFsbCB2aXNlbWUgd2VpZ2h0c1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXMpIHtcbiAgICAgICAgICAgICAgY29uc3QgdmlzZW1lID0gbW91dGhDb250cm9scy5jdXJyZW50LnZpc2VtZXNba2V5XTtcbiAgICAgICAgICAgICAgaWYgKHZpc2VtZS5tZXNoICYmIHZpc2VtZS5tZXNoLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRXZWlnaHQgPSB2aXNlbWUubWVzaC5tb3JwaFRhcmdldEluZmx1ZW5jZXNbdmlzZW1lLmluZGV4XSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdlaWdodCA9IHZpc2VtZS53ZWlnaHQgfHwgMDtcbiAgICAgICAgICAgICAgICAvLyBTbW9vdGggaW50ZXJwb2xhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1dlaWdodCA9IGN1cnJlbnRXZWlnaHQgKyAodGFyZ2V0V2VpZ2h0IC0gY3VycmVudFdlaWdodCkgKiAwLjM7XG4gICAgICAgICAgICAgICAgdmlzZW1lLm1lc2gubW9ycGhUYXJnZXRJbmZsdWVuY2VzW3Zpc2VtZS5pbmRleF0gPSBuZXdXZWlnaHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ29udGludWUgaWYgbm90IGNvbXBsZXRlXG4gICAgICAgICAgICBpZiAocHJvZ3Jlc3MgPCAxKSB7XG4gICAgICAgICAgICAgIGFuaW1hdGlvbkZyYW1lUmVmLmN1cnJlbnQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZVZpc2VtZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gQW5pbWF0aW9uIGNvbXBsZXRlXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdWaXNlbWUgYW5pbWF0aW9uIGNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgIHJlc2V0TW91dGhTdGF0ZSgpO1xuICAgICAgICAgICAgICBpc0FuaW1hdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFN0YXJ0IHRoZSBhbmltYXRpb25cbiAgICAgICAgICBhbmltYXRlVmlzZW1lcygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNhZmV0eSB0aW1lb3V0XG4gICAgICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Zpc2VtZSBhbmltYXRpb24gc2FmZXR5IHRpbWVvdXQgcmVhY2hlZCcpO1xuICAgICAgICAgICAgcmVzZXRNb3V0aFN0YXRlKCk7XG4gICAgICAgICAgICBpc0FuaW1hdGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgfSwgZHVyYXRpb24gKyA1MDApO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgVGFsa2luZ0hlYWQ6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgaW5pdCgpO1xuICAgIFxuICAgIC8vIENsZWFudXBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHJlbmRlcmVyKSB7XG4gICAgICAgIHJlbmRlcmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lclJlZi5jdXJyZW50ICYmIGNvbnRhaW5lclJlZi5jdXJyZW50LmNvbnRhaW5zKHJlbmRlcmVyLmRvbUVsZW1lbnQpKSB7XG4gICAgICAgICAgY29udGFpbmVyUmVmLmN1cnJlbnQucmVtb3ZlQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGlzY29ubmVjdCBhdWRpbyBzb3VyY2UgaWYgZXhpc3RzXG4gICAgICBpZiAoYXVkaW9Tb3VyY2VSZWYuY3VycmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF1ZGlvU291cmNlUmVmLmN1cnJlbnQuZGlzY29ubmVjdCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBkaXNjb25uZWN0aW5nIGF1ZGlvIHNvdXJjZTonLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoYW5pbWF0aW9uRnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25GcmFtZVJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGFuaW1hdGlvblRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoYW5pbWF0aW9uVGltZW91dFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBmcm9tIGF1ZGlvIGVsZW1lbnRzXG4gICAgICBjb25zdCBhdWRpb0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYXVkaW8nKTtcbiAgICAgIGF1ZGlvRWxlbWVudHMuZm9yRWFjaChhdWRpbyA9PiB7XG4gICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BsYXknLCBvbkF1ZGlvUGxheSk7XG4gICAgICAgIGF1ZGlvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgb25BdWRpb1BhdXNlKTtcbiAgICAgICAgYXVkaW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW5kZWQnLCBvbkF1ZGlvRW5kZWQpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpO1xuICAgICAgd2luZG93LnNwZWFrV2l0aEF1ZGlvID0gbnVsbDtcbiAgICAgIFxuICAgICAgLy8gQWRkIHRoZXNlIHRvIGNsZWFudXBcbiAgICAgIGlmIChibGlua0ludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChibGlua0ludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmFuZG9tTW92ZW1lbnRJbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwocmFuZG9tTW92ZW1lbnRJbnRlcnZhbFJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgd2luZG93LnByb2Nlc3NWaXNlbWVEYXRhID0gbnVsbDtcbiAgICB9O1xuICB9LCBbXSk7XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgXG4gICAgICByZWY9e2NvbnRhaW5lclJlZn0gXG4gICAgICBzdHlsZT17eyBcbiAgICAgICAgd2lkdGg6ICc4MCUnLFxuICAgICAgICBoZWlnaHQ6ICc0MDBweCcsXG4gICAgICAgIG1hcmdpbjogJzMwcHggYXV0bycsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzEycHgnLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmNWY1ZjUnXG4gICAgICB9fVxuICAgIC8+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJUYWxraW5nSGVhZCIsImNvbnRhaW5lclJlZiIsIm1vZGVsUmVmIiwibWl4ZXJSZWYiLCJpc0FuaW1hdGluZ1JlZiIsImphd0JvbmVSZWYiLCJhdWRpb0NvbnRleHRSZWYiLCJhdWRpb0FuYWx5c2VyUmVmIiwiYXVkaW9Tb3VyY2VSZWYiLCJhbmltYXRpb25GcmFtZVJlZiIsImFuaW1hdGlvblRpbWVvdXRSZWYiLCJibGlua0ludGVydmFsUmVmIiwicmFuZG9tTW92ZW1lbnRJbnRlcnZhbFJlZiIsIm1vdXRoQ29udHJvbHMiLCJqYXdPcGVuIiwibW91dGhDbG9zZSIsInZpc2VtZXMiLCJsYXN0VXBkYXRlVGltZSIsInRhcmdldFZhbHVlIiwiY3VycmVudFZhbHVlIiwiZmFjaWFsRXhwcmVzc2lvbnNSZWYiLCJleWVCbGluayIsImxlZnQiLCJyaWdodCIsIm5leHRCbGluayIsImV5ZU1vdmVtZW50IiwieCIsInkiLCJuZXh0TW92ZSIsImJyb3dNb3ZlbWVudCIsInZhbHVlIiwibW91dGhFeHByZXNzaW9uIiwidHlwZSIsIm5leHRDaGFuZ2UiLCJjdXJyZW50Iiwic2NlbmUiLCJjYW1lcmEiLCJyZW5kZXJlciIsIm1peGVyIiwiY2xvY2siLCJpbml0IiwiVEhSRUUiLCJHTFRGTG9hZGVyIiwiU2NlbmUiLCJiYWNrZ3JvdW5kIiwiQ29sb3IiLCJQZXJzcGVjdGl2ZUNhbWVyYSIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwicG9zaXRpb24iLCJzZXQiLCJsb29rQXQiLCJXZWJHTFJlbmRlcmVyIiwiYW50aWFsaWFzIiwic2V0U2l6ZSIsInNldFBpeGVsUmF0aW8iLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwiYXBwZW5kQ2hpbGQiLCJkb21FbGVtZW50IiwiYW1iaWVudExpZ2h0IiwiQW1iaWVudExpZ2h0IiwiYWRkIiwiZGlyZWN0aW9uYWxMaWdodCIsIkRpcmVjdGlvbmFsTGlnaHQiLCJBdWRpb0NvbnRleHQiLCJ3ZWJraXRBdWRpb0NvbnRleHQiLCJjcmVhdGVBbmFseXNlciIsImZmdFNpemUiLCJlcnIiLCJjb25zb2xlIiwid2FybiIsImxvYWRlciIsImxvZyIsImxvYWQiLCJnbHRmIiwibW9kZWwiLCJ0cmF2ZXJzZSIsIm9iamVjdCIsImlzQm9uZSIsImlzU2tpbm5lZE1lc2giLCJpc01lc2giLCJuYW1lIiwibW9ycGhUYXJnZXREaWN0aW9uYXJ5IiwiT2JqZWN0Iiwia2V5cyIsIm1vcnBoRGljdCIsImphd09wZW5OYW1lcyIsIm1vdXRoQ2xvc2VOYW1lcyIsImtleSIsInN0YXJ0c1dpdGgiLCJtZXNoIiwiaW5kZXgiLCJ3ZWlnaHQiLCJ1bmRlZmluZWQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYm94IiwiQm94MyIsInNldEZyb21PYmplY3QiLCJjZW50ZXIiLCJnZXRDZW50ZXIiLCJWZWN0b3IzIiwieiIsInNjYWxlIiwiYW5pbWF0aW9ucyIsImxlbmd0aCIsIkFuaW1hdGlvbk1peGVyIiwiY2xpcCIsImFjdGlvbiIsImNsaXBBY3Rpb24iLCJwbGF5IiwiQ2xvY2siLCJhbmltYXRlIiwic2V0dXBBdWRpb0xpc3RlbmVyIiwiYXVkaW9FbGVtZW50cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhdWRpbyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkF1ZGlvUGxheSIsIm9uQXVkaW9QYXVzZSIsIm9uQXVkaW9FbmRlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRUaW1lb3V0Iiwic3BlYWtXaXRoQXVkaW8iLCJhdWRpb0RhdGEiLCJzdG9wQWxsQW5pbWF0aW9ucyIsInJlc2V0TW91dGhTdGF0ZSIsInN0YXJ0UGF0dGVybkJhc2VkQW5pbWF0aW9uIiwiZXN0aW1hdGVkRHVyYXRpb24iLCJjbGVhclRpbWVvdXQiLCJwcm9jZXNzVmlzZW1lRGF0YSIsImRhdGEiLCJzdGFydFZpc2VtZUJhc2VkQW5pbWF0aW9uIiwiZHVyYXRpb24iLCJzdGFydFJhbmRvbUV5ZUJsaW5rIiwicHJvZ3Jlc3MiLCJwZXJjZW50IiwibG9hZGVkIiwidG90YWwiLCJ0b0ZpeGVkIiwiZXJyb3IiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ1cGRhdGUiLCJnZXREZWx0YSIsInJlbmRlciIsImhhbmRsZVJlc2l6ZSIsImFzcGVjdCIsInVwZGF0ZVByb2plY3Rpb25NYXRyaXgiLCJlIiwic3RhcnRMaXBTeW5jQW5pbWF0aW9uIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ2aXNlbWUiLCJtb3JwaFRhcmdldEluZmx1ZW5jZXMiLCJvcmlnaW5hbFJvdGF0aW9uIiwicm90YXRpb24iLCJwYXR0ZXJuQ29uZmlnIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsIndvcmREdXJhdGlvbiIsInBhdXNlRHVyYXRpb24iLCJzeWxsYWJsZUNvdW50IiwiTWF0aCIsImNlaWwiLCJjdXJyZW50U3lsbGFibGUiLCJhbmltYXRlUGF0dGVybkJhc2VkTGlwU3luYyIsInBhdHRlcm4iLCJlbGFwc2VkIiwic3lsbGFibGVEdXJhdGlvbiIsImN5Y2xlRHVyYXRpb24iLCJjeWNsZVBvc2l0aW9uIiwib3BlblZhbHVlIiwic2luIiwiUEkiLCJ2YXJpYXRpb24iLCJyYW5kb20iLCJtYXgiLCJtaW4iLCJhcHBseVZpc2VtZXNCYXNlZE9uT3Blbm5lc3MiLCJVaW50OEFycmF5IiwiZGlzY29ubmVjdCIsImNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZSIsImNvbm5lY3QiLCJkZXN0aW5hdGlvbiIsInNtb290aGluZ1RpbWVDb25zdGFudCIsImFuaW1hdGVBdWRpb0Jhc2VkTGlwU3luYyIsImJ1ZmZlckxlbmd0aCIsImZyZXF1ZW5jeUJpbkNvdW50IiwiZGF0YUFycmF5IiwiZ2V0Qnl0ZUZyZXF1ZW5jeURhdGEiLCJzYW1wbGVSYXRlIiwiYmluU2l6ZSIsImxvd0JpbiIsImZsb29yIiwiaGlnaEJpbiIsInN1bSIsImNvdW50IiwiaSIsImFtcGxpdHVkZSIsInNldFZpc2VtZVdlaWdodCIsImN1cnJlbnRXZWlnaHQiLCJ0YXJnZXRXZWlnaHQiLCJuZXdXZWlnaHQiLCJ0YXJnZXQiLCJqYXdCb25lIiwidmlzZW1lTmFtZSIsImNsZWFySW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImFuaW1hdGVWaXNlbWVzIiwidmlzZW1lSW5kZXgiLCJjdXJyZW50VmlzZW1lIiwidmlzZW1lS2V5IiwiZGlzcG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlQ2hpbGQiLCJkaXYiLCJyZWYiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luIiwiYm9yZGVyUmFkaXVzIiwib3ZlcmZsb3ciLCJiYWNrZ3JvdW5kQ29sb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./components/TalkingHead.js\n");

/***/ }),

/***/ "./components/VoiceChat.js":
/*!*********************************!*\
  !*** ./components/VoiceChat.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   audioEvents: () => (/* binding */ audioEvents),\n/* harmony export */   \"default\": () => (/* binding */ VoiceChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Simple event bus for audio playback status communication\nconst audioEvents = {\n    listeners: {},\n    subscribe: (event, callback)=>{\n        if (!audioEvents.listeners[event]) {\n            audioEvents.listeners[event] = [];\n        }\n        audioEvents.listeners[event].push(callback);\n        return ()=>{\n            audioEvents.listeners[event] = audioEvents.listeners[event].filter((cb)=>cb !== callback);\n        };\n    },\n    publish: (event, data)=>{\n        if (audioEvents.listeners[event]) {\n            audioEvents.listeners[event].forEach((callback)=>callback(data));\n        }\n    }\n};\nfunction VoiceChat({ socket, socketStatus, systemInstructions, apiKey, onNewMessage }) {\n    // UI States\n    const [micActive, setMicActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [listening, setListening] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [recording, setRecording] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [processing, setProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [responseReceived, setResponseReceived] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [audioPlaying, setAudioPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Technical refs\n    const recognitionRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const mediaRecorderRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioChunksRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const streamRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const timeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Listen for audio playback events\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const unsubscribeStart = audioEvents.subscribe(\"audio-play-start\", ()=>{\n            console.log(\"[VoiceChat] Detected audio playback start\");\n            setAudioPlaying(true);\n            // Stop recognition while audio is playing to prevent it from picking up the response\n            if (recognitionRef.current) {\n                try {\n                    recognitionRef.current.abort();\n                    recognitionRef.current = null;\n                } catch (e) {\n                    console.error(\"[VoiceChat] Error stopping recognition during audio playback:\", e);\n                }\n            }\n        });\n        const unsubscribeEnd = audioEvents.subscribe(\"audio-play-end\", ()=>{\n            console.log(\"[VoiceChat] Detected audio playback end\");\n            setAudioPlaying(false);\n            // Restart recognition after a short delay when audio ends\n            if (micActive && !processing) {\n                timeoutRef.current = setTimeout(()=>{\n                    if (micActive && !processing) {\n                        startSpeechRecognition();\n                    }\n                }, 500);\n            }\n        });\n        return ()=>{\n            unsubscribeStart();\n            unsubscribeEnd();\n        };\n    }, [\n        micActive,\n        processing\n    ]);\n    // Clean up resources when component unmounts\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        return ()=>{\n            cleanupResources();\n        };\n    }, []);\n    // Force restart recognition when response is received\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (responseReceived && micActive && !processing && !audioPlaying) {\n            console.log(\"[VoiceChat] Response received, restarting recognition\");\n            setResponseReceived(false);\n            // Allow a brief pause before restarting\n            timeoutRef.current = setTimeout(()=>{\n                if (micActive && !processing && !audioPlaying) {\n                    startSpeechRecognition();\n                }\n            }, 500);\n        }\n    }, [\n        responseReceived,\n        micActive,\n        processing,\n        audioPlaying\n    ]);\n    /**\n   * Full cleanup of all resources\n   */ const cleanupResources = ()=>{\n        // Clear any pending timeouts\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n        }\n        // Stop speech recognition\n        if (recognitionRef.current) {\n            try {\n                recognitionRef.current.abort();\n                recognitionRef.current = null;\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping recognition during cleanup:\", e);\n            }\n        }\n        // Stop media stream\n        if (streamRef.current) {\n            try {\n                streamRef.current.getTracks().forEach((track)=>track.stop());\n                streamRef.current = null;\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping stream during cleanup:\", e);\n            }\n        }\n        // Reset recorder\n        mediaRecorderRef.current = null;\n        audioChunksRef.current = [];\n    };\n    /**\n   * Toggle microphone on/off\n   */ const toggleMicrophone = ()=>{\n        if (micActive) {\n            stopMicrophone();\n        } else {\n            startMicrophone();\n        }\n    };\n    /**\n   * Start microphone and begin listening\n   */ const startMicrophone = ()=>{\n        if (socketStatus !== \"connected\") {\n            console.error(\"[VoiceChat] Cannot start mic - socket not connected\");\n            return;\n        }\n        console.log(\"[VoiceChat] Starting microphone\");\n        setMicActive(true);\n        // Small delay to ensure UI updates before starting recognition\n        setTimeout(()=>{\n            startSpeechRecognition();\n        }, 100);\n    };\n    /**\n   * Stop microphone and all associated processes\n   */ const stopMicrophone = ()=>{\n        console.log(\"[VoiceChat] Stopping microphone\");\n        setMicActive(false);\n        cleanupResources();\n        setListening(false);\n        setRecording(false);\n    };\n    /**\n   * Initialize and start the speech recognition\n   */ const startSpeechRecognition = ()=>{\n        // Don't start recognition if audio is playing\n        if (audioPlaying) {\n            console.log(\"[VoiceChat] Not starting recognition while audio is playing\");\n            return;\n        }\n        console.log(\"[VoiceChat] Starting speech recognition\");\n        // Clear any existing timeouts\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n        }\n        // Clean up any existing recognition\n        if (recognitionRef.current) {\n            try {\n                recognitionRef.current.abort();\n            } catch (e) {\n                console.error(\"[VoiceChat] Error aborting existing recognition:\", e);\n            }\n            recognitionRef.current = null;\n        }\n        const SpeechRecognition =  false && (0);\n        if (!SpeechRecognition) {\n            alert(\"Speech recognition is not supported in your browser.\");\n            setMicActive(false);\n            return;\n        }\n        try {\n            // Create a new recognition instance for each session\n            const recognition = new SpeechRecognition();\n            recognition.continuous = false;\n            recognition.interimResults = true;\n            recognition.lang = \"en-US\";\n            recognition.maxAlternatives = 1;\n            // Speech recognition started\n            recognition.onstart = ()=>{\n                console.log(\"[VoiceChat] Speech recognition started\");\n                setListening(true);\n                startAudioRecording();\n            };\n            // Handle speech recognition errors\n            recognition.onerror = (event)=>{\n                console.error(`[VoiceChat] Speech recognition error: ${event.error}`);\n                // No speech error is common and not fatal\n                if (event.error === \"no-speech\") {\n                    setListening(false);\n                    // If mic is still active, restart after a short delay\n                    if (micActive && !processing) {\n                        timeoutRef.current = setTimeout(()=>{\n                            if (micActive && !processing) {\n                                startSpeechRecognition();\n                            }\n                        }, 300);\n                    }\n                    return;\n                }\n                // Handle other errors\n                setListening(false);\n                // If not manually aborted and mic is still active, try to restart\n                if (event.error !== \"aborted\" && micActive && !processing) {\n                    timeoutRef.current = setTimeout(()=>{\n                        if (micActive && !processing) {\n                            startSpeechRecognition();\n                        }\n                    }, 500);\n                }\n            };\n            // Handle speech recognition ending\n            recognition.onend = ()=>{\n                console.log(\"[VoiceChat] Speech recognition ended normally\");\n                setListening(false);\n                // If mic should still be active and we're not processing, restart\n                if (micActive && !processing && !responseReceived) {\n                    timeoutRef.current = setTimeout(()=>{\n                        if (micActive && !processing) {\n                            startSpeechRecognition();\n                        }\n                    }, 300);\n                }\n            };\n            // Handle speech recognition results\n            recognition.onresult = async (event)=>{\n                let finalTranscript = \"\";\n                // Extract final transcript\n                for(let i = event.resultIndex; i < event.results.length; i++){\n                    const transcript = event.results[i][0].transcript;\n                    if (event.results[i].isFinal) {\n                        finalTranscript += transcript;\n                    }\n                }\n                // Process final speech result\n                if (finalTranscript.trim()) {\n                    console.log(\"[VoiceChat] Final transcript:\", finalTranscript);\n                    // Stop speech recognition to prevent capturing response\n                    try {\n                        recognition.abort();\n                        recognitionRef.current = null;\n                    } catch (e) {\n                        console.error(\"[VoiceChat] Error stopping recognition after result:\", e);\n                    }\n                    setListening(false);\n                    // Add user message to UI\n                    onNewMessage(finalTranscript, \"user\");\n                    // Get audio data and send to backend\n                    const audioData = await stopAudioRecordingAndGetData();\n                    if (audioData) {\n                        setProcessing(true);\n                        try {\n                            await sendAudioToBackend(audioData);\n                        } catch (err) {\n                            console.error(\"[VoiceChat] Error sending audio to backend:\", err);\n                            onNewMessage(`Error: ${err.message}`, \"assistant\");\n                        } finally{\n                            setProcessing(false);\n                            setResponseReceived(true);\n                        }\n                    } else {\n                        console.log(\"[VoiceChat] No valid audio data to send\");\n                        // If mic is still active, restart recognition\n                        if (micActive) {\n                            timeoutRef.current = setTimeout(()=>{\n                                if (micActive) {\n                                    startSpeechRecognition();\n                                }\n                            }, 300);\n                        }\n                    }\n                }\n            };\n            // Store and start\n            recognitionRef.current = recognition;\n            recognition.start();\n        } catch (e) {\n            console.error(\"[VoiceChat] Error setting up speech recognition:\", e);\n            setMicActive(false);\n            setListening(false);\n            // Try to restart after a short delay if this was a temporary error\n            if (micActive) {\n                timeoutRef.current = setTimeout(()=>{\n                    if (micActive) {\n                        startSpeechRecognition();\n                    }\n                }, 1000);\n            }\n        }\n    };\n    /**\n   * Start recording audio\n   */ const startAudioRecording = async ()=>{\n        // Clean up any existing recording first\n        if (streamRef.current) {\n            streamRef.current.getTracks().forEach((track)=>track.stop());\n            streamRef.current = null;\n        }\n        try {\n            console.log(\"[VoiceChat] Starting audio recording\");\n            const stream = await navigator.mediaDevices.getUserMedia({\n                audio: {\n                    echoCancellation: true,\n                    noiseSuppression: true,\n                    autoGainControl: true\n                }\n            });\n            streamRef.current = stream;\n            const mediaRecorder = new MediaRecorder(stream, {\n                mimeType: \"audio/webm\"\n            });\n            mediaRecorderRef.current = mediaRecorder;\n            audioChunksRef.current = [];\n            mediaRecorder.ondataavailable = (event)=>{\n                if (event.data && event.data.size > 0) {\n                    audioChunksRef.current.push(event.data);\n                }\n            };\n            mediaRecorder.start(100); // Collect data in 100ms chunks\n            setRecording(true);\n        } catch (e) {\n            console.error(\"[VoiceChat] Error starting audio recording:\", e);\n            alert(\"Could not access microphone. Please check permissions.\");\n            setMicActive(false);\n            setRecording(false);\n        }\n    };\n    /**\n   * Stop audio recording and return the audio data\n   */ const stopAudioRecordingAndGetData = ()=>{\n        return new Promise((resolve)=>{\n            if (!mediaRecorderRef.current || mediaRecorderRef.current.state !== \"recording\") {\n                console.log(\"[VoiceChat] No active recording to stop\");\n                resolve(null);\n                return;\n            }\n            console.log(\"[VoiceChat] Stopping audio recording and getting data\");\n            const handleStop = ()=>{\n                if (!audioChunksRef.current.length) {\n                    console.log(\"[VoiceChat] No audio chunks collected\");\n                    cleanupAudioResources();\n                    resolve(null);\n                    return;\n                }\n                const audioBlob = new Blob(audioChunksRef.current, {\n                    type: \"audio/webm\"\n                });\n                console.log(\"[VoiceChat] Audio recording complete, size:\", audioBlob.size, \"bytes\");\n                if (audioBlob.size < 1000) {\n                    console.log(\"[VoiceChat] Audio too small, ignoring\");\n                    cleanupAudioResources();\n                    resolve(null);\n                    return;\n                }\n                // Convert to base64\n                const reader = new FileReader();\n                reader.readAsDataURL(audioBlob);\n                reader.onloadend = ()=>{\n                    const base64data = reader.result.split(\",\")[1];\n                    cleanupAudioResources();\n                    resolve(base64data);\n                };\n                reader.onerror = ()=>{\n                    console.error(\"[VoiceChat] Error reading audio blob\");\n                    cleanupAudioResources();\n                    resolve(null);\n                };\n            };\n            const cleanupAudioResources = ()=>{\n                if (streamRef.current) {\n                    streamRef.current.getTracks().forEach((track)=>track.stop());\n                    streamRef.current = null;\n                }\n                mediaRecorderRef.current = null;\n                audioChunksRef.current = [];\n                setRecording(false);\n            };\n            // Set stop handler and stop recording\n            mediaRecorderRef.current.onstop = handleStop;\n            try {\n                mediaRecorderRef.current.stop();\n            } catch (e) {\n                console.error(\"[VoiceChat] Error stopping media recorder:\", e);\n                cleanupAudioResources();\n                resolve(null);\n            }\n        });\n    };\n    /**\n   * Send audio data to the backend\n   */ const sendAudioToBackend = async (audioData)=>{\n        if (!socket.current) {\n            throw new Error(\"Socket not connected\");\n        }\n        return new Promise((resolve, reject)=>{\n            const timeoutId = setTimeout(()=>{\n                reject(new Error(\"Request timed out after 90 seconds\"));\n            }, 90000);\n            console.log(\"[VoiceChat] Sending audio to backend\");\n            // Update user message to show sending state\n            onNewMessage(\"Sending your message...\", \"user\", null, null, true);\n            socket.current.emit(\"audioInput\", {\n                audioData,\n                systemInstruction: systemInstructions,\n                apiKey: apiKey.trim(),\n                mimeType: \"audio/webm\"\n            }, (response)=>{\n                clearTimeout(timeoutId);\n                if (!response) {\n                    reject(new Error(\"No response from server\"));\n                    return;\n                }\n                resolve(response);\n            });\n        }).then((data)=>{\n            // Update user message to show completion\n            onNewMessage(\"\\uD83C\\uDFA4 Message sent\", \"user\", null, null, true);\n            // Handle errors in response\n            if (data.error) {\n                throw new Error(data.error);\n            }\n            // Process response\n            const assistantText = data.text || \"[Audio response]\";\n            // Check for valid audio data\n            if (data.audioData) {\n                onNewMessage(assistantText, \"assistant\", data.audioData, data.mimeType || \"audio/wav\");\n            } else {\n                onNewMessage(assistantText, \"assistant\");\n            }\n        });\n    };\n    // Render UI\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"controls-container\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: `mic-button ${micActive ? \"mic-active\" : \"mic-inactive\"}`,\n                onClick: toggleMicrophone,\n                disabled: socketStatus !== \"connected\" || processing,\n                title: micActive ? \"Click to stop listening\" : \"Click to start listening\",\n                children: listening ? \"\\uD83C\\uDFA4\" : recording ? \"\\uD83D\\uDCC0\" : processing ? \"\" : \"\\uD83C\\uDF99\"\n            }, void 0, false, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                lineNumber: 531,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                className: \"control-text\",\n                children: socketStatus !== \"connected\" ? \" Waiting for server connection...\" : processing ? \" Processing your message...\" : recording && !listening ? \"\\uD83D\\uDCC0 Recording your message...\" : listening ? \"\\uD83C\\uDFA4 Listening to your voice...\" : micActive ? \"\\uD83C\\uDF99 Ready for your voice...\" : \"\\uD83C\\uDF99 Click the microphone to start\"\n            }, void 0, false, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n                lineNumber: 539,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/components/VoiceChat.js\",\n        lineNumber: 530,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTTtZQUVwRCw0QkFBNEI7WUFDNUIsSUFBSVAsS0FBSytCLEtBQUssRUFBRTtnQkFDZCxNQUFNLElBQUlxRSxNQUFNcEcsS0FBSytCLEtBQUs7WUFDNUI7WUFFQSxtQkFBbUI7WUFDbkIsTUFBTTRFLGdCQUFnQjNHLEtBQUs0RyxJQUFJLElBQUk7WUFFbkMsNkJBQTZCO1lBQzdCLElBQUk1RyxLQUFLaUUsU0FBUyxFQUFFO2dCQUNsQjFELGFBQ0VvRyxlQUNBLGFBQ0EzRyxLQUFLaUUsU0FBUyxFQUNkakUsS0FBS2lGLFFBQVEsSUFBSTtZQUVyQixPQUFPO2dCQUNMMUUsYUFBYW9HLGVBQWU7WUFDOUI7UUFDRjtJQUNGO0lBRUEsWUFBWTtJQUNaLHFCQUNFLDhEQUFDRTtRQUFJQyxXQUFVOzswQkFDYiw4REFBQ0M7Z0JBQ0NELFdBQVcsQ0FBQyxXQUFXLEVBQUV0RyxZQUFZLGVBQWUsZUFBZSxDQUFDO2dCQUNwRXdHLFNBQVN4RTtnQkFDVHlFLFVBQVU3RyxpQkFBaUIsZUFBZVU7Z0JBQzFDb0csT0FBTzFHLFlBQVksNEJBQTRCOzBCQUU5Q0UsWUFBWSxpQkFBT0UsWUFBWSxpQkFBT0UsYUFBYSxNQUFNOzs7Ozs7MEJBRTVELDhEQUFDcUc7Z0JBQUVMLFdBQVU7MEJBQ1YxRyxpQkFBaUIsY0FDZCx1Q0FDQVUsYUFDRSxpQ0FDQUYsYUFBYSxDQUFDRixZQUNaLDJDQUNBQSxZQUNFLDRDQUNBRixZQUNFLDBDQUNBOzs7Ozs7Ozs7Ozs7QUFLcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nZW1pbmktdm9pY2UtZnJvbnRlbmQvLi9jb21wb25lbnRzL1ZvaWNlQ2hhdC5qcz8xMDRlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG4vLyBTaW1wbGUgZXZlbnQgYnVzIGZvciBhdWRpbyBwbGF5YmFjayBzdGF0dXMgY29tbXVuaWNhdGlvblxuZXhwb3J0IGNvbnN0IGF1ZGlvRXZlbnRzID0ge1xuICBsaXN0ZW5lcnM6IHt9LFxuICBcbiAgc3Vic2NyaWJlOiAoZXZlbnQsIGNhbGxiYWNrKSA9PiB7XG4gICAgaWYgKCFhdWRpb0V2ZW50cy5saXN0ZW5lcnNbZXZlbnRdKSB7XG4gICAgICBhdWRpb0V2ZW50cy5saXN0ZW5lcnNbZXZlbnRdID0gW107XG4gICAgfVxuICAgIGF1ZGlvRXZlbnRzLmxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGF1ZGlvRXZlbnRzLmxpc3RlbmVyc1tldmVudF0gPSBhdWRpb0V2ZW50cy5saXN0ZW5lcnNbZXZlbnRdLmZpbHRlcihjYiA9PiBjYiAhPT0gY2FsbGJhY2spO1xuICAgIH07XG4gIH0sXG4gIFxuICBwdWJsaXNoOiAoZXZlbnQsIGRhdGEpID0+IHtcbiAgICBpZiAoYXVkaW9FdmVudHMubGlzdGVuZXJzW2V2ZW50XSkge1xuICAgICAgYXVkaW9FdmVudHMubGlzdGVuZXJzW2V2ZW50XS5mb3JFYWNoKGNhbGxiYWNrID0+IGNhbGxiYWNrKGRhdGEpKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFZvaWNlQ2hhdCh7IFxuICBzb2NrZXQsIFxuICBzb2NrZXRTdGF0dXMsIFxuICBzeXN0ZW1JbnN0cnVjdGlvbnMsIFxuICBhcGlLZXksIFxuICBvbk5ld01lc3NhZ2UgXG59KSB7XG4gIC8vIFVJIFN0YXRlc1xuICBjb25zdCBbbWljQWN0aXZlLCBzZXRNaWNBY3RpdmVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGlzdGVuaW5nLCBzZXRMaXN0ZW5pbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVjb3JkaW5nLCBzZXRSZWNvcmRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcHJvY2Vzc2luZywgc2V0UHJvY2Vzc2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtyZXNwb25zZVJlY2VpdmVkLCBzZXRSZXNwb25zZVJlY2VpdmVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2F1ZGlvUGxheWluZywgc2V0QXVkaW9QbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyBUZWNobmljYWwgcmVmc1xuICBjb25zdCByZWNvZ25pdGlvblJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgbWVkaWFSZWNvcmRlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYXVkaW9DaHVua3NSZWYgPSB1c2VSZWYoW10pO1xuICBjb25zdCBzdHJlYW1SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHRpbWVvdXRSZWYgPSB1c2VSZWYobnVsbCk7XG5cbiAgLy8gTGlzdGVuIGZvciBhdWRpbyBwbGF5YmFjayBldmVudHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB1bnN1YnNjcmliZVN0YXJ0ID0gYXVkaW9FdmVudHMuc3Vic2NyaWJlKCdhdWRpby1wbGF5LXN0YXJ0JywgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBEZXRlY3RlZCBhdWRpbyBwbGF5YmFjayBzdGFydFwiKTtcbiAgICAgIHNldEF1ZGlvUGxheWluZyh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gU3RvcCByZWNvZ25pdGlvbiB3aGlsZSBhdWRpbyBpcyBwbGF5aW5nIHRvIHByZXZlbnQgaXQgZnJvbSBwaWNraW5nIHVwIHRoZSByZXNwb25zZVxuICAgICAgaWYgKHJlY29nbml0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50LmFib3J0KCk7XG4gICAgICAgICAgcmVjb2duaXRpb25SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc3RvcHBpbmcgcmVjb2duaXRpb24gZHVyaW5nIGF1ZGlvIHBsYXliYWNrOlwiLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHVuc3Vic2NyaWJlRW5kID0gYXVkaW9FdmVudHMuc3Vic2NyaWJlKCdhdWRpby1wbGF5LWVuZCcsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gRGV0ZWN0ZWQgYXVkaW8gcGxheWJhY2sgZW5kXCIpO1xuICAgICAgc2V0QXVkaW9QbGF5aW5nKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gUmVzdGFydCByZWNvZ25pdGlvbiBhZnRlciBhIHNob3J0IGRlbGF5IHdoZW4gYXVkaW8gZW5kc1xuICAgICAgaWYgKG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZykge1xuICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAobWljQWN0aXZlICYmICFwcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YnNjcmliZVN0YXJ0KCk7XG4gICAgICB1bnN1YnNjcmliZUVuZCgpO1xuICAgIH07XG4gIH0sIFttaWNBY3RpdmUsIHByb2Nlc3NpbmddKTtcblxuICAvLyBDbGVhbiB1cCByZXNvdXJjZXMgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYW51cFJlc291cmNlcygpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBGb3JjZSByZXN0YXJ0IHJlY29nbml0aW9uIHdoZW4gcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAocmVzcG9uc2VSZWNlaXZlZCAmJiBtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcgJiYgIWF1ZGlvUGxheWluZykge1xuICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBSZXNwb25zZSByZWNlaXZlZCwgcmVzdGFydGluZyByZWNvZ25pdGlvblwiKTtcbiAgICAgIHNldFJlc3BvbnNlUmVjZWl2ZWQoZmFsc2UpO1xuICAgICAgXG4gICAgICAvLyBBbGxvdyBhIGJyaWVmIHBhdXNlIGJlZm9yZSByZXN0YXJ0aW5nXG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZyAmJiAhYXVkaW9QbGF5aW5nKSB7XG4gICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9LCA1MDApO1xuICAgIH1cbiAgfSwgW3Jlc3BvbnNlUmVjZWl2ZWQsIG1pY0FjdGl2ZSwgcHJvY2Vzc2luZywgYXVkaW9QbGF5aW5nXSk7XG5cbiAgLyoqXG4gICAqIEZ1bGwgY2xlYW51cCBvZiBhbGwgcmVzb3VyY2VzXG4gICAqL1xuICBjb25zdCBjbGVhbnVwUmVzb3VyY2VzID0gKCkgPT4ge1xuICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIHRpbWVvdXRzXG4gICAgaWYgKHRpbWVvdXRSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYuY3VycmVudCk7XG4gICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFN0b3Agc3BlZWNoIHJlY29nbml0aW9uXG4gICAgaWYgKHJlY29nbml0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICAgICAgcmVjb2duaXRpb25SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBzdG9wcGluZyByZWNvZ25pdGlvbiBkdXJpbmcgY2xlYW51cDpcIiwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcCBtZWRpYSBzdHJlYW1cbiAgICBpZiAoc3RyZWFtUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcbiAgICAgICAgc3RyZWFtUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc3RvcHBpbmcgc3RyZWFtIGR1cmluZyBjbGVhbnVwOlwiLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZXNldCByZWNvcmRlclxuICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgYXVkaW9DaHVua3NSZWYuY3VycmVudCA9IFtdO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUb2dnbGUgbWljcm9waG9uZSBvbi9vZmZcbiAgICovXG4gIGNvbnN0IHRvZ2dsZU1pY3JvcGhvbmUgPSAoKSA9PiB7XG4gICAgaWYgKG1pY0FjdGl2ZSkge1xuICAgICAgc3RvcE1pY3JvcGhvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhcnRNaWNyb3Bob25lKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTdGFydCBtaWNyb3Bob25lIGFuZCBiZWdpbiBsaXN0ZW5pbmdcbiAgICovXG4gIGNvbnN0IHN0YXJ0TWljcm9waG9uZSA9ICgpID0+IHtcbiAgICBpZiAoc29ja2V0U3RhdHVzICE9PSBcImNvbm5lY3RlZFwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gQ2Fubm90IHN0YXJ0IG1pYyAtIHNvY2tldCBub3QgY29ubmVjdGVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3RhcnRpbmcgbWljcm9waG9uZVwiKTtcbiAgICBzZXRNaWNBY3RpdmUodHJ1ZSk7XG4gICAgXG4gICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIFVJIHVwZGF0ZXMgYmVmb3JlIHN0YXJ0aW5nIHJlY29nbml0aW9uXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgfSwgMTAwKTtcbiAgfTtcblxuICAvKipcbiAgICogU3RvcCBtaWNyb3Bob25lIGFuZCBhbGwgYXNzb2NpYXRlZCBwcm9jZXNzZXNcbiAgICovXG4gIGNvbnN0IHN0b3BNaWNyb3Bob25lID0gKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3RvcHBpbmcgbWljcm9waG9uZVwiKTtcbiAgICBzZXRNaWNBY3RpdmUoZmFsc2UpO1xuICAgIGNsZWFudXBSZXNvdXJjZXMoKTtcbiAgICBzZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgIHNldFJlY29yZGluZyhmYWxzZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYW5kIHN0YXJ0IHRoZSBzcGVlY2ggcmVjb2duaXRpb25cbiAgICovXG4gIGNvbnN0IHN0YXJ0U3BlZWNoUmVjb2duaXRpb24gPSAoKSA9PiB7XG4gICAgLy8gRG9uJ3Qgc3RhcnQgcmVjb2duaXRpb24gaWYgYXVkaW8gaXMgcGxheWluZ1xuICAgIGlmIChhdWRpb1BsYXlpbmcpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gTm90IHN0YXJ0aW5nIHJlY29nbml0aW9uIHdoaWxlIGF1ZGlvIGlzIHBsYXlpbmdcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3RhcnRpbmcgc3BlZWNoIHJlY29nbml0aW9uXCIpO1xuICAgIFxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lb3V0c1xuICAgIGlmICh0aW1lb3V0UmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmLmN1cnJlbnQpO1xuICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW4gdXAgYW55IGV4aXN0aW5nIHJlY29nbml0aW9uXG4gICAgaWYgKHJlY29nbml0aW9uUmVmLmN1cnJlbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIGFib3J0aW5nIGV4aXN0aW5nIHJlY29nbml0aW9uOlwiLCBlKTtcbiAgICAgIH1cbiAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBTcGVlY2hSZWNvZ25pdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgXG4gICAgICAod2luZG93LlNwZWVjaFJlY29nbml0aW9uIHx8IHdpbmRvdy53ZWJraXRTcGVlY2hSZWNvZ25pdGlvbik7XG4gICAgXG4gICAgaWYgKCFTcGVlY2hSZWNvZ25pdGlvbikge1xuICAgICAgYWxlcnQoXCJTcGVlY2ggcmVjb2duaXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB5b3VyIGJyb3dzZXIuXCIpO1xuICAgICAgc2V0TWljQWN0aXZlKGZhbHNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXRlIGEgbmV3IHJlY29nbml0aW9uIGluc3RhbmNlIGZvciBlYWNoIHNlc3Npb25cbiAgICAgIGNvbnN0IHJlY29nbml0aW9uID0gbmV3IFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICByZWNvZ25pdGlvbi5jb250aW51b3VzID0gZmFsc2U7XG4gICAgICByZWNvZ25pdGlvbi5pbnRlcmltUmVzdWx0cyA9IHRydWU7XG4gICAgICByZWNvZ25pdGlvbi5sYW5nID0gXCJlbi1VU1wiO1xuICAgICAgcmVjb2duaXRpb24ubWF4QWx0ZXJuYXRpdmVzID0gMTtcblxuICAgICAgLy8gU3BlZWNoIHJlY29nbml0aW9uIHN0YXJ0ZWRcbiAgICAgIHJlY29nbml0aW9uLm9uc3RhcnQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3BlZWNoIHJlY29nbml0aW9uIHN0YXJ0ZWRcIik7XG4gICAgICAgIHNldExpc3RlbmluZyh0cnVlKTtcbiAgICAgICAgc3RhcnRBdWRpb1JlY29yZGluZygpO1xuICAgICAgfTtcblxuICAgICAgLy8gSGFuZGxlIHNwZWVjaCByZWNvZ25pdGlvbiBlcnJvcnNcbiAgICAgIHJlY29nbml0aW9uLm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW1ZvaWNlQ2hhdF0gU3BlZWNoIHJlY29nbml0aW9uIGVycm9yOiAke2V2ZW50LmVycm9yfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gTm8gc3BlZWNoIGVycm9yIGlzIGNvbW1vbiBhbmQgbm90IGZhdGFsXG4gICAgICAgIGlmIChldmVudC5lcnJvciA9PT0gXCJuby1zcGVlY2hcIikge1xuICAgICAgICAgIHNldExpc3RlbmluZyhmYWxzZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSWYgbWljIGlzIHN0aWxsIGFjdGl2ZSwgcmVzdGFydCBhZnRlciBhIHNob3J0IGRlbGF5XG4gICAgICAgICAgaWYgKG1pY0FjdGl2ZSAmJiAhcHJvY2Vzc2luZykge1xuICAgICAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIG90aGVyIGVycm9yc1xuICAgICAgICBzZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgbm90IG1hbnVhbGx5IGFib3J0ZWQgYW5kIG1pYyBpcyBzdGlsbCBhY3RpdmUsIHRyeSB0byByZXN0YXJ0XG4gICAgICAgIGlmIChldmVudC5lcnJvciAhPT0gXCJhYm9ydGVkXCIgJiYgbWljQWN0aXZlICYmICFwcm9jZXNzaW5nKSB7XG4gICAgICAgICAgdGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWljQWN0aXZlICYmICFwcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICAgIHN0YXJ0U3BlZWNoUmVjb2duaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBIYW5kbGUgc3BlZWNoIHJlY29nbml0aW9uIGVuZGluZ1xuICAgICAgcmVjb2duaXRpb24ub25lbmQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gU3BlZWNoIHJlY29nbml0aW9uIGVuZGVkIG5vcm1hbGx5XCIpO1xuICAgICAgICBzZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgbWljIHNob3VsZCBzdGlsbCBiZSBhY3RpdmUgYW5kIHdlJ3JlIG5vdCBwcm9jZXNzaW5nLCByZXN0YXJ0XG4gICAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcgJiYgIXJlc3BvbnNlUmVjZWl2ZWQpIHtcbiAgICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChtaWNBY3RpdmUgJiYgIXByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgICAgc3RhcnRTcGVlY2hSZWNvZ25pdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEhhbmRsZSBzcGVlY2ggcmVjb2duaXRpb24gcmVzdWx0c1xuICAgICAgcmVjb2duaXRpb24ub25yZXN1bHQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGZpbmFsVHJhbnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWN0IGZpbmFsIHRyYW5zY3JpcHRcbiAgICAgICAgZm9yIChsZXQgaSA9IGV2ZW50LnJlc3VsdEluZGV4OyBpIDwgZXZlbnQucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHQgPSBldmVudC5yZXN1bHRzW2ldWzBdLnRyYW5zY3JpcHQ7XG4gICAgICAgICAgaWYgKGV2ZW50LnJlc3VsdHNbaV0uaXNGaW5hbCkge1xuICAgICAgICAgICAgZmluYWxUcmFuc2NyaXB0ICs9IHRyYW5zY3JpcHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIGZpbmFsIHNwZWVjaCByZXN1bHRcbiAgICAgICAgaWYgKGZpbmFsVHJhbnNjcmlwdC50cmltKCkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIEZpbmFsIHRyYW5zY3JpcHQ6XCIsIGZpbmFsVHJhbnNjcmlwdCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3RvcCBzcGVlY2ggcmVjb2duaXRpb24gdG8gcHJldmVudCBjYXB0dXJpbmcgcmVzcG9uc2VcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVjb2duaXRpb24uYWJvcnQoKTtcbiAgICAgICAgICAgIHJlY29nbml0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBzdG9wcGluZyByZWNvZ25pdGlvbiBhZnRlciByZXN1bHQ6XCIsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBzZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2UgdG8gVUlcbiAgICAgICAgICBvbk5ld01lc3NhZ2UoZmluYWxUcmFuc2NyaXB0LCBcInVzZXJcIik7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IGF1ZGlvIGRhdGEgYW5kIHNlbmQgdG8gYmFja2VuZFxuICAgICAgICAgIGNvbnN0IGF1ZGlvRGF0YSA9IGF3YWl0IHN0b3BBdWRpb1JlY29yZGluZ0FuZEdldERhdGEoKTtcbiAgICAgICAgICBpZiAoYXVkaW9EYXRhKSB7XG4gICAgICAgICAgICBzZXRQcm9jZXNzaW5nKHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCBzZW5kQXVkaW9Ub0JhY2tlbmQoYXVkaW9EYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3Igc2VuZGluZyBhdWRpbyB0byBiYWNrZW5kOlwiLCBlcnIpO1xuICAgICAgICAgICAgICBvbk5ld01lc3NhZ2UoYEVycm9yOiAke2Vyci5tZXNzYWdlfWAsIFwiYXNzaXN0YW50XCIpO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgc2V0UHJvY2Vzc2luZyhmYWxzZSk7XG4gICAgICAgICAgICAgIHNldFJlc3BvbnNlUmVjZWl2ZWQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gTm8gdmFsaWQgYXVkaW8gZGF0YSB0byBzZW5kXCIpO1xuICAgICAgICAgICAgLy8gSWYgbWljIGlzIHN0aWxsIGFjdGl2ZSwgcmVzdGFydCByZWNvZ25pdGlvblxuICAgICAgICAgICAgaWYgKG1pY0FjdGl2ZSkge1xuICAgICAgICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobWljQWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gU3RvcmUgYW5kIHN0YXJ0XG4gICAgICByZWNvZ25pdGlvblJlZi5jdXJyZW50ID0gcmVjb2duaXRpb247XG4gICAgICByZWNvZ25pdGlvbi5zdGFydCgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBzZXR0aW5nIHVwIHNwZWVjaCByZWNvZ25pdGlvbjpcIiwgZSk7XG4gICAgICBzZXRNaWNBY3RpdmUoZmFsc2UpO1xuICAgICAgc2V0TGlzdGVuaW5nKGZhbHNlKTtcbiAgICAgIFxuICAgICAgLy8gVHJ5IHRvIHJlc3RhcnQgYWZ0ZXIgYSBzaG9ydCBkZWxheSBpZiB0aGlzIHdhcyBhIHRlbXBvcmFyeSBlcnJvclxuICAgICAgaWYgKG1pY0FjdGl2ZSkge1xuICAgICAgICB0aW1lb3V0UmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAobWljQWN0aXZlKSB7XG4gICAgICAgICAgICBzdGFydFNwZWVjaFJlY29nbml0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAxMDAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHJlY29yZGluZyBhdWRpb1xuICAgKi9cbiAgY29uc3Qgc3RhcnRBdWRpb1JlY29yZGluZyA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBDbGVhbiB1cCBhbnkgZXhpc3RpbmcgcmVjb3JkaW5nIGZpcnN0XG4gICAgaWYgKHN0cmVhbVJlZi5jdXJyZW50KSB7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudC5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICBzdHJlYW1SZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFN0YXJ0aW5nIGF1ZGlvIHJlY29yZGluZ1wiKTtcbiAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsgXG4gICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgZWNob0NhbmNlbGxhdGlvbjogdHJ1ZSxcbiAgICAgICAgICBub2lzZVN1cHByZXNzaW9uOiB0cnVlLFxuICAgICAgICAgIGF1dG9HYWluQ29udHJvbDogdHJ1ZVxuICAgICAgICB9IFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHN0cmVhbVJlZi5jdXJyZW50ID0gc3RyZWFtO1xuICAgICAgXG4gICAgICBjb25zdCBtZWRpYVJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtLCB7IG1pbWVUeXBlOiBcImF1ZGlvL3dlYm1cIiB9KTtcbiAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCA9IG1lZGlhUmVjb3JkZXI7XG4gICAgICBhdWRpb0NodW5rc1JlZi5jdXJyZW50ID0gW107XG4gICAgICBcbiAgICAgIG1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5kYXRhICYmIGV2ZW50LmRhdGEuc2l6ZSA+IDApIHtcbiAgICAgICAgICBhdWRpb0NodW5rc1JlZi5jdXJyZW50LnB1c2goZXZlbnQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIG1lZGlhUmVjb3JkZXIuc3RhcnQoMTAwKTsgLy8gQ29sbGVjdCBkYXRhIGluIDEwMG1zIGNodW5rc1xuICAgICAgc2V0UmVjb3JkaW5nKHRydWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbVm9pY2VDaGF0XSBFcnJvciBzdGFydGluZyBhdWRpbyByZWNvcmRpbmc6XCIsIGUpO1xuICAgICAgYWxlcnQoXCJDb3VsZCBub3QgYWNjZXNzIG1pY3JvcGhvbmUuIFBsZWFzZSBjaGVjayBwZXJtaXNzaW9ucy5cIik7XG4gICAgICBzZXRNaWNBY3RpdmUoZmFsc2UpO1xuICAgICAgc2V0UmVjb3JkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFN0b3AgYXVkaW8gcmVjb3JkaW5nIGFuZCByZXR1cm4gdGhlIGF1ZGlvIGRhdGFcbiAgICovXG4gIGNvbnN0IHN0b3BBdWRpb1JlY29yZGluZ0FuZEdldERhdGEgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAoIW1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCB8fCBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQuc3RhdGUgIT09IFwicmVjb3JkaW5nXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBObyBhY3RpdmUgcmVjb3JkaW5nIHRvIHN0b3BcIik7XG4gICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBTdG9wcGluZyBhdWRpbyByZWNvcmRpbmcgYW5kIGdldHRpbmcgZGF0YVwiKTtcbiAgICAgIFxuICAgICAgY29uc3QgaGFuZGxlU3RvcCA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFhdWRpb0NodW5rc1JlZi5jdXJyZW50Lmxlbmd0aCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gTm8gYXVkaW8gY2h1bmtzIGNvbGxlY3RlZFwiKTtcbiAgICAgICAgICBjbGVhbnVwQXVkaW9SZXNvdXJjZXMoKTtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYXVkaW9CbG9iID0gbmV3IEJsb2IoYXVkaW9DaHVua3NSZWYuY3VycmVudCwgeyB0eXBlOiBcImF1ZGlvL3dlYm1cIiB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJbVm9pY2VDaGF0XSBBdWRpbyByZWNvcmRpbmcgY29tcGxldGUsIHNpemU6XCIsIGF1ZGlvQmxvYi5zaXplLCBcImJ5dGVzXCIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGF1ZGlvQmxvYi5zaXplIDwgMTAwMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiW1ZvaWNlQ2hhdF0gQXVkaW8gdG9vIHNtYWxsLCBpZ25vcmluZ1wiKTtcbiAgICAgICAgICBjbGVhbnVwQXVkaW9SZXNvdXJjZXMoKTtcbiAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udmVydCB0byBiYXNlNjRcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYXVkaW9CbG9iKTtcbiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBiYXNlNjRkYXRhID0gcmVhZGVyLnJlc3VsdC5zcGxpdCgnLCcpWzFdO1xuICAgICAgICAgIGNsZWFudXBBdWRpb1Jlc291cmNlcygpO1xuICAgICAgICAgIHJlc29sdmUoYmFzZTY0ZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW1ZvaWNlQ2hhdF0gRXJyb3IgcmVhZGluZyBhdWRpbyBibG9iXCIpO1xuICAgICAgICAgIGNsZWFudXBBdWRpb1Jlc291cmNlcygpO1xuICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBjbGVhbnVwQXVkaW9SZXNvdXJjZXMgPSAoKSA9PiB7XG4gICAgICAgIGlmIChzdHJlYW1SZWYuY3VycmVudCkge1xuICAgICAgICAgIHN0cmVhbVJlZi5jdXJyZW50LmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcbiAgICAgICAgICBzdHJlYW1SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIG1lZGlhUmVjb3JkZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIGF1ZGlvQ2h1bmtzUmVmLmN1cnJlbnQgPSBbXTtcbiAgICAgICAgc2V0UmVjb3JkaW5nKGZhbHNlKTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIFNldCBzdG9wIGhhbmRsZXIgYW5kIHN0b3AgcmVjb3JkaW5nXG4gICAgICBtZWRpYVJlY29yZGVyUmVmLmN1cnJlbnQub25zdG9wID0gaGFuZGxlU3RvcDtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgbWVkaWFSZWNvcmRlclJlZi5jdXJyZW50LnN0b3AoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIltWb2ljZUNoYXRdIEVycm9yIHN0b3BwaW5nIG1lZGlhIHJlY29yZGVyOlwiLCBlKTtcbiAgICAgICAgY2xlYW51cEF1ZGlvUmVzb3VyY2VzKCk7XG4gICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNlbmQgYXVkaW8gZGF0YSB0byB0aGUgYmFja2VuZFxuICAgKi9cbiAgY29uc3Qgc2VuZEF1ZGlvVG9CYWNrZW5kID0gYXN5bmMgKGF1ZGlvRGF0YSkgPT4ge1xuICAgIGlmICghc29ja2V0LmN1cnJlbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvY2tldCBub3QgY29ubmVjdGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlJlcXVlc3QgdGltZWQgb3V0IGFmdGVyIDkwIHNlY29uZHNcIikpO1xuICAgICAgfSwgOTAwMDApO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhcIltWb2ljZUNoYXRdIFNlbmRpbmcgYXVkaW8gdG8gYmFja2VuZFwiKTtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIHVzZXIgbWVzc2FnZSB0byBzaG93IHNlbmRpbmcgc3RhdGVcbiAgICAgIG9uTmV3TWVzc2FnZShcIlNlbmRpbmcgeW91ciBtZXNzYWdlLi4uXCIsIFwidXNlclwiLCBudWxsLCBudWxsLCB0cnVlKTtcbiAgICAgIFxuICAgICAgc29ja2V0LmN1cnJlbnQuZW1pdChcImF1ZGlvSW5wdXRcIiwge1xuICAgICAgICBhdWRpb0RhdGEsXG4gICAgICAgIHN5c3RlbUluc3RydWN0aW9uOiBzeXN0ZW1JbnN0cnVjdGlvbnMsXG4gICAgICAgIGFwaUtleTogYXBpS2V5LnRyaW0oKSxcbiAgICAgICAgbWltZVR5cGU6IFwiYXVkaW8vd2VibVwiXG4gICAgICB9LCAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIk5vIHJlc3BvbnNlIGZyb20gc2VydmVyXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSk7XG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgLy8gVXBkYXRlIHVzZXIgbWVzc2FnZSB0byBzaG93IGNvbXBsZXRpb25cbiAgICAgIG9uTmV3TWVzc2FnZShcIvCfjqQgTWVzc2FnZSBzZW50XCIsIFwidXNlclwiLCBudWxsLCBudWxsLCB0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGVycm9ycyBpbiByZXNwb25zZVxuICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGRhdGEuZXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIHJlc3BvbnNlXG4gICAgICBjb25zdCBhc3Npc3RhbnRUZXh0ID0gZGF0YS50ZXh0IHx8IFwiW0F1ZGlvIHJlc3BvbnNlXVwiO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgdmFsaWQgYXVkaW8gZGF0YVxuICAgICAgaWYgKGRhdGEuYXVkaW9EYXRhKSB7XG4gICAgICAgIG9uTmV3TWVzc2FnZShcbiAgICAgICAgICBhc3Npc3RhbnRUZXh0LCBcbiAgICAgICAgICBcImFzc2lzdGFudFwiLCBcbiAgICAgICAgICBkYXRhLmF1ZGlvRGF0YSwgXG4gICAgICAgICAgZGF0YS5taW1lVHlwZSB8fCBcImF1ZGlvL3dhdlwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbk5ld01lc3NhZ2UoYXNzaXN0YW50VGV4dCwgXCJhc3Npc3RhbnRcIik7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gUmVuZGVyIFVJXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9scy1jb250YWluZXJcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3NOYW1lPXtgbWljLWJ1dHRvbiAke21pY0FjdGl2ZSA/ICdtaWMtYWN0aXZlJyA6ICdtaWMtaW5hY3RpdmUnfWB9XG4gICAgICAgIG9uQ2xpY2s9e3RvZ2dsZU1pY3JvcGhvbmV9XG4gICAgICAgIGRpc2FibGVkPXtzb2NrZXRTdGF0dXMgIT09IFwiY29ubmVjdGVkXCIgfHwgcHJvY2Vzc2luZ31cbiAgICAgICAgdGl0bGU9e21pY0FjdGl2ZSA/IFwiQ2xpY2sgdG8gc3RvcCBsaXN0ZW5pbmdcIiA6IFwiQ2xpY2sgdG8gc3RhcnQgbGlzdGVuaW5nXCJ9XG4gICAgICA+XG4gICAgICAgIHtsaXN0ZW5pbmcgPyAn8J+OpCcgOiByZWNvcmRpbmcgPyAn8J+TgCcgOiBwcm9jZXNzaW5nID8gJ+KPsycgOiAn8J+Ome+4jyd9XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxwIGNsYXNzTmFtZT1cImNvbnRyb2wtdGV4dFwiPlxuICAgICAgICB7c29ja2V0U3RhdHVzICE9PSBcImNvbm5lY3RlZFwiXG4gICAgICAgICAgPyBcIuKPsyBXYWl0aW5nIGZvciBzZXJ2ZXIgY29ubmVjdGlvbi4uLlwiXG4gICAgICAgICAgOiBwcm9jZXNzaW5nXG4gICAgICAgICAgICA/IFwi4o+zIFByb2Nlc3NpbmcgeW91ciBtZXNzYWdlLi4uXCJcbiAgICAgICAgICAgIDogcmVjb3JkaW5nICYmICFsaXN0ZW5pbmdcbiAgICAgICAgICAgICAgPyBcIvCfk4AgUmVjb3JkaW5nIHlvdXIgbWVzc2FnZS4uLlwiXG4gICAgICAgICAgICAgIDogbGlzdGVuaW5nXG4gICAgICAgICAgICAgICAgPyBcIvCfjqQgTGlzdGVuaW5nIHRvIHlvdXIgdm9pY2UuLi5cIlxuICAgICAgICAgICAgICAgIDogbWljQWN0aXZlXG4gICAgICAgICAgICAgICAgICA/IFwi8J+Ome+4jyBSZWFkeSBmb3IgeW91ciB2b2ljZS4uLlwiXG4gICAgICAgICAgICAgICAgICA6IFwi8J+Ome+4jyBDbGljayB0aGUgbWljcm9waG9uZSB0byBzdGFydFwiXG4gICAgICAgIH1cbiAgICAgIDwvcD5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlUmVmIiwidXNlRWZmZWN0IiwiYXVkaW9FdmVudHMiLCJsaXN0ZW5lcnMiLCJzdWJzY3JpYmUiLCJldmVudCIsImNhbGxiYWNrIiwicHVzaCIsImZpbHRlciIsImNiIiwicHVibGlzaCIsImRhdGEiLCJmb3JFYWNoIiwiVm9pY2VDaGF0Iiwic29ja2V0Iiwic29ja2V0U3RhdHVzIiwic3lzdGVtSW5zdHJ1Y3Rpb25zIiwiYXBpS2V5Iiwib25OZXdNZXNzYWdlIiwibWljQWN0aXZlIiwic2V0TWljQWN0aXZlIiwibGlzdGVuaW5nIiwic2V0TGlzdGVuaW5nIiwicmVjb3JkaW5nIiwic2V0UmVjb3JkaW5nIiwicHJvY2Vzc2luZyIsInNldFByb2Nlc3NpbmciLCJyZXNwb25zZVJlY2VpdmVkIiwic2V0UmVzcG9uc2VSZWNlaXZlZCIsImF1ZGlvUGxheWluZyIsInNldEF1ZGlvUGxheWluZyIsInJlY29nbml0aW9uUmVmIiwibWVkaWFSZWNvcmRlclJlZiIsImF1ZGlvQ2h1bmtzUmVmIiwic3RyZWFtUmVmIiwidGltZW91dFJlZiIsInVuc3Vic2NyaWJlU3RhcnQiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudCIsImFib3J0IiwiZSIsImVycm9yIiwidW5zdWJzY3JpYmVFbmQiLCJzZXRUaW1lb3V0Iiwic3RhcnRTcGVlY2hSZWNvZ25pdGlvbiIsImNsZWFudXBSZXNvdXJjZXMiLCJjbGVhclRpbWVvdXQiLCJnZXRUcmFja3MiLCJ0cmFjayIsInN0b3AiLCJ0b2dnbGVNaWNyb3Bob25lIiwic3RvcE1pY3JvcGhvbmUiLCJzdGFydE1pY3JvcGhvbmUiLCJTcGVlY2hSZWNvZ25pdGlvbiIsIndpbmRvdyIsIndlYmtpdFNwZWVjaFJlY29nbml0aW9uIiwiYWxlcnQiLCJyZWNvZ25pdGlvbiIsImNvbnRpbnVvdXMiLCJpbnRlcmltUmVzdWx0cyIsImxhbmciLCJtYXhBbHRlcm5hdGl2ZXMiLCJvbnN0YXJ0Iiwic3RhcnRBdWRpb1JlY29yZGluZyIsIm9uZXJyb3IiLCJvbmVuZCIsIm9ucmVzdWx0IiwiZmluYWxUcmFuc2NyaXB0IiwiaSIsInJlc3VsdEluZGV4IiwicmVzdWx0cyIsImxlbmd0aCIsInRyYW5zY3JpcHQiLCJpc0ZpbmFsIiwidHJpbSIsImF1ZGlvRGF0YSIsInN0b3BBdWRpb1JlY29yZGluZ0FuZEdldERhdGEiLCJzZW5kQXVkaW9Ub0JhY2tlbmQiLCJlcnIiLCJtZXNzYWdlIiwic3RhcnQiLCJzdHJlYW0iLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJhdWRpbyIsImVjaG9DYW5jZWxsYXRpb24iLCJub2lzZVN1cHByZXNzaW9uIiwiYXV0b0dhaW5Db250cm9sIiwibWVkaWFSZWNvcmRlciIsIk1lZGlhUmVjb3JkZXIiLCJtaW1lVHlwZSIsIm9uZGF0YWF2YWlsYWJsZSIsInNpemUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN0YXRlIiwiaGFuZGxlU3RvcCIsImNsZWFudXBBdWRpb1Jlc291cmNlcyIsImF1ZGlvQmxvYiIsIkJsb2IiLCJ0eXBlIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlYWRBc0RhdGFVUkwiLCJvbmxvYWRlbmQiLCJiYXNlNjRkYXRhIiwicmVzdWx0Iiwic3BsaXQiLCJvbnN0b3AiLCJFcnJvciIsInJlamVjdCIsInRpbWVvdXRJZCIsImVtaXQiLCJzeXN0ZW1JbnN0cnVjdGlvbiIsInJlc3BvbnNlIiwidGhlbiIsImFzc2lzdGFudFRleHQiLCJ0ZXh0IiwiZGl2IiwiY2xhc3NOYW1lIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwidGl0bGUiLCJwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/VoiceChat.js\n");

/***/ }),

/***/ "./pages/_app.js":
/*!***********************!*\
  !*** ./pages/_app.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction App({ Component, pageProps }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n        ...pageProps\n    }, void 0, false, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/_app.js\",\n        lineNumber: 4,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE4QjtBQUVmLFNBQVNBLElBQUksRUFBRUMsU0FBUyxFQUFFQyxTQUFTLEVBQUU7SUFDbEQscUJBQU8sOERBQUNEO1FBQVcsR0FBR0MsU0FBUzs7Ozs7O0FBQ2pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VtaW5pLXZvaWNlLWZyb250ZW5kLy4vcGFnZXMvX2FwcC5qcz9lMGFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi4vc3R5bGVzL2dsb2JhbHMuY3NzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9KSB7XG4gIHJldHVybiA8Q29tcG9uZW50IHsuLi5wYWdlUHJvcHN9IC8+XG59ICJdLCJuYW1lcyI6WyJBcHAiLCJDb21wb25lbnQiLCJwYWdlUHJvcHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/_app.js\n");

/***/ }),

/***/ "./pages/index.js":
/*!************************!*\
  !*** ./pages/index.js ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _components_VoiceChat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/VoiceChat */ \"./components/VoiceChat.js\");\n/* harmony import */ var _components_AudioPlayer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/AudioPlayer */ \"./components/AudioPlayer.js\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/head */ \"next/head\");\n/* harmony import */ var next_head__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_head__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _components_TalkingHead__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/TalkingHead */ \"./components/TalkingHead.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_2__]);\nsocket_io_client__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\nfunction Home() {\n    const [systemInstr, setSystemInstr] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [apiKey, setApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [showApiKey, setShowApiKey] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [socketStatus, setSocketStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"disconnected\");\n    const socketRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const chatContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [messages, setMessages] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    // Connect to socket on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (true) return; // SSR guard\n        setSocketStatus(\"connecting\");\n        const socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_2__.io)(process.env.NEXT_PUBLIC_API_WS || \"http://localhost:5000\");\n        socketRef.current = socket;\n        socket.on(\"connect\", ()=>{\n            console.log(\"[Frontend] Socket connected\");\n            setSocketStatus(\"connected\");\n        });\n        socket.on(\"disconnect\", ()=>{\n            console.log(\"[Frontend] Socket disconnected\");\n            setSocketStatus(\"disconnected\");\n        });\n        socket.on(\"connect_error\", (err)=>{\n            console.error(\"[Frontend] Socket connection error:\", err);\n            setSocketStatus(\"disconnected\");\n        });\n        return ()=>{\n            socket?.disconnect();\n        };\n    }, []);\n    // Auto-scroll to bottom when new messages arrive\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (chatContainerRef.current) {\n            chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n        }\n    }, [\n        messages\n    ]);\n    // Format timestamp for messages\n    const formatTime = (date)=>{\n        return date.toLocaleTimeString([], {\n            hour: \"2-digit\",\n            minute: \"2-digit\"\n        });\n    };\n    // Handle new message\n    const handleNewMessage = (text, sender, audioData = null, mimeType = null, isUpdate = false)=>{\n        setMessages((prev)=>{\n            // If this is an update to the last message from the same sender\n            if (isUpdate && prev.length > 0 && prev[prev.length - 1].sender === sender) {\n                const newMessages = [\n                    ...prev\n                ];\n                newMessages[newMessages.length - 1] = {\n                    ...newMessages[newMessages.length - 1],\n                    text,\n                    ...audioData && {\n                        audioData,\n                        mimeType\n                    }\n                };\n                return newMessages;\n            }\n            // Otherwise add as a new message\n            return [\n                ...prev,\n                {\n                    sender,\n                    text,\n                    timestamp: new Date(),\n                    audioData,\n                    mimeType\n                }\n            ];\n        });\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Import Three.js dynamically on the client side\n        const loadThreeJS = async ()=>{\n            // Only run in the browser\n            if (false) {}\n        };\n        loadThreeJS();\n    }, []);\n    // Function to initialize the TalkingHead\n    const initTalkingHead = (THREE, GLTFLoader, OrbitControls)=>{\n        console.log(\"Initializing TalkingHead...\");\n        const container = document.getElementById(\"talking-head\");\n        if (!container) {\n            console.error(\"Container element not found\");\n            return;\n        }\n        // Basic Three.js setup\n        const scene = new THREE.Scene();\n        scene.background = new THREE.Color(0xf5f5f5);\n        // Camera setup\n        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);\n        camera.position.set(0, 1.5, 2.0);\n        camera.lookAt(0, 1.5, 0);\n        // Renderer\n        const renderer = new THREE.WebGLRenderer({\n            antialias: true\n        });\n        renderer.setSize(container.clientWidth, container.clientHeight);\n        renderer.setPixelRatio(window.devicePixelRatio);\n        container.appendChild(renderer.domElement);\n        // Lighting\n        const ambientLight = new THREE.AmbientLight(0xffffff, 1);\n        scene.add(ambientLight);\n        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);\n        directionalLight.position.set(0, 1, 1);\n        scene.add(directionalLight);\n        // Load 3D model - use Next.js public path\n        const loader = new GLTFLoader();\n        console.log(\"Loading avatar model...\");\n        loader.load(\"/talkinghead/avatars/brunette.glb\", (gltf)=>{\n            console.log(\"Model loaded successfully!\");\n            const model = gltf.scene;\n            scene.add(model);\n            // Center model and adjust scale if needed\n            const box = new THREE.Box3().setFromObject(model);\n            const center = box.getCenter(new THREE.Vector3());\n            model.position.x = -center.x;\n            model.position.y = -center.y;\n            model.position.z = -center.z;\n            // Animation mixer for any animations\n            if (gltf.animations && gltf.animations.length > 0) {\n                const mixer = new THREE.AnimationMixer(model);\n                const clip = gltf.animations[0];\n                const action = mixer.clipAction(clip);\n                action.play();\n                // Update animations in render loop\n                const clock = new THREE.Clock();\n                function animate() {\n                    requestAnimationFrame(animate);\n                    const delta = clock.getDelta();\n                    mixer.update(delta);\n                    renderer.render(scene, camera);\n                }\n                animate();\n            } else {\n                // Simple render loop if no animations\n                function animate() {\n                    requestAnimationFrame(animate);\n                    renderer.render(scene, camera);\n                }\n                animate();\n            }\n            // Simple speaking animation function\n            window.speakWithAudio = (audioData)=>{\n                console.log(\"Speaking with audio data, length:\", audioData.length);\n            // In a real implementation, this would analyze the audio and animate the face\n            };\n        }, (progress)=>{\n            const percent = progress.loaded / progress.total * 100;\n            console.log(`Loading model: ${percent.toFixed(2)}%`);\n        }, (error)=>{\n            console.error(\"Error loading model:\", error);\n        });\n        // Handle window resize\n        window.addEventListener(\"resize\", ()=>{\n            camera.aspect = container.clientWidth / container.clientHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(container.clientWidth, container.clientHeight);\n        });\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_head__WEBPACK_IMPORTED_MODULE_5___default()), {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"title\", {\n                        children: \"Gemini Voice Chat\"\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 208,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meta\", {\n                        name: \"description\",\n                        content: \"Gemini Voice Chat with 3D Avatar\"\n                    }, void 0, false, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 209,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                lineNumber: 207,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"main-container\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"content-wrapper\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"header\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                        className: \"main-title\",\n                                        children: \"\\uD83E\\uDD16 Gemini Voice Chat\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 217,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"status-container\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: `status-indicator ${socketStatus === \"connected\" ? \"status-connected\" : socketStatus === \"connecting\" ? \"status-connecting\" : \"status-disconnected\"}`,\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"status-dot\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 226,\n                                                    columnNumber: 19\n                                                }, this),\n                                                socketStatus === \"connected\" && \"Connected\",\n                                                socketStatus === \"connecting\" && \"Connecting...\",\n                                                socketStatus === \"disconnected\" && \"Disconnected\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 221,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 220,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 216,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"card-header\",\n                                        children: \" System Instructions\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 236,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                                        className: \"system-textarea\",\n                                        placeholder: \"Enter optional system instructions (e.g. 'You are a friendly assistant who speaks like a pirate')\",\n                                        value: systemInstr,\n                                        onChange: (e)=>setSystemInstr(e.target.value),\n                                        rows: 3\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 239,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 235,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"card\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                        className: \"card-header\",\n                                        children: \"\\uD83D\\uDD11 Gemini API Key\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 250,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"api-key-container\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"api-key-input-wrapper\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                        type: showApiKey ? \"text\" : \"password\",\n                                                        className: \"api-key-input\",\n                                                        placeholder: \"Enter your Gemini API key (optional)\",\n                                                        value: apiKey,\n                                                        onChange: (e)=>setApiKey(e.target.value)\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                        lineNumber: 255,\n                                                        columnNumber: 19\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                        className: \"toggle-visibility-button\",\n                                                        onClick: ()=>setShowApiKey(!showApiKey),\n                                                        type: \"button\",\n                                                        children: showApiKey ? \"\\uD83D\\uDE48\" : \"\\uD83D\\uDC41\"\n                                                    }, void 0, false, {\n                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                        lineNumber: 262,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 254,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"api-key-info\",\n                                                children: apiKey ? \" API key provided\" : \" Using server's API key. You can provide your own for better reliability.\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 270,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 253,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 249,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"chat-container\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"chat-header\",\n                                        children: \"\\uD83D\\uDCAC Conversation\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 278,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        ref: chatContainerRef,\n                                        className: \"chat-messages\",\n                                        children: messages.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"empty-state\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"empty-icon\",\n                                                    children: \"\\uD83D\\uDDE3\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 287,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"empty-title\",\n                                                    children: \"Start a conversation by clicking the microphone\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 288,\n                                                    columnNumber: 21\n                                                }, this),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"empty-subtitle\",\n                                                    children: \"Your voice will be converted to text and sent to Gemini\"\n                                                }, void 0, false, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 289,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                            lineNumber: 286,\n                                            columnNumber: 19\n                                        }, this) : messages.map((message, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: `message-container ${message.sender}`,\n                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: `message-bubble ${message.sender === \"user\" ? \"user-message\" : \"assistant-message\"}`,\n                                                    children: [\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"message-avatar\",\n                                                            children: message.sender === \"user\" ? \"\\uD83D\\uDC64\" : \"\\uD83E\\uDD16\"\n                                                        }, void 0, false, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 295,\n                                                            columnNumber: 25\n                                                        }, this),\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                            className: \"message-content\",\n                                                            children: [\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"message-text\",\n                                                                    children: message.text\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                    lineNumber: 299,\n                                                                    columnNumber: 27\n                                                                }, this),\n                                                                message.audioData && message.sender === \"assistant\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                                    className: \"audio-player-container\",\n                                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AudioPlayer__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                                                        audioData: message.audioData,\n                                                                        mimeType: message.mimeType || \"audio/wav\"\n                                                                    }, void 0, false, {\n                                                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                        lineNumber: 302,\n                                                                        columnNumber: 31\n                                                                    }, this)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                    lineNumber: 301,\n                                                                    columnNumber: 29\n                                                                }, this),\n                                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                                    className: \"message-time\",\n                                                                    children: formatTime(message.timestamp)\n                                                                }, void 0, false, {\n                                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                                    lineNumber: 308,\n                                                                    columnNumber: 27\n                                                                }, this)\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                            lineNumber: 298,\n                                                            columnNumber: 25\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                    lineNumber: 294,\n                                                    columnNumber: 23\n                                                }, this)\n                                            }, idx, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 293,\n                                                columnNumber: 21\n                                            }, this))\n                                    }, void 0, false, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 281,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 277,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TalkingHead__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {}, void 0, false, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 320,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_VoiceChat__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                socket: socketRef,\n                                socketStatus: socketStatus,\n                                systemInstructions: systemInstr,\n                                apiKey: apiKey,\n                                onNewMessage: handleNewMessage\n                            }, void 0, false, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 323,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"features-grid\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"feature-card\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"feature-icon\",\n                                                children: \"\\uD83C\\uDF99\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 334,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                className: \"feature-title\",\n                                                children: \"Voice Input\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 335,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"feature-description\",\n                                                children: \"Speak naturally and your voice will be converted to text using advanced speech recognition\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 336,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 333,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"feature-card\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"feature-icon\",\n                                                children: \"\\uD83E\\uDDE0\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 339,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                className: \"feature-title\",\n                                                children: \"AI Processing\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 340,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"feature-description\",\n                                                children: \"Powered by Google's Gemini AI for intelligent, contextual responses\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 341,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 338,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"feature-card\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"feature-icon\",\n                                                children: \"\\uD83D\\uDD0A\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 344,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                className: \"feature-title\",\n                                                children: \"Audio Output\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 345,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"feature-description\",\n                                                children: \"Get natural-sounding audio responses that you can hear clearly\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                                lineNumber: 346,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                        lineNumber: 343,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                                lineNumber: 332,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                        lineNumber: 214,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                    lineNumber: 213,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n                lineNumber: 212,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/geitpl/Documents/GitHub/Gemini_POC_1/frontend/pages/index.js\",\n        lineNumber: 206,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVOzBEQUFlOzs7Ozs7MERBQzlCLDhEQUFDcUI7Z0RBQUdyQixXQUFVOzBEQUFnQjs7Ozs7OzBEQUM5Qiw4REFBQ2M7Z0RBQUVkLFdBQVU7MERBQXNCOzs7Ozs7Ozs7Ozs7a0RBRXJDLDhEQUFDTjt3Q0FBSU0sV0FBVTs7MERBQ2IsOERBQUNOO2dEQUFJTSxXQUFVOzBEQUFlOzs7Ozs7MERBQzlCLDhEQUFDcUI7Z0RBQUdyQixXQUFVOzBEQUFnQjs7Ozs7OzBEQUM5Qiw4REFBQ2M7Z0RBQUVkLFdBQVU7MERBQXNCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUW5EIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2VtaW5pLXZvaWNlLWZyb250ZW5kLy4vcGFnZXMvaW5kZXguanM/YmVlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGlvIH0gZnJvbSBcInNvY2tldC5pby1jbGllbnRcIjtcbmltcG9ydCBWb2ljZUNoYXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvVm9pY2VDaGF0XCI7XG5pbXBvcnQgQXVkaW9QbGF5ZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXVkaW9QbGF5ZXJcIjtcbmltcG9ydCBIZWFkIGZyb20gJ25leHQvaGVhZCc7XG5pbXBvcnQgVGFsa2luZ0hlYWQgZnJvbSBcIi4uL2NvbXBvbmVudHMvVGFsa2luZ0hlYWRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSgpIHtcbiAgY29uc3QgW3N5c3RlbUluc3RyLCBzZXRTeXN0ZW1JbnN0cl0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2FwaUtleSwgc2V0QXBpS2V5XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc2hvd0FwaUtleSwgc2V0U2hvd0FwaUtleV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzb2NrZXRTdGF0dXMsIHNldFNvY2tldFN0YXR1c10gPSB1c2VTdGF0ZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgY29uc3Qgc29ja2V0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBjaGF0Q29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBbbWVzc2FnZXMsIHNldE1lc3NhZ2VzXSA9IHVzZVN0YXRlKFtdKTtcblxuICAvLyBDb25uZWN0IHRvIHNvY2tldCBvbiBjb21wb25lbnQgbW91bnRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuOyAvLyBTU1IgZ3VhcmRcblxuICAgIHNldFNvY2tldFN0YXR1cyhcImNvbm5lY3RpbmdcIik7XG4gICAgY29uc3Qgc29ja2V0ID0gaW8ocHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1dTIHx8IFwiaHR0cDovL2xvY2FsaG9zdDo1MDAwXCIpO1xuICAgIHNvY2tldFJlZi5jdXJyZW50ID0gc29ja2V0O1xuXG4gICAgc29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIltGcm9udGVuZF0gU29ja2V0IGNvbm5lY3RlZFwiKTtcbiAgICAgIHNldFNvY2tldFN0YXR1cyhcImNvbm5lY3RlZFwiKTtcbiAgICB9KTtcblxuICAgIHNvY2tldC5vbihcImRpc2Nvbm5lY3RcIiwgKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJbRnJvbnRlbmRdIFNvY2tldCBkaXNjb25uZWN0ZWRcIik7XG4gICAgICBzZXRTb2NrZXRTdGF0dXMoXCJkaXNjb25uZWN0ZWRcIik7XG4gICAgfSk7XG5cbiAgICBzb2NrZXQub24oXCJjb25uZWN0X2Vycm9yXCIsIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbRnJvbnRlbmRdIFNvY2tldCBjb25uZWN0aW9uIGVycm9yOlwiLCBlcnIpO1xuICAgICAgc2V0U29ja2V0U3RhdHVzKFwiZGlzY29ubmVjdGVkXCIpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHNvY2tldD8uZGlzY29ubmVjdCgpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICAvLyBBdXRvLXNjcm9sbCB0byBib3R0b20gd2hlbiBuZXcgbWVzc2FnZXMgYXJyaXZlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGNoYXRDb250YWluZXJSZWYuY3VycmVudCkge1xuICAgICAgY2hhdENvbnRhaW5lclJlZi5jdXJyZW50LnNjcm9sbFRvcCA9IGNoYXRDb250YWluZXJSZWYuY3VycmVudC5zY3JvbGxIZWlnaHQ7XG4gICAgfVxuICB9LCBbbWVzc2FnZXNdKTtcblxuICAvLyBGb3JtYXQgdGltZXN0YW1wIGZvciBtZXNzYWdlc1xuICBjb25zdCBmb3JtYXRUaW1lID0gKGRhdGUpID0+IHtcbiAgICByZXR1cm4gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoW10sIHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTtcbiAgfTtcblxuICAvLyBIYW5kbGUgbmV3IG1lc3NhZ2VcbiAgY29uc3QgaGFuZGxlTmV3TWVzc2FnZSA9ICh0ZXh0LCBzZW5kZXIsIGF1ZGlvRGF0YSA9IG51bGwsIG1pbWVUeXBlID0gbnVsbCwgaXNVcGRhdGUgPSBmYWxzZSkgPT4ge1xuICAgIHNldE1lc3NhZ2VzKChwcmV2KSA9PiB7XG4gICAgICAvLyBJZiB0aGlzIGlzIGFuIHVwZGF0ZSB0byB0aGUgbGFzdCBtZXNzYWdlIGZyb20gdGhlIHNhbWUgc2VuZGVyXG4gICAgICBpZiAoaXNVcGRhdGUgJiYgcHJldi5sZW5ndGggPiAwICYmIHByZXZbcHJldi5sZW5ndGggLSAxXS5zZW5kZXIgPT09IHNlbmRlcikge1xuICAgICAgICBjb25zdCBuZXdNZXNzYWdlcyA9IFsuLi5wcmV2XTtcbiAgICAgICAgbmV3TWVzc2FnZXNbbmV3TWVzc2FnZXMubGVuZ3RoIC0gMV0gPSB7XG4gICAgICAgICAgLi4ubmV3TWVzc2FnZXNbbmV3TWVzc2FnZXMubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgdGV4dCxcbiAgICAgICAgICAuLi4oYXVkaW9EYXRhICYmIHsgYXVkaW9EYXRhLCBtaW1lVHlwZSB9KVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3TWVzc2FnZXM7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE90aGVyd2lzZSBhZGQgYXMgYSBuZXcgbWVzc2FnZVxuICAgICAgcmV0dXJuIFsuLi5wcmV2LCB7XG4gICAgICAgIHNlbmRlcixcbiAgICAgICAgdGV4dCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICBhdWRpb0RhdGEsXG4gICAgICAgIG1pbWVUeXBlXG4gICAgICB9XTtcbiAgICB9KTtcbiAgfTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEltcG9ydCBUaHJlZS5qcyBkeW5hbWljYWxseSBvbiB0aGUgY2xpZW50IHNpZGVcbiAgICBjb25zdCBsb2FkVGhyZWVKUyA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE9ubHkgcnVuIGluIHRoZSBicm93c2VyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBMb2FkIFRocmVlLmpzIGFuZCByZWxhdGVkIGxpYnJhcmllc1xuICAgICAgICAgIGNvbnN0IFRIUkVFID0gYXdhaXQgaW1wb3J0KCd0aHJlZScpO1xuICAgICAgICAgIGNvbnN0IHsgR0xURkxvYWRlciB9ID0gYXdhaXQgaW1wb3J0KCd0aHJlZS9leGFtcGxlcy9qc20vbG9hZGVycy9HTFRGTG9hZGVyLmpzJyk7XG4gICAgICAgICAgY29uc3QgeyBPcmJpdENvbnRyb2xzIH0gPSBhd2FpdCBpbXBvcnQoJ3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzLmpzJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgVGFsa2luZ0hlYWRcbiAgICAgICAgICBpbml0VGFsa2luZ0hlYWQoVEhSRUUsIEdMVEZMb2FkZXIsIE9yYml0Q29udHJvbHMpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgVGhyZWUuanM6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBsb2FkVGhyZWVKUygpO1xuICB9LCBbXSk7XG4gIFxuICAvLyBGdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBUYWxraW5nSGVhZFxuICBjb25zdCBpbml0VGFsa2luZ0hlYWQgPSAoVEhSRUUsIEdMVEZMb2FkZXIsIE9yYml0Q29udHJvbHMpID0+IHtcbiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nIFRhbGtpbmdIZWFkLi4uJyk7XG4gICAgXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhbGtpbmctaGVhZCcpO1xuICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb250YWluZXIgZWxlbWVudCBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQmFzaWMgVGhyZWUuanMgc2V0dXBcbiAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHhmNWY1ZjUpO1xuICAgIFxuICAgIC8vIENhbWVyYSBzZXR1cFxuICAgIGNvbnN0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSg0NSwgY29udGFpbmVyLmNsaWVudFdpZHRoIC8gY29udGFpbmVyLmNsaWVudEhlaWdodCwgMC4xLCAxMDAwKTtcbiAgICBjYW1lcmEucG9zaXRpb24uc2V0KDAsIDEuNSwgMi4wKTtcbiAgICBjYW1lcmEubG9va0F0KDAsIDEuNSwgMCk7XG4gICAgXG4gICAgLy8gUmVuZGVyZXJcbiAgICBjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlIH0pO1xuICAgIHJlbmRlcmVyLnNldFNpemUoY29udGFpbmVyLmNsaWVudFdpZHRoLCBjb250YWluZXIuY2xpZW50SGVpZ2h0KTtcbiAgICByZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocmVuZGVyZXIuZG9tRWxlbWVudCk7XG4gICAgXG4gICAgLy8gTGlnaHRpbmdcbiAgICBjb25zdCBhbWJpZW50TGlnaHQgPSBuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4ZmZmZmZmLCAxKTtcbiAgICBzY2VuZS5hZGQoYW1iaWVudExpZ2h0KTtcbiAgICBcbiAgICBjb25zdCBkaXJlY3Rpb25hbExpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEpO1xuICAgIGRpcmVjdGlvbmFsTGlnaHQucG9zaXRpb24uc2V0KDAsIDEsIDEpO1xuICAgIHNjZW5lLmFkZChkaXJlY3Rpb25hbExpZ2h0KTtcbiAgICBcbiAgICAvLyBMb2FkIDNEIG1vZGVsIC0gdXNlIE5leHQuanMgcHVibGljIHBhdGhcbiAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xuICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIGF2YXRhciBtb2RlbC4uLicpO1xuICAgIFxuICAgIGxvYWRlci5sb2FkKFxuICAgICAgJy90YWxraW5naGVhZC9hdmF0YXJzL2JydW5ldHRlLmdsYicsXG4gICAgICAoZ2x0ZikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kZWwgbG9hZGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBnbHRmLnNjZW5lO1xuICAgICAgICBzY2VuZS5hZGQobW9kZWwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2VudGVyIG1vZGVsIGFuZCBhZGp1c3Qgc2NhbGUgaWYgbmVlZGVkXG4gICAgICAgIGNvbnN0IGJveCA9IG5ldyBUSFJFRS5Cb3gzKCkuc2V0RnJvbU9iamVjdChtb2RlbCk7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICAgIG1vZGVsLnBvc2l0aW9uLnggPSAtY2VudGVyLng7XG4gICAgICAgIG1vZGVsLnBvc2l0aW9uLnkgPSAtY2VudGVyLnk7XG4gICAgICAgIG1vZGVsLnBvc2l0aW9uLnogPSAtY2VudGVyLno7XG4gICAgICAgIFxuICAgICAgICAvLyBBbmltYXRpb24gbWl4ZXIgZm9yIGFueSBhbmltYXRpb25zXG4gICAgICAgIGlmIChnbHRmLmFuaW1hdGlvbnMgJiYgZ2x0Zi5hbmltYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBtaXhlciA9IG5ldyBUSFJFRS5BbmltYXRpb25NaXhlcihtb2RlbCk7XG4gICAgICAgICAgY29uc3QgY2xpcCA9IGdsdGYuYW5pbWF0aW9uc1swXTtcbiAgICAgICAgICBjb25zdCBhY3Rpb24gPSBtaXhlci5jbGlwQWN0aW9uKGNsaXApO1xuICAgICAgICAgIGFjdGlvbi5wbGF5KCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVXBkYXRlIGFuaW1hdGlvbnMgaW4gcmVuZGVyIGxvb3BcbiAgICAgICAgICBjb25zdCBjbG9jayA9IG5ldyBUSFJFRS5DbG9jaygpO1xuICAgICAgICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGNsb2NrLmdldERlbHRhKCk7XG4gICAgICAgICAgICBtaXhlci51cGRhdGUoZGVsdGEpO1xuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBhbmltYXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2ltcGxlIHJlbmRlciBsb29wIGlmIG5vIGFuaW1hdGlvbnNcbiAgICAgICAgICBmdW5jdGlvbiBhbmltYXRlKCkge1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBhbmltYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpbXBsZSBzcGVha2luZyBhbmltYXRpb24gZnVuY3Rpb25cbiAgICAgICAgd2luZG93LnNwZWFrV2l0aEF1ZGlvID0gKGF1ZGlvRGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTcGVha2luZyB3aXRoIGF1ZGlvIGRhdGEsIGxlbmd0aDonLCBhdWRpb0RhdGEubGVuZ3RoKTtcbiAgICAgICAgICAvLyBJbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd291bGQgYW5hbHl6ZSB0aGUgYXVkaW8gYW5kIGFuaW1hdGUgdGhlIGZhY2VcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAocHJvZ3Jlc3MpID0+IHtcbiAgICAgICAgY29uc3QgcGVyY2VudCA9IChwcm9ncmVzcy5sb2FkZWQgLyBwcm9ncmVzcy50b3RhbCkgKiAxMDA7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIG1vZGVsOiAke3BlcmNlbnQudG9GaXhlZCgyKX0lYCk7XG4gICAgICB9LFxuICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgbW9kZWw6JywgZXJyb3IpO1xuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgLy8gSGFuZGxlIHdpbmRvdyByZXNpemVcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgY2FtZXJhLmFzcGVjdCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCAvIGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxIZWFkPlxuICAgICAgICA8dGl0bGU+R2VtaW5pIFZvaWNlIENoYXQ8L3RpdGxlPlxuICAgICAgICA8bWV0YSBuYW1lPVwiZGVzY3JpcHRpb25cIiBjb250ZW50PVwiR2VtaW5pIFZvaWNlIENoYXQgd2l0aCAzRCBBdmF0YXJcIiAvPlxuICAgICAgPC9IZWFkPlxuICAgICAgXG4gICAgICA8bWFpbj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudC13cmFwcGVyXCI+XG4gICAgICAgICAgICB7LyogSGVhZGVyICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cIm1haW4tdGl0bGVcIj5cbiAgICAgICAgICAgICAgICDwn6SWIEdlbWluaSBWb2ljZSBDaGF0XG4gICAgICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RhdHVzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc3RhdHVzLWluZGljYXRvciAke1xuICAgICAgICAgICAgICAgICAgc29ja2V0U3RhdHVzID09PSBcImNvbm5lY3RlZFwiID8gXCJzdGF0dXMtY29ubmVjdGVkXCIgOiBcbiAgICAgICAgICAgICAgICAgIHNvY2tldFN0YXR1cyA9PT0gXCJjb25uZWN0aW5nXCIgPyBcInN0YXR1cy1jb25uZWN0aW5nXCIgOiBcbiAgICAgICAgICAgICAgICAgIFwic3RhdHVzLWRpc2Nvbm5lY3RlZFwiXG4gICAgICAgICAgICAgICAgfWB9PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdGF0dXMtZG90XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICB7c29ja2V0U3RhdHVzID09PSBcImNvbm5lY3RlZFwiICYmIFwiQ29ubmVjdGVkXCJ9XG4gICAgICAgICAgICAgICAgICB7c29ja2V0U3RhdHVzID09PSBcImNvbm5lY3RpbmdcIiAmJiBcIkNvbm5lY3RpbmcuLi5cIn1cbiAgICAgICAgICAgICAgICAgIHtzb2NrZXRTdGF0dXMgPT09IFwiZGlzY29ubmVjdGVkXCIgJiYgXCJEaXNjb25uZWN0ZWRcIn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIFN5c3RlbSBJbnN0cnVjdGlvbnMgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIj5cbiAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAg4pqZ77iPIFN5c3RlbSBJbnN0cnVjdGlvbnNcbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgPHRleHRhcmVhXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwic3lzdGVtLXRleHRhcmVhXCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkVudGVyIG9wdGlvbmFsIHN5c3RlbSBpbnN0cnVjdGlvbnMgKGUuZy4gJ1lvdSBhcmUgYSBmcmllbmRseSBhc3Npc3RhbnQgd2hvIHNwZWFrcyBsaWtlIGEgcGlyYXRlJylcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtzeXN0ZW1JbnN0cn1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFN5c3RlbUluc3RyKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICByb3dzPXszfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBBUEkgS2V5IElucHV0ICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCI+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJjYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgIPCflJEgR2VtaW5pIEFQSSBLZXlcbiAgICAgICAgICAgICAgPC9oMz5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhcGkta2V5LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXBpLWtleS1pbnB1dC13cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgdHlwZT17c2hvd0FwaUtleSA/IFwidGV4dFwiIDogXCJwYXNzd29yZFwifVxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhcGkta2V5LWlucHV0XCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIEdlbWluaSBBUEkga2V5IChvcHRpb25hbClcIlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17YXBpS2V5fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEFwaUtleShlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0b2dnbGUtdmlzaWJpbGl0eS1idXR0b25cIlxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QXBpS2V5KCFzaG93QXBpS2V5KX1cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtzaG93QXBpS2V5ID8gXCLwn5mIXCIgOiBcIvCfkYHvuI9cIn1cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImFwaS1rZXktaW5mb1wiPlxuICAgICAgICAgICAgICAgICAge2FwaUtleSA/IFwi4pyFIEFQSSBrZXkgcHJvdmlkZWRcIiA6IFwi4pqg77iPIFVzaW5nIHNlcnZlcidzIEFQSSBrZXkuIFlvdSBjYW4gcHJvdmlkZSB5b3VyIG93biBmb3IgYmV0dGVyIHJlbGlhYmlsaXR5LlwifVxuICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIENoYXQgQ29udGFpbmVyICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNoYXQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAg8J+SrCBDb252ZXJzYXRpb25cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICByZWY9e2NoYXRDb250YWluZXJSZWZ9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiY2hhdC1tZXNzYWdlc1wiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7bWVzc2FnZXMubGVuZ3RoID09PSAwID8gKFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlbXB0eS1zdGF0ZVwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVtcHR5LWljb25cIj7wn5ej77iPPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVtcHR5LXRpdGxlXCI+U3RhcnQgYSBjb252ZXJzYXRpb24gYnkgY2xpY2tpbmcgdGhlIG1pY3JvcGhvbmU8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVtcHR5LXN1YnRpdGxlXCI+WW91ciB2b2ljZSB3aWxsIGJlIGNvbnZlcnRlZCB0byB0ZXh0IGFuZCBzZW50IHRvIEdlbWluaTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9e2BtZXNzYWdlLWNvbnRhaW5lciAke21lc3NhZ2Uuc2VuZGVyfWB9PlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbWVzc2FnZS1idWJibGUgJHttZXNzYWdlLnNlbmRlciA9PT0gJ3VzZXInID8gJ3VzZXItbWVzc2FnZScgOiAnYXNzaXN0YW50LW1lc3NhZ2UnfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlLWF2YXRhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7bWVzc2FnZS5zZW5kZXIgPT09ICd1c2VyJyA/ICfwn5GkJyA6ICfwn6SWJ31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXNzYWdlLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWVzc2FnZS10ZXh0XCI+e21lc3NhZ2UudGV4dH08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHttZXNzYWdlLmF1ZGlvRGF0YSAmJiBtZXNzYWdlLnNlbmRlciA9PT0gJ2Fzc2lzdGFudCcgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXVkaW8tcGxheWVyLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEF1ZGlvUGxheWVyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0RhdGE9e21lc3NhZ2UuYXVkaW9EYXRhfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZT17bWVzc2FnZS5taW1lVHlwZSB8fCAnYXVkaW8vd2F2J31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1lc3NhZ2UtdGltZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lKG1lc3NhZ2UudGltZXN0YW1wKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogM0QgVGFsa2luZ0hlYWQgQ29tcG9uZW50ICovfVxuICAgICAgICAgICAgPFRhbGtpbmdIZWFkIC8+XG5cbiAgICAgICAgICAgIHsvKiBBdWRpbyBDaGF0IENvbnRyb2xzICovfVxuICAgICAgICAgICAgPFZvaWNlQ2hhdCBcbiAgICAgICAgICAgICAgc29ja2V0PXtzb2NrZXRSZWZ9XG4gICAgICAgICAgICAgIHNvY2tldFN0YXR1cz17c29ja2V0U3RhdHVzfVxuICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM9e3N5c3RlbUluc3RyfVxuICAgICAgICAgICAgICBhcGlLZXk9e2FwaUtleX1cbiAgICAgICAgICAgICAgb25OZXdNZXNzYWdlPXtoYW5kbGVOZXdNZXNzYWdlfVxuICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgey8qIEZlYXR1cmVzICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZWF0dXJlcy1ncmlkXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmVhdHVyZS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZWF0dXJlLWljb25cIj7wn46Z77iPPC9kaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZlYXR1cmUtdGl0bGVcIj5Wb2ljZSBJbnB1dDwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZmVhdHVyZS1kZXNjcmlwdGlvblwiPlNwZWFrIG5hdHVyYWxseSBhbmQgeW91ciB2b2ljZSB3aWxsIGJlIGNvbnZlcnRlZCB0byB0ZXh0IHVzaW5nIGFkdmFuY2VkIHNwZWVjaCByZWNvZ25pdGlvbjwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmVhdHVyZS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZWF0dXJlLWljb25cIj7wn6egPC9kaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZlYXR1cmUtdGl0bGVcIj5BSSBQcm9jZXNzaW5nPC9oND5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmZWF0dXJlLWRlc2NyaXB0aW9uXCI+UG93ZXJlZCBieSBHb29nbGUncyBHZW1pbmkgQUkgZm9yIGludGVsbGlnZW50LCBjb250ZXh0dWFsIHJlc3BvbnNlczwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmVhdHVyZS1jYXJkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmZWF0dXJlLWljb25cIj7wn5SKPC9kaXY+XG4gICAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT1cImZlYXR1cmUtdGl0bGVcIj5BdWRpbyBPdXRwdXQ8L2g0PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImZlYXR1cmUtZGVzY3JpcHRpb25cIj5HZXQgbmF0dXJhbC1zb3VuZGluZyBhdWRpbyByZXNwb25zZXMgdGhhdCB5b3UgY2FuIGhlYXIgY2xlYXJseTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L21haW4+XG4gICAgPC9kaXY+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsImlvIiwiVm9pY2VDaGF0IiwiQXVkaW9QbGF5ZXIiLCJIZWFkIiwiVGFsa2luZ0hlYWQiLCJIb21lIiwic3lzdGVtSW5zdHIiLCJzZXRTeXN0ZW1JbnN0ciIsImFwaUtleSIsInNldEFwaUtleSIsInNob3dBcGlLZXkiLCJzZXRTaG93QXBpS2V5Iiwic29ja2V0U3RhdHVzIiwic2V0U29ja2V0U3RhdHVzIiwic29ja2V0UmVmIiwiY2hhdENvbnRhaW5lclJlZiIsIm1lc3NhZ2VzIiwic2V0TWVzc2FnZXMiLCJzb2NrZXQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1dTIiwiY3VycmVudCIsIm9uIiwiY29uc29sZSIsImxvZyIsImVyciIsImVycm9yIiwiZGlzY29ubmVjdCIsInNjcm9sbFRvcCIsInNjcm9sbEhlaWdodCIsImZvcm1hdFRpbWUiLCJkYXRlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiaG91ciIsIm1pbnV0ZSIsImhhbmRsZU5ld01lc3NhZ2UiLCJ0ZXh0Iiwic2VuZGVyIiwiYXVkaW9EYXRhIiwibWltZVR5cGUiLCJpc1VwZGF0ZSIsInByZXYiLCJsZW5ndGgiLCJuZXdNZXNzYWdlcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJsb2FkVGhyZWVKUyIsIlRIUkVFIiwiR0xURkxvYWRlciIsIk9yYml0Q29udHJvbHMiLCJpbml0VGFsa2luZ0hlYWQiLCJjb250YWluZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic2NlbmUiLCJTY2VuZSIsImJhY2tncm91bmQiLCJDb2xvciIsImNhbWVyYSIsIlBlcnNwZWN0aXZlQ2FtZXJhIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJwb3NpdGlvbiIsInNldCIsImxvb2tBdCIsInJlbmRlcmVyIiwiV2ViR0xSZW5kZXJlciIsImFudGlhbGlhcyIsInNldFNpemUiLCJzZXRQaXhlbFJhdGlvIiwid2luZG93IiwiZGV2aWNlUGl4ZWxSYXRpbyIsImFwcGVuZENoaWxkIiwiZG9tRWxlbWVudCIsImFtYmllbnRMaWdodCIsIkFtYmllbnRMaWdodCIsImFkZCIsImRpcmVjdGlvbmFsTGlnaHQiLCJEaXJlY3Rpb25hbExpZ2h0IiwibG9hZGVyIiwibG9hZCIsImdsdGYiLCJtb2RlbCIsImJveCIsIkJveDMiLCJzZXRGcm9tT2JqZWN0IiwiY2VudGVyIiwiZ2V0Q2VudGVyIiwiVmVjdG9yMyIsIngiLCJ5IiwieiIsImFuaW1hdGlvbnMiLCJtaXhlciIsIkFuaW1hdGlvbk1peGVyIiwiY2xpcCIsImFjdGlvbiIsImNsaXBBY3Rpb24iLCJwbGF5IiwiY2xvY2siLCJDbG9jayIsImFuaW1hdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJkZWx0YSIsImdldERlbHRhIiwidXBkYXRlIiwicmVuZGVyIiwic3BlYWtXaXRoQXVkaW8iLCJwcm9ncmVzcyIsInBlcmNlbnQiLCJsb2FkZWQiLCJ0b3RhbCIsInRvRml4ZWQiLCJhZGRFdmVudExpc3RlbmVyIiwiYXNwZWN0IiwidXBkYXRlUHJvamVjdGlvbk1hdHJpeCIsImRpdiIsInRpdGxlIiwibWV0YSIsIm5hbWUiLCJjb250ZW50IiwibWFpbiIsImNsYXNzTmFtZSIsImgxIiwiaDMiLCJ0ZXh0YXJlYSIsInBsYWNlaG9sZGVyIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJ0YXJnZXQiLCJyb3dzIiwiaW5wdXQiLCJ0eXBlIiwiYnV0dG9uIiwib25DbGljayIsInAiLCJyZWYiLCJtYXAiLCJtZXNzYWdlIiwiaWR4Iiwic3lzdGVtSW5zdHJ1Y3Rpb25zIiwib25OZXdNZXNzYWdlIiwiaDQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/index.js\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "next/head":
/*!****************************!*\
  !*** external "next/head" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/head");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

"use strict";
module.exports = import("socket.io-client");;

/***/ }),

/***/ "three":
/*!************************!*\
  !*** external "three" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = import("three");;

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc"], () => (__webpack_exec__("./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.js&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();