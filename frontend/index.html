<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gemini Voice Chat</title>
    <link rel="stylesheet" href="styles/globals.css">
    <!-- Import map for TalkingHead dependencies -->
    <script type="importmap">
    { "imports":
      {
        "three": "https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.170.0/examples/jsm/"
      }
    }
    </script>
    
    <!-- Three.js and related libraries -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.170.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.170.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.170.0/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Simple TalkingHead implementation -->
    <script src="/public/simpletalkinghead.js"></script>
    
    <!-- Socket.io client library -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
      console.log('HTML document loading...');
      document.addEventListener('DOMContentLoaded', () => {
        console.log('DOM fully loaded');
      });
    </script>
  </head>
  <body>
    <div class="main-container">
      <div class="content-wrapper">
        <!-- Header -->
        <div class="header">
          <h1 class="main-title">
            🤖 Gemini Voice Chat
          </h1>
          <div class="status-container">
            <div id="status-indicator" class="status-indicator status-disconnected">
              <div class="status-dot"></div>
              <span id="status-text">Disconnected</span>
            </div>
            <div id="listening-indicator" class="status-indicator listening-indicator hidden">
              🎤 Listening...
            </div>
          </div>
        </div>

        <!-- System Instructions -->
        <div class="card">
          <h3 class="card-header">
            ⚙️ System Instructions
          </h3>
          <textarea
            id="systemInstr"
            class="system-textarea"
            placeholder="Enter optional system instructions (e.g. 'You are a friendly assistant who speaks like a pirate')"
            rows="3"
          ></textarea>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
          <div class="chat-header">
            💬 Conversation
          </div>
          <!-- <div id="chat" class="chat-messages">
            <div class="empty-state">
              <div class="empty-icon">🗣️</div>
              <p class="empty-title">Start a conversation by clicking the microphone</p>
              <p class="empty-subtitle">Your voice will be converted to text and sent to Gemini</p>
            </div>
          </div> -->
        </div>

        <!-- Controls -->
        <div class="controls-container">
          <p id="control-text" class="control-text">
            🎙️ Click to start voice conversation
          </p>
        </div>

        <!-- Features -->
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">🎙️</div>
            <h4 class="feature-title">Voice Input</h4>
            <p class="feature-description">Speak naturally and your voice will be converted to text using advanced speech recognition</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">🧠</div>
            <h4 class="feature-title">AI Processing</h4>
            <p class="feature-description">Powered by Google's Gemini AI for intelligent, contextual responses</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">🔊</div>
            <h4 class="feature-title">Audio Output</h4>
            <p class="feature-description">Get natural-sounding audio responses that you can hear clearly</p>
          </div>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html> 